{"version":3,"file":"static/js/auset.9e231aea.chunk.js","mappings":"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","sources":["types.ts","webpack://root-automated-setup/./src/components/css/header.module.css?9b14","components/header.tsx","features/setupSlice.ts","features/utils.ts","content.ts","features/selectors.ts","features/flowSlice.ts","features/componentsSlice.ts","hooks.ts","webpack://root-automated-setup/./src/components/css/icon.module.css?e981","components/icon.tsx","iconComponents.tsx","webpack://root-automated-setup/./src/components/css/step.module.css?f278","components/step.tsx","images/icons/militant.svg","webpack://root-automated-setup/./src/components/css/checkbox.module.css?a538","components/checkbox.tsx","webpack://root-automated-setup/./src/components/css/componentToggle.module.css?52ef","components/componentToggle.tsx","webpack://root-automated-setup/./src/components/css/factionSelect.module.css?b183","webpack://root-automated-setup/./src/components/css/statBar.module.css?92a2","components/statBar.tsx","components/iconList.tsx","webpack://root-automated-setup/./src/components/css/componentCount.module.css?b050","components/componentCount.tsx","components/factionSelect.tsx","webpack://root-automated-setup/./src/components/css/numberSelector.module.css?26ff","components/numberSelector.tsx","webpack://root-automated-setup/./src/components/css/radiogroup.module.css?73f1","components/radiogroup.tsx","images/icons/restart.svg","webpack://root-automated-setup/./src/components/css/stepList.module.css?e9e1","webpack://root-automated-setup/./src/components/css/button.module.css?14d5","components/button.tsx","images/icons/close.svg","components/stepList.tsx","store.ts","webpack://root-automated-setup/./src/components/css/toast.module.css?522a","images/icons/undo.svg","components/toast.tsx","features/thunks.ts","webpack://root-automated-setup/./src/components/css/toolbar.module.css?0cd2","images/icons/redo.svg","images/icons/next.svg","components/toolbar.tsx","serviceWorkerRegistration.ts","components/app.tsx"],"sourcesContent":["/** An object with an associated code */\r\nexport interface CodeObject {\r\n  code: string;\r\n}\r\n\r\n/** Adds the field \"code\" to an existing type */\r\nexport type WithCode<T> = T & CodeObject;\r\n\r\n/** The name of a vagabond item */\r\nexport type Item = \"bag\" | \"boot\" | \"coin\" | \"crossbow\" | \"hammer\" | \"sword\" | \"tea\" | \"torch\";\r\n\r\n/** The name of a map clearing suit */\r\nexport type ClearingSuit = \"fox\" | \"mouse\" | \"rabbit\";\r\n\r\n/** A basic game component, with an associated image */\r\nexport interface GameComponent {\r\n  image: string;\r\n}\r\n\r\n/** An object representing an Expansion or Base Box for the Root board game */\r\nexport interface Expansion extends GameComponent {\r\n  base: boolean;\r\n  decks?: Record<string, GameComponent>;\r\n  factions?: Record<string, Faction>;\r\n  hirelings?: Record<string, Hireling>;\r\n  landmarks?: Record<string, Landmark>;\r\n  maps?: Record<string, MapComponent>;\r\n  vagabonds?: Record<string, Vagabond>;\r\n}\r\n\r\n/** An object representing a Faction from the Root board game */\r\nexport interface Faction extends GameComponent {\r\n  key: string;\r\n  militant: boolean;\r\n  isVagabond: boolean;\r\n  warriors: number;\r\n  buildings: number;\r\n  buildingImage?: string;\r\n  tokens: number;\r\n  tokenImage?: string;\r\n  complexity: number;\r\n  wealth: number;\r\n  aggression: number;\r\n  crafting: number;\r\n}\r\n\r\n/** An object representing a physical Hireling card from the Root board game, which could be Promoted or Demoted */\r\nexport interface Hireling extends GameComponent {\r\n  factions: string[];\r\n}\r\n\r\n/** An object representing a Landmark piece from the Root board game */\r\nexport interface Landmark extends GameComponent {\r\n  minPlayers: number;\r\n}\r\n\r\n/** An object representing a Map from the Root board game */\r\nexport interface MapComponent extends GameComponent {\r\n  landmark?: string;\r\n}\r\n\r\n/** An object representing a Vagabond character from the Root board game */\r\nexport interface Vagabond extends GameComponent {\r\n  startingItems: Item[];\r\n}\r\n\r\n/** Payload for Toggle Component redux action */\r\nexport interface ToggleComponentPayload {\r\n  componentCode: string;\r\n  shouldEnable?: boolean;\r\n}\r\n\r\n/** An object with an associated enable/disable state */\r\nexport interface Togglable {\r\n  enabled: boolean;\r\n}\r\n\r\n/** Generic information about an expansion, namely whether it is enabled and if it is a base copy */\r\nexport interface ExpansionInfo extends Togglable, GameComponent {\r\n  base: boolean;\r\n}\r\n\r\n/** Generic information about a game component, namely whether it is enabled and what expansion it is from */\r\nexport interface ComponentInfo extends Togglable {\r\n  expansionCode: string;\r\n}\r\n\r\n/** Object tracking which components are avaliable for selection */\r\nexport interface ComponentsState {\r\n  expansions: Record<string, ExpansionInfo>;\r\n  decks: Record<string, ComponentInfo>;\r\n  factions: Record<string, ComponentInfo>;\r\n  hirelings: Record<string, ComponentInfo>;\r\n  landmarks: Record<string, ComponentInfo>;\r\n  maps: Record<string, ComponentInfo>;\r\n  vagabonds: Record<string, ComponentInfo>;\r\n}\r\n\r\n/** An object representing an promoted or demoted Hireling */\r\nexport interface HirelingEntry {\r\n  code: string;\r\n  demoted: boolean;\r\n}\r\n\r\n/** Payload for Set Hireling redux action */\r\nexport interface SetHirelingPayload {\r\n  number: number;\r\n  hirelingEntry: HirelingEntry;\r\n  factions: string[];\r\n}\r\n\r\n/** An object containing all variables used during the setup process */\r\nexport interface SetupState {\r\n  playerCount: number;\r\n  fixedFirstPlayer: boolean;\r\n  playerOrder: number[];\r\n  errorMessage: string | null;\r\n  // Map\r\n  map: string | null;\r\n  useMapLandmark: boolean;\r\n  // Deck\r\n  deck: string | null;\r\n  // Landmarks\r\n  landmarkCount: 0 | 1 | 2;\r\n  landmark1: string | null;\r\n  landmark2: string | null;\r\n  // Hirelings\r\n  hireling1: HirelingEntry | null;\r\n  hireling2: HirelingEntry | null;\r\n  hireling3: HirelingEntry | null;\r\n  // Factions\r\n  excludedFactions: string[];\r\n}\r\n\r\n/** An enum of the individual steps in the setup process. The setup process will step through this list during execution */\r\nexport enum SetupStep {\r\n  chooseExpansions,\r\n  seatPlayers,\r\n  chooseMap,\r\n  setUpMap,\r\n  setUpMapLandmark,\r\n  chooseDeck,\r\n  setUpDeck,\r\n  setUpBots,\r\n  chooseLandmarks,\r\n  setUpLandmark1,\r\n  setUpLandmark2,\r\n  chooseHirelings,\r\n  setUpHireling1,\r\n  setUpHireling2,\r\n  setUpHireling3,\r\n  postHirelingSetup,\r\n  drawCards,\r\n  chooseFactions,\r\n  selectFaction,\r\n  setUpFaction,\r\n  placeScoreMarkers,\r\n  chooseHand,\r\n  setupEnd,\r\n}\r\n\r\n/** Payload for Skip Steps redux action */\r\nexport interface SkipStepsPayload {\r\n  steps: SetupStep[];\r\n  skip: boolean;\r\n}\r\n\r\n/** An object representing a faction in the faction pool, along with it's assigned vagabond character (if it has one) */\r\nexport interface FactionEntry {\r\n  code: string;\r\n  militant: boolean;\r\n  vagabond?: string;\r\n}\r\n\r\n/** An object representing a slice of history for the flow state */\r\nexport interface FlowSlice {\r\n  step: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  vagabondSetUp: boolean;\r\n  playerIndex: number;\r\n  factionIndex: number | null;\r\n}\r\n\r\n/** An object representing the current flow state, including the current step, past and future steps, and what steps should be skipped */\r\nexport interface FlowState {\r\n  pastSteps: FlowSlice[];\r\n  currentStep: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  vagabondSetUp: boolean;\r\n  currentPlayerIndex: number;\r\n  currentFactionIndex: number | null;\r\n  skippedSteps: boolean[];\r\n  futureSteps: FlowSlice[];\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"header_container__awQsT\",\"logo\":\"header_logo__dk9zi\",\"subtitle\":\"header_subtitle__I+kkK\"};","import styles from \"./css/header.module.css\";\r\nimport rootLogo from \"../images/logo.png\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const Header: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <header className={styles.container}>\r\n      <img src={rootLogo} alt={t(\"label.logoAlt\")} className={styles.logo} />\r\n      <div className={styles.subtitle}>{t(\"label.logoText\")}</div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { CodeObject, Hireling, SetHirelingPayload, SetupState, WithCode } from \"../types\";\r\n\r\nconst initialState: SetupState = {\r\n  playerCount: 4,\r\n  fixedFirstPlayer: false,\r\n  playerOrder: [],\r\n  errorMessage: null,\r\n  // Map\r\n  map: null,\r\n  useMapLandmark: true,\r\n  // Deck\r\n  deck: null,\r\n  // Landmarks\r\n  landmarkCount: 0,\r\n  landmark1: null,\r\n  landmark2: null,\r\n  // Hirelings\r\n  hireling1: null,\r\n  hireling2: null,\r\n  hireling3: null,\r\n  // Factions\r\n  excludedFactions: [],\r\n};\r\n\r\nexport const setupSlice = createSlice({\r\n  name: \"setup\",\r\n  initialState,\r\n  reducers: {\r\n    setPlayerCount: (state, { payload: playerCount }: PayloadAction<number>) => {\r\n      // Make sure the player count is valid (i.e. above 0)\r\n      if (playerCount >= 1) {\r\n        state.playerCount = playerCount;\r\n        state.errorMessage = null;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setPlayerCount action: ${playerCount} (Payload must be a number above 0)`\r\n        );\r\n      }\r\n    },\r\n    fixFirstPlayer: (state, { payload: fixedFirstPlayer }: PayloadAction<boolean>) => {\r\n      state.fixedFirstPlayer = fixedFirstPlayer;\r\n      state.errorMessage = null;\r\n    },\r\n    setFirstPlayer: (state, { payload: firstPlayer }: PayloadAction<number>) => {\r\n      // Make sure the player count is valid (i.e. between 1 and playerCount)\r\n      if (firstPlayer >= 1 && firstPlayer <= state.playerCount) {\r\n        state.playerOrder = [];\r\n        // Generate the player order array\r\n        for (let i = 0; i < state.playerCount; i++) {\r\n          // Add each player to the array, starting with the first player\r\n          let nextPlayer = firstPlayer + i;\r\n          if (nextPlayer > state.playerCount) nextPlayer -= state.playerCount;\r\n          state.playerOrder.push(nextPlayer);\r\n        }\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setFirstPlayer action: ${firstPlayer} (Payload must be a number between 1 and playerCount [${state.playerCount}])`\r\n        );\r\n      }\r\n    },\r\n    setErrorMessage: (state, { payload: errorMessage }: PayloadAction<string | null>) => {\r\n      state.errorMessage = errorMessage;\r\n    },\r\n    enableMapLandmark: (state, { payload: useMapLandmark }: PayloadAction<boolean>) => {\r\n      state.useMapLandmark = useMapLandmark;\r\n      state.errorMessage = null;\r\n    },\r\n    setMap: (state, { payload: { code: mapCode } }: PayloadAction<CodeObject>) => {\r\n      state.map = mapCode;\r\n    },\r\n    setDeck: (state, { payload: { code: deckCode } }: PayloadAction<CodeObject>) => {\r\n      state.deck = deckCode;\r\n    },\r\n    setLandmarkCount: (state, { payload: landmarkCount }: PayloadAction<number>) => {\r\n      // We use === instead of >= or <= to ensure typescript can infer the correct payload type\r\n      if (landmarkCount === 0 || landmarkCount === 1 || landmarkCount === 2) {\r\n        state.landmarkCount = landmarkCount;\r\n        state.errorMessage = null;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setLandmarkCount action: ${landmarkCount} (Payload must be a number between 0 and 2)`\r\n        );\r\n      }\r\n    },\r\n    setLandmark1: (state, { payload: { code: landmarkCode } }: PayloadAction<CodeObject>) => {\r\n      if (state.landmarkCount >= 1) {\r\n        state.landmark1 = landmarkCode;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Invalid setLandmark1 action: Cannot set landmark 1 when landmark count less than 1\"\r\n        );\r\n      }\r\n    },\r\n    setLandmark2: (state, { payload: { code: landmarkCode } }: PayloadAction<CodeObject>) => {\r\n      if (state.landmarkCount >= 2) {\r\n        state.landmark2 = landmarkCode;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Invalid setLandmark2 action: Cannot set landmark 2 when landmark count less than 2\"\r\n        );\r\n      }\r\n    },\r\n    setHireling: {\r\n      prepare: (number: number, hireling: WithCode<Hireling>, demoted: boolean) => ({\r\n        payload: {\r\n          number,\r\n          hirelingEntry: {\r\n            code: hireling.code,\r\n            demoted,\r\n          },\r\n          factions: hireling.factions,\r\n        },\r\n      }),\r\n      reducer: (\r\n        state,\r\n        { payload: { number, hirelingEntry, factions } }: PayloadAction<SetHirelingPayload>\r\n      ) => {\r\n        if (number >= 1 && number <= 3) {\r\n          if (number === 1) state.hireling1 = hirelingEntry;\r\n          if (number === 2) state.hireling2 = hirelingEntry;\r\n          if (number === 3) state.hireling3 = hirelingEntry;\r\n\r\n          state.excludedFactions.push(...factions);\r\n        } else if (process.env.NODE_ENV !== \"production\") {\r\n          console.warn(\r\n            `Invalid payload.number for setHireling action: ${number} (Must be a number between 1 and 3)`\r\n          );\r\n        }\r\n      },\r\n    },\r\n    clearExcludedFactions: (state) => {\r\n      state.excludedFactions = [];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // This allows us to always reset the displayed error if the user makes a seperate input\r\n    builder.addDefaultCase((state) => {\r\n      state.errorMessage = null;\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  setPlayerCount,\r\n  fixFirstPlayer,\r\n  setFirstPlayer,\r\n  setErrorMessage,\r\n  enableMapLandmark,\r\n  setMap,\r\n  setDeck,\r\n  setLandmarkCount,\r\n  setLandmark1,\r\n  setLandmark2,\r\n  setHireling,\r\n  clearExcludedFactions,\r\n} = setupSlice.actions;\r\nexport default setupSlice.reducer;\r\n","import { createSelector } from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../store\";\r\nimport { ComponentsState, Togglable } from \"../types\";\r\n\r\nconst isTrue = \"1\";\r\nconst isFalse = \"0\";\r\n\r\nexport const typedKeys = Object.keys as <T extends object>(o: T) => (keyof T)[];\r\nexport const typedEntries = Object.entries as <T extends { [s: string]: any } | ArrayLike<any>>(\r\n  o: T\r\n) => [keyof T, T[keyof T]][];\r\n\r\n/**\r\n * Saves the enable/disable state of the specified expansion to localStorage\r\n * @param expansionCode\r\n * @param enabled\r\n */\r\nexport const persistExpansionEnabled = (expansionCode: string, enabled: boolean) => {\r\n  try {\r\n    localStorage.setItem(expansionCode, enabled ? isTrue : isFalse);\r\n  } catch (error: any) {\r\n    if (process.env.NODE_ENV !== \"production\")\r\n      console.warn(\r\n        `Failed to persist enable state of ${enabled} for expansion ${expansionCode}`,\r\n        error\r\n      );\r\n  }\r\n};\r\n\r\n/**\r\n * Function to return the enabled state of a given expansion in localStorage, for the purpose of setting up the initial redux state\r\n * @param expansionCode The code of the expansion to check. Also the key of the value stored in localStorage\r\n * @param base If the given expansion is actually the base game, and thus is always enabled regardless of localStorage\r\n */\r\nexport const expansionEnabled = (expansionCode: string, base: boolean): boolean => {\r\n  // Base game is always enabled, so no need to save or load localStorage\r\n  if (base) return true;\r\n\r\n  // Load the current enable state from localStorage so we remember user settings\r\n  let storedVal = localStorage.getItem(expansionCode);\r\n  let enabled: boolean;\r\n\r\n  // Was there a value stored in localStorage?\r\n  if (storedVal != null) {\r\n    // Convert the string stored in localStorage to a boolean\r\n    enabled = storedVal === isTrue;\r\n  } else {\r\n    // Default to false, then save that state to localStorage for future\r\n    enabled = false;\r\n    persistExpansionEnabled(expansionCode, enabled);\r\n  }\r\n\r\n  return enabled;\r\n};\r\n\r\n/**\r\n * Removes a random element from a given list, and then returns it\r\n * @param list The list of elements to be randomly selected\r\n */\r\nexport const takeRandom = <T>(list: T[]): T => {\r\n  // Get a random index in the given list (i.e. between 0 inclusive and list.length exclusive)\r\n  const i = Math.floor(Math.random() * list.length);\r\n  // Save value at given index so we can return it\r\n  const returnVal = list[i];\r\n  // Delete 1 element starting at chosen index\r\n  list.splice(i, 1);\r\n  return returnVal;\r\n};\r\n\r\n/**\r\n * Function for create Redux Selectors for returning a single component or a\r\n * component list as an array, moving the component key to the component field \"code\"\r\n * @param componentType The key the list of components is stored under in the \"components\" redux slice\r\n * @param getComponentData Function for retreiving the extra data about the component from the content file\r\n */\r\nexport const generateComponentSelectors = <D>(\r\n  componentType: keyof Omit<ComponentsState, \"expansions\">,\r\n  getComponentData: (expansion: string, componentCode: string) => D\r\n) => ({\r\n  select(state: RootState, code: string) {\r\n    const componentInfo = state.components[componentType][code];\r\n    return { ...getComponentData(componentInfo.expansionCode, code), ...componentInfo };\r\n  },\r\n  selectArray: createSelector(\r\n    (state: RootState) => state.components[componentType],\r\n    (componentList) => {\r\n      const array = [];\r\n      for (const [code, componentInfo] of typedEntries(componentList)) {\r\n        array.push({\r\n          ...getComponentData(componentInfo.expansionCode, code),\r\n          ...componentInfo,\r\n          code,\r\n        });\r\n      }\r\n      return array;\r\n    }\r\n  ),\r\n});\r\n\r\n/** Filters out disabled components from a given component array */\r\nexport const selectEnabled = <T extends Togglable>(array: T[]) =>\r\n  array.filter((value) => value.enabled);\r\n","import { Expansion } from \"./types\";\r\n\r\n// Box Images\r\nimport exilesDeckBox from \"./images/boxes/exilesDeck.png\";\r\nimport landmarkPackBox from \"./images/boxes/landmarkPack.png\";\r\nimport marauderBox from \"./images/boxes/marauder.png\";\r\nimport marauderHirelingsBox from \"./images/boxes/marauderHirelings.png\";\r\nimport riverfolkBox from \"./images/boxes/riverfolk.png\";\r\nimport riverfolkHirelingsBox from \"./images/boxes/riverfolkHirelings.png\";\r\nimport rootBox from \"./images/boxes/root.png\";\r\nimport underworldBox from \"./images/boxes/underworld.png\";\r\nimport underworldHirelingsBox from \"./images/boxes/underworldHirelings.png\";\r\nimport vagabondPackBox from \"./images/boxes/vagabondPack.png\";\r\n\r\n// Building Images\r\nimport baseBuildings from \"./images/buildings/bases.png\";\r\nimport duchyBuildings from \"./images/buildings/duchy.png\";\r\nimport gardenBuildings from \"./images/buildings/gardens.png\";\r\nimport marquiseBuildings from \"./images/buildings/marquise.png\";\r\nimport roostBuilding from \"./images/buildings/roost.png\";\r\nimport strongholdBuilding from \"./images/buildings/stronghold.png\";\r\nimport waystationBuildings from \"./images/buildings/waystations.png\";\r\n\r\n// Card Images\r\nimport exilesCard from \"./images/cards/exiles.png\";\r\nimport standardCard from \"./images/cards/standard.png\";\r\n\r\n// Landmark Images\r\nimport cityLandmark from \"./images/landmarks/city.png\";\r\nimport ferryLandmark from \"./images/landmarks/ferry.png\";\r\nimport forgeLandmark from \"./images/landmarks/forge.png\";\r\nimport marketLandmark from \"./images/landmarks/market.png\";\r\nimport towerLandmark from \"./images/landmarks/tower.png\";\r\nimport treetopLandmark from \"./images/landmarks/treetop.png\";\r\n\r\n// Map Images\r\nimport autumnMap from \"./images/maps/autumn.png\";\r\nimport lakeMap from \"./images/maps/lake.png\";\r\nimport mountainMap from \"./images/maps/mountain.png\";\r\nimport winterMap from \"./images/maps/winter.png\";\r\n\r\n// Meeple Images\r\nimport adventurerMeeple from \"./images/meeples/adventurer.png\";\r\nimport allianceMeeple from \"./images/meeples/alliance.png\";\r\nimport arbiterMeeple from \"./images/meeples/arbiter.png\";\r\nimport bandMeeple from \"./images/meeples/band.png\";\r\nimport banditsMeeple from \"./images/meeples/bandits.png\";\r\nimport corvidMeeple from \"./images/meeples/corvid.png\";\r\nimport cultMeeple from \"./images/meeples/cult.png\";\r\nimport duchyMeeple from \"./images/meeples/duchy.png\";\r\nimport dynastyMeeple from \"./images/meeples/dynasty.png\";\r\nimport exileMeeple from \"./images/meeples/exile.png\";\r\nimport expeditionMeeple from \"./images/meeples/expedition.png\";\r\nimport eyrieMeeple from \"./images/meeples/eyrie.png\";\r\nimport flamebearersMeeple from \"./images/meeples/flamebearers.png\";\r\nimport flotillaMeeple from \"./images/meeples/flotilla.png\";\r\nimport harrierMeeple from \"./images/meeples/harrier.png\";\r\nimport keepersMeeple from \"./images/meeples/keepers.png\";\r\nimport marquiseMeeple from \"./images/meeples/marquise.png\";\r\nimport patrolMeeple from \"./images/meeples/patrol.png\";\r\nimport prophetsMeeple from \"./images/meeples/prophets.png\";\r\nimport protectorMeeple from \"./images/meeples/protector.png\";\r\nimport rangerMeeple from \"./images/meeples/ranger.png\";\r\nimport roninMeeple from \"./images/meeples/ronin.png\";\r\nimport riverfolkMeeple from \"./images/meeples/riverfolk.png\";\r\nimport scoundrelMeeple from \"./images/meeples/scoundrel.png\";\r\nimport spiesMeeple from \"./images/meeples/spies.png\";\r\nimport thiefMeeple from \"./images/meeples/thief.png\";\r\nimport tinkerMeeple from \"./images/meeples/tinker.png\";\r\nimport uprisingMeeple from \"./images/meeples/uprising.png\";\r\nimport vagrantMeeple from \"./images/meeples/vagrant.png\";\r\nimport vaultkeepersMeeple from \"./images/meeples/vaultkeepers.png\";\r\nimport warlordMeeple from \"./images/meeples/warlord.png\";\r\n\r\n// Token Images\r\nimport marquiseTokens from \"./images/tokens/marquise.png\";\r\nimport mobToken from \"./images/tokens/mob.png\";\r\nimport plotToken from \"./images/tokens/plot.png\";\r\nimport relicTokens from \"./images/tokens/relics.png\";\r\nimport sympathyToken from \"./images/tokens/sympathy.png\";\r\nimport tradePostTokens from \"./images/tokens/tradePosts.png\";\r\nimport tunnelToken from \"./images/tokens/tunnel.png\";\r\n\r\nconst content: Record<string, Expansion> = {\r\n  root: {\r\n    base: true,\r\n    image: rootBox,\r\n    decks: {\r\n      standard: {\r\n        image: standardCard,\r\n      },\r\n    },\r\n    factions: {\r\n      marquise: {\r\n        key: \"marquise\",\r\n        image: marquiseMeeple,\r\n        militant: true,\r\n        isVagabond: false,\r\n        warriors: 25,\r\n        buildings: 18,\r\n        buildingImage: marquiseBuildings,\r\n        tokens: 9,\r\n        tokenImage: marquiseTokens,\r\n        complexity: 0,\r\n        wealth: 1,\r\n        aggression: 1,\r\n        crafting: 1,\r\n      },\r\n      eyrie: {\r\n        key: \"eyrie\",\r\n        image: eyrieMeeple,\r\n        militant: true,\r\n        isVagabond: false,\r\n        warriors: 20,\r\n        buildings: 7,\r\n        buildingImage: roostBuilding,\r\n        tokens: 0,\r\n        complexity: 0,\r\n        wealth: 0,\r\n        aggression: 2,\r\n        crafting: 1,\r\n      },\r\n      alliance: {\r\n        key: \"alliance\",\r\n        image: allianceMeeple,\r\n        militant: false,\r\n        isVagabond: false,\r\n        warriors: 10,\r\n        buildings: 3,\r\n        buildingImage: baseBuildings,\r\n        tokens: 10,\r\n        tokenImage: sympathyToken,\r\n        complexity: 2,\r\n        wealth: 1,\r\n        aggression: 1,\r\n        crafting: 2,\r\n      },\r\n      vagabond: {\r\n        key: \"vagabond\",\r\n        image: thiefMeeple,\r\n        militant: false,\r\n        isVagabond: true,\r\n        warriors: 1,\r\n        buildings: 0,\r\n        tokens: 0,\r\n        complexity: 1,\r\n        wealth: 1,\r\n        aggression: 1,\r\n        crafting: 0,\r\n      },\r\n    },\r\n    maps: {\r\n      autumn: {\r\n        image: autumnMap,\r\n      },\r\n      winter: {\r\n        image: winterMap,\r\n      },\r\n    },\r\n    vagabonds: {\r\n      thief: {\r\n        startingItems: [\"boot\", \"torch\", \"tea\", \"sword\"],\r\n        image: thiefMeeple,\r\n      },\r\n      tinker: {\r\n        startingItems: [\"boot\", \"torch\", \"bag\", \"hammer\"],\r\n        image: tinkerMeeple,\r\n      },\r\n      ranger: {\r\n        startingItems: [\"boot\", \"torch\", \"crossbow\", \"sword\"],\r\n        image: rangerMeeple,\r\n      },\r\n    },\r\n  },\r\n  riverfolk: {\r\n    base: false,\r\n    image: riverfolkBox,\r\n    factions: {\r\n      cult: {\r\n        key: \"cult\",\r\n        image: cultMeeple,\r\n        militant: false,\r\n        isVagabond: false,\r\n        warriors: 25,\r\n        buildings: 15,\r\n        buildingImage: gardenBuildings,\r\n        tokens: 0,\r\n        complexity: 2,\r\n        wealth: 2,\r\n        aggression: 1,\r\n        crafting: 2,\r\n      },\r\n      riverfolk: {\r\n        key: \"riverfolk\",\r\n        image: riverfolkMeeple,\r\n        militant: false,\r\n        isVagabond: false,\r\n        warriors: 15,\r\n        buildings: 0,\r\n        tokens: 9,\r\n        tokenImage: tradePostTokens,\r\n        complexity: 2,\r\n        wealth: 2,\r\n        aggression: 0,\r\n        crafting: 1,\r\n      },\r\n      vagabond2: {\r\n        key: \"vagabond\",\r\n        image: roninMeeple,\r\n        militant: false,\r\n        isVagabond: true,\r\n        warriors: 1,\r\n        buildings: 0,\r\n        tokens: 0,\r\n        complexity: 1,\r\n        wealth: 1,\r\n        aggression: 1,\r\n        crafting: 0,\r\n      },\r\n    },\r\n    vagabonds: {\r\n      vagrant: {\r\n        startingItems: [\"coin\", \"torch\", \"boot\"],\r\n        image: vagrantMeeple,\r\n      },\r\n      arbiter: {\r\n        startingItems: [\"boot\", \"torch\", \"sword\", \"sword\"],\r\n        image: arbiterMeeple,\r\n      },\r\n      scoundrel: {\r\n        startingItems: [\"boot\", \"boot\", \"torch\", \"crossbow\"],\r\n        image: scoundrelMeeple,\r\n      },\r\n    },\r\n  },\r\n  underworld: {\r\n    base: false,\r\n    image: underworldBox,\r\n    factions: {\r\n      duchy: {\r\n        key: \"duchy\",\r\n        image: duchyMeeple,\r\n        militant: true,\r\n        isVagabond: false,\r\n        warriors: 20,\r\n        buildings: 6,\r\n        buildingImage: duchyBuildings,\r\n        tokens: 3,\r\n        tokenImage: tunnelToken,\r\n        complexity: 1,\r\n        wealth: 2,\r\n        aggression: 1,\r\n        crafting: 1,\r\n      },\r\n      corvid: {\r\n        key: \"corvid\",\r\n        image: corvidMeeple,\r\n        militant: false,\r\n        isVagabond: false,\r\n        warriors: 15,\r\n        buildings: 0,\r\n        tokens: 8,\r\n        tokenImage: plotToken,\r\n        complexity: 0,\r\n        wealth: 1,\r\n        aggression: 1,\r\n        crafting: 2,\r\n      },\r\n    },\r\n    landmarks: {\r\n      tower: {\r\n        image: towerLandmark,\r\n        minPlayers: 0,\r\n      },\r\n      ferry: {\r\n        image: ferryLandmark,\r\n        minPlayers: 0,\r\n      },\r\n    },\r\n    maps: {\r\n      lake: {\r\n        landmark: \"ferry\",\r\n        image: lakeMap,\r\n      },\r\n      mountain: {\r\n        landmark: \"tower\",\r\n        image: mountainMap,\r\n      },\r\n    },\r\n  },\r\n  marauder: {\r\n    base: false,\r\n    image: marauderBox,\r\n    factions: {\r\n      warlord: {\r\n        key: \"warlord\",\r\n        image: warlordMeeple,\r\n        militant: true,\r\n        isVagabond: false,\r\n        warriors: 21,\r\n        buildings: 6,\r\n        buildingImage: strongholdBuilding,\r\n        tokens: 5,\r\n        tokenImage: mobToken,\r\n        complexity: 1,\r\n        wealth: 0,\r\n        aggression: 2,\r\n        crafting: 0,\r\n      },\r\n      keepers: {\r\n        key: \"keepers\",\r\n        image: keepersMeeple,\r\n        militant: true,\r\n        isVagabond: false,\r\n        warriors: 15,\r\n        buildings: 3,\r\n        buildingImage: waystationBuildings,\r\n        tokens: 12,\r\n        tokenImage: relicTokens,\r\n        complexity: 2,\r\n        wealth: 2,\r\n        aggression: 1,\r\n        crafting: 1,\r\n      },\r\n    },\r\n    hirelings: {\r\n      patrol: {\r\n        image: patrolMeeple,\r\n        factions: [\"marquise\"],\r\n      },\r\n      dynasty: {\r\n        image: dynastyMeeple,\r\n        factions: [\"eyrie\"],\r\n      },\r\n      uprising: {\r\n        image: uprisingMeeple,\r\n        factions: [\"alliance\"],\r\n      },\r\n      exile: {\r\n        image: exileMeeple,\r\n        factions: [\"vagabond\", \"vagabond2\"],\r\n      },\r\n    },\r\n  },\r\n  exilesDeck: {\r\n    base: false,\r\n    image: exilesDeckBox,\r\n    decks: {\r\n      exiles: {\r\n        image: exilesCard,\r\n      },\r\n    },\r\n  },\r\n  landmarkPack: {\r\n    base: false,\r\n    image: landmarkPackBox,\r\n    landmarks: {\r\n      treetop: {\r\n        image: treetopLandmark,\r\n        minPlayers: 3,\r\n      },\r\n      city: {\r\n        image: cityLandmark,\r\n        minPlayers: 0,\r\n      },\r\n      market: {\r\n        image: marketLandmark,\r\n        minPlayers: 0,\r\n      },\r\n      forge: {\r\n        image: forgeLandmark,\r\n        minPlayers: 0,\r\n      },\r\n    },\r\n  },\r\n  vagabondPack: {\r\n    base: false,\r\n    image: vagabondPackBox,\r\n    vagabonds: {\r\n      adventurer: {\r\n        startingItems: [\"boot\", \"torch\", \"hammer\"],\r\n        image: adventurerMeeple,\r\n      },\r\n      ronin: {\r\n        startingItems: [\"boot\", \"boot\", \"torch\", \"sword\"],\r\n        image: roninMeeple,\r\n      },\r\n      harrier: {\r\n        startingItems: [\"coin\", \"torch\", \"sword\", \"crossbow\"],\r\n        image: harrierMeeple,\r\n      },\r\n    },\r\n  },\r\n  riverfolkHirelings: {\r\n    base: false,\r\n    image: riverfolkHirelingsBox,\r\n    hirelings: {\r\n      prophets: {\r\n        image: prophetsMeeple,\r\n        factions: [\"cult\"],\r\n      },\r\n      flotilla: {\r\n        image: flotillaMeeple,\r\n        factions: [\"riverfolk\"],\r\n      },\r\n      bandits: {\r\n        image: banditsMeeple,\r\n        factions: [],\r\n      },\r\n    },\r\n  },\r\n  underworldHirelings: {\r\n    base: false,\r\n    image: underworldHirelingsBox,\r\n    hirelings: {\r\n      expedition: {\r\n        image: expeditionMeeple,\r\n        factions: [\"duchy\"],\r\n      },\r\n      spies: {\r\n        image: spiesMeeple,\r\n        factions: [\"corvid\"],\r\n      },\r\n      protector: {\r\n        image: protectorMeeple,\r\n        factions: [],\r\n      },\r\n    },\r\n  },\r\n  marauderHirelings: {\r\n    base: false,\r\n    image: marauderHirelingsBox,\r\n    hirelings: {\r\n      flamebearers: {\r\n        image: flamebearersMeeple,\r\n        factions: [\"warlord\"],\r\n      },\r\n      vaultkeepers: {\r\n        image: vaultkeepersMeeple,\r\n        factions: [\"keepers\"],\r\n      },\r\n      band: {\r\n        image: bandMeeple,\r\n        factions: [],\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport default Object.freeze(content);\r\n","import { RootState } from \"../store\";\r\nimport { createSelector } from \"@reduxjs/toolkit\";\r\nimport { generateComponentSelectors, typedEntries, typedKeys } from \"./utils\";\r\nimport content from \"../content\";\r\n\r\nexport const { select: selectDeck, selectArray: selectDeckArray } = generateComponentSelectors(\r\n  \"decks\",\r\n  (expansionCode, componentCode) => content[expansionCode].decks![componentCode]\r\n);\r\n\r\n/** Redux Selector for returning a specified Expansion from state */\r\nexport const selectExpansion = (state: RootState, code: string) =>\r\n  state.components.expansions[code];\r\n\r\n/** Redux Selector for returning the expansion list as an array, moving the object key to the object field \"code\" */\r\nexport const selectExpansionArray = createSelector(\r\n  (state: RootState) => state.components.expansions,\r\n  (expansions) => {\r\n    const array = [];\r\n    for (const [code, expansionInfo] of typedEntries(expansions)) {\r\n      array.push({ ...expansionInfo, code });\r\n    }\r\n    return array;\r\n  }\r\n);\r\n\r\nexport const { select: selectFaction, selectArray: selectFactionArray } =\r\n  generateComponentSelectors(\r\n    \"factions\",\r\n    (expansionCode, componentCode) => content[expansionCode].factions![componentCode]\r\n  );\r\n\r\n/** Redux Selector for returning an array of included faction codes */\r\nexport const selectFactionCodeArray = (state: RootState) => typedKeys(state.components.factions);\r\n\r\n/** Redux Selector for returning an array of enabled militant factions */\r\nexport const selectEnabledMilitantFactions = (state: RootState) =>\r\n  selectFactionArray(state).filter((value) => value.enabled && value.militant);\r\n\r\n/** Redux Selector for returning an array of enabled non-militant factions */\r\nexport const selectEnabledInsurgentFactions = (state: RootState) =>\r\n  selectFactionArray(state).filter((value) => value.enabled && !value.militant);\r\n\r\n/** Returns the faction pool, joining the original faction and vagabond objects into the entries */\r\nexport const selectFactionPool = (state: RootState) =>\r\n  state.flow.factionPool.map((entry) => ({\r\n    ...selectFaction(state, entry.code),\r\n    code: entry.code,\r\n    vagabond: entry.vagabond\r\n      ? { ...selectVagabond(state, entry.vagabond), code: entry.vagabond }\r\n      : undefined,\r\n  }));\r\n\r\n/** Returns the flow information (including current step) from redux state */\r\nexport const selectFlowState = (state: RootState) => state.flow;\r\n\r\nexport const { select: selectHireling, selectArray: selectHirelingArray } =\r\n  generateComponentSelectors(\r\n    \"hirelings\",\r\n    (expansionCode, componentCode) => content[expansionCode].hirelings![componentCode]\r\n  );\r\n\r\n/** Redux Selector for returning an array of all hirelings that replace an included faction */\r\nexport const selectFactionHirelingArray = (state: RootState) =>\r\n  selectHirelingArray(state).filter((hireling) =>\r\n    // Only include a hireling if at least one of it's faction codes matches an included faction\r\n    hireling.factions.some((factionCode) => selectFactionCodeArray(state).includes(factionCode))\r\n  );\r\n\r\n/** Redux Selector for returning an array of enabled hirelings that do not replace an included faction */\r\nexport const selectEnabledIndependentHirelings = (state: RootState) =>\r\n  selectHirelingArray(state).filter(\r\n    (hireling) =>\r\n      hireling.enabled &&\r\n      // Only include a hireling if none of it's faction codes matches an included faction\r\n      hireling.factions.every((factionCode) => !selectFactionCodeArray(state).includes(factionCode))\r\n  );\r\n\r\nexport const { select: selectLandmark, selectArray: selectLandmarkArray } =\r\n  generateComponentSelectors(\r\n    \"landmarks\",\r\n    (expansionCode, componentCode) => content[expansionCode].landmarks![componentCode]\r\n  );\r\n\r\nexport const { select: selectMap, selectArray: selectMapArray } = generateComponentSelectors(\r\n  \"maps\",\r\n  (expansionCode, componentCode) => content[expansionCode].maps![componentCode]\r\n);\r\n\r\n/** Returns the object for the map selected in setup */\r\nexport const selectSetupMap = (state: RootState) =>\r\n  state.setup.map != null ? { ...selectMap(state, state.setup.map), code: state.setup.map } : null;\r\n\r\n/** Returns the object for the deck selected in setup */\r\nexport const selectSetupDeck = (state: RootState) =>\r\n  state.setup.deck != null\r\n    ? { ...selectDeck(state, state.setup.deck), code: state.setup.deck }\r\n    : null;\r\n\r\n/** Returns the object for the first landmark selected in setup */\r\nexport const selectSetupLandmark1 = (state: RootState) =>\r\n  state.setup.landmark1 != null\r\n    ? {\r\n        ...selectLandmark(state, state.setup.landmark1),\r\n        code: state.setup.landmark1,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the second landmark selected in setup */\r\nexport const selectSetupLandmark2 = (state: RootState) =>\r\n  state.setup.landmark2 != null\r\n    ? {\r\n        ...selectLandmark(state, state.setup.landmark2),\r\n        code: state.setup.landmark2,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the first hireling selected in setup */\r\nexport const selectSetupHireling1 = (state: RootState) =>\r\n  state.setup.hireling1 != null\r\n    ? {\r\n        ...selectHireling(state, state.setup.hireling1.code),\r\n        ...state.setup.hireling1,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the second hireling selected in setup */\r\nexport const selectSetupHireling2 = (state: RootState) =>\r\n  state.setup.hireling2 != null\r\n    ? {\r\n        ...selectHireling(state, state.setup.hireling2.code),\r\n        ...state.setup.hireling2,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the third hireling selected in setup */\r\nexport const selectSetupHireling3 = (state: RootState) =>\r\n  state.setup.hireling3 != null\r\n    ? {\r\n        ...selectHireling(state, state.setup.hireling3.code),\r\n        ...state.setup.hireling3,\r\n      }\r\n    : null;\r\n\r\n/** Returns the setup parameters from redux state */\r\nexport const selectSetupParameters = (state: RootState) => state.setup;\r\n\r\nexport const { select: selectVagabond, selectArray: selectVagabondArray } =\r\n  generateComponentSelectors(\r\n    \"vagabonds\",\r\n    (expansionCode, componentCode) => content[expansionCode].vagabonds![componentCode]\r\n  );\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport {\r\n  SetupStep,\r\n  FlowState,\r\n  FlowSlice,\r\n  WithCode,\r\n  Faction,\r\n  FactionEntry,\r\n  SkipStepsPayload,\r\n  CodeObject,\r\n} from \"../types\";\r\nimport { takeRandom } from \"./utils\";\r\nimport { setErrorMessage } from \"./setupSlice\";\r\n\r\nconst initialState: FlowState = {\r\n  pastSteps: [],\r\n  currentStep: SetupStep.chooseExpansions,\r\n  factionPool: [],\r\n  lastFactionLocked: false,\r\n  vagabondSetUp: false,\r\n  currentPlayerIndex: 0,\r\n  currentFactionIndex: null,\r\n  // Create an array with as many elements as there are setup steps\r\n  skippedSteps: Array(SetupStep.setupEnd + 1).fill(false),\r\n  futureSteps: [],\r\n};\r\n// Default to skipping bot & hireling setup steps\r\ninitialState.skippedSteps[SetupStep.setUpBots] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling1] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling2] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling3] = true;\r\ninitialState.skippedSteps[SetupStep.postHirelingSetup] = true;\r\n\r\nconst getSlice = (state: FlowState): FlowSlice => ({\r\n  step: state.currentStep,\r\n  // This prevents changes we make to the faction pool in the draft state being reflected in already generated slices\r\n  factionPool: [...state.factionPool],\r\n  lastFactionLocked: state.lastFactionLocked,\r\n  vagabondSetUp: state.vagabondSetUp,\r\n  playerIndex: state.currentPlayerIndex,\r\n  factionIndex: state.currentFactionIndex,\r\n});\r\n\r\nconst applySlice = (state: FlowState, slice: FlowSlice) => {\r\n  state.currentStep = slice.step;\r\n  state.factionPool = slice.factionPool;\r\n  state.lastFactionLocked = slice.lastFactionLocked;\r\n  state.vagabondSetUp = slice.vagabondSetUp;\r\n  state.currentPlayerIndex = slice.playerIndex;\r\n  state.currentFactionIndex = slice.factionIndex;\r\n};\r\n\r\nexport const flowSlice = createSlice({\r\n  name: \"flow\",\r\n  initialState,\r\n  reducers: {\r\n    incrementStep: (state) => {\r\n      if (state.currentStep < SetupStep.setupEnd) {\r\n        // Add our current state to the undo queue and clear the redo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        state.futureSteps = [];\r\n\r\n        // Flag that we set up a vagabond\r\n        if (\r\n          state.currentStep === SetupStep.setUpFaction &&\r\n          !state.vagabondSetUp &&\r\n          state.factionPool[state.currentFactionIndex ?? 0].vagabond\r\n        )\r\n          state.vagabondSetUp = true;\r\n\r\n        // Handle special case for faction setup\r\n        if (state.currentStep === SetupStep.setUpFaction && state.currentPlayerIndex > 0) {\r\n          // If we still have players left over, move on to the next player\r\n          state.currentPlayerIndex--;\r\n          // Remove the faction we just set up from the pool\r\n          const [removedFaction] = state.factionPool.splice(state.currentFactionIndex ?? 0, 1);\r\n          state.currentFactionIndex = null;\r\n          // Clear the last faction lock if the removed faction was militant\r\n          if (state.lastFactionLocked && removedFaction.militant) state.lastFactionLocked = false;\r\n          // Return to the faction selection step\r\n          state.currentStep = SetupStep.selectFaction;\r\n        } else {\r\n          // Go to the next non-skipped step\r\n          let skipStep = false;\r\n          do {\r\n            state.currentStep++;\r\n            skipStep = state.skippedSteps[state.currentStep];\r\n          } while (skipStep && state.currentStep < SetupStep.setupEnd);\r\n        }\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid incrementStep action: Current step must be smaller than ${SetupStep.setupEnd}`\r\n        );\r\n      }\r\n    },\r\n    undoStep: (state) => {\r\n      // Get the previous step from the undo queue\r\n      const previousStep = state.pastSteps.pop();\r\n      if (previousStep != null) {\r\n        // Add our current state to the redo queue\r\n        state.futureSteps.unshift(getSlice(state));\r\n        // Override current state with state from previous step\r\n        applySlice(state, previousStep);\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid undoStep action: pastSteps array returned empty value (${previousStep})`\r\n        );\r\n      }\r\n    },\r\n    redoStep: (state) => {\r\n      // Get the next step from the redo queue\r\n      const nextStep = state.futureSteps.shift();\r\n      if (nextStep != null) {\r\n        // Add our current state to the undo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        // Override current state with state from next step\r\n        applySlice(state, nextStep);\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid redoStep action: futureSteps array returned empty value (${nextStep})`\r\n        );\r\n      }\r\n    },\r\n    skipSteps: {\r\n      prepare: (steps: SetupStep | SetupStep[], skip: boolean) => ({\r\n        payload: {\r\n          steps: typeof steps === \"number\" ? [steps] : steps,\r\n          skip,\r\n        },\r\n      }),\r\n      reducer: (state, { payload: { steps, skip } }: PayloadAction<SkipStepsPayload>) => {\r\n        steps.forEach((step) => {\r\n          state.skippedSteps[step] = skip;\r\n        });\r\n        state.futureSteps = [];\r\n      },\r\n    },\r\n    clearFactionPool: (state) => {\r\n      state.factionPool = [];\r\n      state.lastFactionLocked = false;\r\n      state.currentFactionIndex = null;\r\n    },\r\n    addToFactionPool: {\r\n      prepare: (faction: WithCode<Faction>, vagabondPool: CodeObject[]) => ({\r\n        payload: {\r\n          code: faction.code,\r\n          militant: faction.militant,\r\n          vagabond: faction.isVagabond ? takeRandom(vagabondPool).code : undefined,\r\n        },\r\n      }),\r\n      reducer: (state, { payload: factionEntry }: PayloadAction<FactionEntry>) => {\r\n        // Add to our pool, and set it to locked if insurgent\r\n        state.factionPool.push(factionEntry);\r\n        state.lastFactionLocked = !factionEntry.militant;\r\n      },\r\n    },\r\n    setCurrentPlayerIndex: (state, { payload: currentPlayerIndex }: PayloadAction<number>) => {\r\n      if (currentPlayerIndex >= 0) {\r\n        state.currentPlayerIndex = currentPlayerIndex;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setCurrentPlayerIndex action: ${currentPlayerIndex} (Payload must be a number larger than or equal to 0)`\r\n        );\r\n      }\r\n    },\r\n    setCurrentFactionIndex: (state, { payload: currentFactionIndex }: PayloadAction<number>) => {\r\n      if (currentFactionIndex >= 0 && currentFactionIndex < state.factionPool.length) {\r\n        state.currentFactionIndex = currentFactionIndex;\r\n        state.futureSteps = [];\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setCurrentFactionIndex action: ${currentFactionIndex} (Payload must be a number larger than or equal to 0 but smaller than the faction pool length [${state.factionPool.length}])`\r\n        );\r\n      }\r\n    },\r\n    resetFlow: (state) => {\r\n      state.pastSteps = [];\r\n      state.currentStep = SetupStep.chooseExpansions;\r\n      state.futureSteps = [];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // This allows us to always reset the redo queue if the setup state changes\r\n    builder\r\n      // Don't wipe redo queue when the only thing that happened was displaying an error\r\n      .addCase(setErrorMessage, () => {})\r\n      .addDefaultCase((state) => {\r\n        state.futureSteps = [];\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  incrementStep,\r\n  undoStep,\r\n  redoStep,\r\n  skipSteps,\r\n  clearFactionPool,\r\n  addToFactionPool,\r\n  setCurrentPlayerIndex,\r\n  setCurrentFactionIndex,\r\n  resetFlow,\r\n} = flowSlice.actions;\r\nexport default flowSlice.reducer;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport content from \"../content\";\r\nimport { expansionEnabled, persistExpansionEnabled, typedEntries, typedKeys } from \"./utils\";\r\nimport { ComponentsState, Expansion, ToggleComponentPayload } from \"../types\";\r\n\r\nconst addExpansionComponents = (\r\n  state: ComponentsState,\r\n  expansionCode: string,\r\n  { base, image, ...components }: Expansion\r\n) => {\r\n  for (const [componentType, componentList] of typedEntries(components)) {\r\n    for (const componentCode of typedKeys(componentList!)) {\r\n      state[componentType][componentCode] = {\r\n        enabled: true,\r\n        expansionCode,\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nconst setupInitialState = () => {\r\n  let initialState: ComponentsState = {\r\n    expansions: {},\r\n    decks: {},\r\n    factions: {},\r\n    hirelings: {},\r\n    landmarks: {},\r\n    maps: {},\r\n    vagabonds: {},\r\n  };\r\n\r\n  for (const [expansionCode, expansion] of typedEntries(content)) {\r\n    const enabled = expansionEnabled(expansionCode, expansion.base);\r\n\r\n    initialState.expansions[expansionCode] = {\r\n      base: expansion.base,\r\n      enabled,\r\n      image: expansion.image,\r\n    };\r\n    // Add expansion components to state if the expansion is enabled\r\n    if (enabled) addExpansionComponents(initialState, expansionCode, expansion);\r\n  }\r\n  return initialState;\r\n};\r\n\r\nconst toggleComponent = (componentType: keyof ComponentsState) => ({\r\n  prepare: (componentCode: string, shouldEnable?: boolean) => ({\r\n    payload: { componentCode, shouldEnable },\r\n  }),\r\n  reducer: (\r\n    state: ComponentsState,\r\n    { payload: { componentCode, shouldEnable } }: PayloadAction<ToggleComponentPayload>\r\n  ) => {\r\n    state[componentType][componentCode].enabled =\r\n      shouldEnable ?? !state[componentType][componentCode].enabled;\r\n  },\r\n});\r\n\r\nexport const componentsSlice = createSlice({\r\n  name: \"components\",\r\n  initialState: setupInitialState,\r\n  reducers: {\r\n    toggleExpansion: (state, { payload: expansionCode }: PayloadAction<string>) => {\r\n      const expansion = state.expansions[expansionCode];\r\n      // Do not allow changing the enabled state of base game\r\n      if (expansion && !expansion.base) {\r\n        // Toggle enable state and persist change\r\n        expansion.enabled = !expansion.enabled;\r\n        persistExpansionEnabled(expansionCode, expansion.enabled);\r\n\r\n        if (expansion.enabled) {\r\n          // The expansion was just enabled, add it's components to our component list\r\n          addExpansionComponents(state, expansionCode, content[expansionCode]);\r\n        } else {\r\n          // The expansion was just disabled, delete any components that came from it\r\n          const { expansions, ...components } = state;\r\n          for (const [componentType, componentList] of typedEntries(components)) {\r\n            for (const [componentCode, component] of typedEntries(componentList)) {\r\n              if (component.expansionCode === expansionCode) {\r\n                delete state[componentType][componentCode];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        if (expansion) {\r\n          console.warn(\r\n            `Invalid payload for toggleExpansion action: ${expansionCode} (Cannot disable expansion flagged as base)`\r\n          );\r\n        } else {\r\n          console.warn(\r\n            `Invalid payload for toggleExpansion action: ${expansionCode} (No expansion exists with provided code)`\r\n          );\r\n        }\r\n      }\r\n    },\r\n    toggleDeck: toggleComponent(\"decks\"),\r\n    toggleFaction: toggleComponent(\"factions\"),\r\n    toggleHireling: toggleComponent(\"hirelings\"),\r\n    toggleLandmark: toggleComponent(\"landmarks\"),\r\n    toggleMap: toggleComponent(\"maps\"),\r\n    toggleVagabond: toggleComponent(\"vagabonds\"),\r\n  },\r\n});\r\n\r\nexport const {\r\n  toggleExpansion,\r\n  toggleDeck,\r\n  toggleFaction,\r\n  toggleHireling,\r\n  toggleLandmark,\r\n  toggleMap,\r\n  toggleVagabond,\r\n} = componentsSlice.actions;\r\nexport default componentsSlice.reducer;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { selectSetupParameters } from \"./features/selectors\";\r\nimport type { RootState, AppDispatch } from \"./store\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\n/** Returns a function for returning the player number for a specifed point in turn order */\r\nexport const useNthLastPlayer = () => {\r\n  const { playerOrder } = useAppSelector(selectSetupParameters);\r\n  return (position: number) => {\r\n    if (playerOrder.length > 0) {\r\n      let index = -position;\r\n      do {\r\n        index += playerOrder.length;\r\n      } while (index < 0);\r\n      return playerOrder[index];\r\n    }\r\n    return 0;\r\n  };\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"icon_item__VZgyH\",\"inactive\":\"icon_inactive__xAS14\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StepContext } from \"./step\";\r\nimport styles from \"./css/icon.module.css\";\r\n\r\nimport foxIcon from \"../images/suits/fox.png\";\r\nimport mouseIcon from \"../images/suits/mouse.png\";\r\nimport rabbitIcon from \"../images/suits/rabbit.png\";\r\n\r\nimport bagImage from \"../images/items/bag.png\";\r\nimport bootImage from \"../images/items/boot.png\";\r\nimport coinImage from \"../images/items/coin.png\";\r\nimport crossbowImage from \"../images/items/crossbow.png\";\r\nimport hammerImage from \"../images/items/hammer.png\";\r\nimport swordImage from \"../images/items/sword.png\";\r\nimport teaImage from \"../images/items/tea.png\";\r\nimport torchImage from \"../images/items/torch.png\";\r\nimport { ClearingSuit, Item } from \"../types\";\r\n\r\nconst iconDict: Record<Item | ClearingSuit, { key: string; image: string }> = {\r\n  fox: {\r\n    key: \"label.fox\",\r\n    image: foxIcon,\r\n  },\r\n  mouse: {\r\n    key: \"label.mouse\",\r\n    image: mouseIcon,\r\n  },\r\n  rabbit: {\r\n    key: \"label.rabbit\",\r\n    image: rabbitIcon,\r\n  },\r\n  bag: {\r\n    key: \"component.bag\",\r\n    image: bagImage,\r\n  },\r\n  boot: {\r\n    key: \"component.boot\",\r\n    image: bootImage,\r\n  },\r\n  coin: {\r\n    key: \"component.coin\",\r\n    image: coinImage,\r\n  },\r\n  crossbow: {\r\n    key: \"component.crossbow\",\r\n    image: crossbowImage,\r\n  },\r\n  hammer: {\r\n    key: \"component.hammer\",\r\n    image: hammerImage,\r\n  },\r\n  sword: {\r\n    key: \"component.sword\",\r\n    image: swordImage,\r\n  },\r\n  tea: {\r\n    key: \"component.tea\",\r\n    image: teaImage,\r\n  },\r\n  torch: {\r\n    key: \"component.torch\",\r\n    image: torchImage,\r\n  },\r\n};\r\n\r\ninterface ItemProps {\r\n  icon: Item | ClearingSuit;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const Icon: React.FC<ItemProps> = ({ icon, children }) => {\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const iconAlt = t(iconDict[icon]?.key);\r\n  return (\r\n    <>\r\n      <img\r\n        className={classNames(styles.item, { [styles.inactive]: !stepActive })}\r\n        src={iconDict[icon]?.image}\r\n        alt={iconAlt}\r\n        title={iconAlt}\r\n      />\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Icon;\r\n","import { Icon } from \"./components/icon\";\r\n\r\nexport const iconComponents = {\r\n  Bag: <Icon icon=\"bag\" />,\r\n  Boot: <Icon icon=\"boot\" />,\r\n  Coin: <Icon icon=\"coin\" />,\r\n  Crossbow: <Icon icon=\"crossbow\" />,\r\n  Fox: <Icon icon=\"fox\" />,\r\n  Hammer: <Icon icon=\"hammer\" />,\r\n  Mouse: <Icon icon=\"mouse\" />,\r\n  Rabbit: <Icon icon=\"rabbit\" />,\r\n  Sword: <Icon icon=\"sword\" />,\r\n  Tea: <Icon icon=\"tea\" />,\r\n  Torch: <Icon icon=\"torch\" />,\r\n};\r\n\r\nexport default iconComponents;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"step_container__Ibt3o\",\"inactive\":\"step_inactive__bCmdS\",\"title\":\"step_title__kRbGj\",\"subtitle\":\"step_subtitle__698bt\"};","import classNames from \"classnames\";\r\nimport { TOptions } from \"i18next\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { selectFlowState } from \"../features/selectors\";\r\nimport { SetupStep } from \"../types\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport iconComponents from \"../iconComponents\";\r\nimport styles from \"./css/step.module.css\";\r\nimport { createContext } from \"react\";\r\n\r\ninterface StepContextValue {\r\n  stepActive: boolean;\r\n}\r\n\r\nconst defaultValue: StepContextValue = {\r\n  stepActive: false,\r\n};\r\n\r\ninterface StepProps {\r\n  step: SetupStep;\r\n  renderTitle?: boolean;\r\n  renderSubtitle?: boolean;\r\n  subtitleKey?: string;\r\n  textKey?: string;\r\n  textBelowChildren?: boolean;\r\n  translationOptions?: TOptions;\r\n  components?: readonly React.ReactElement[] | { readonly [tagName: string]: React.ReactElement };\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const StepContext = createContext(defaultValue);\r\nexport const StepProvider = StepContext.Provider;\r\n\r\nexport const Step: React.FC<StepProps> = ({\r\n  step,\r\n  renderTitle,\r\n  renderSubtitle,\r\n  subtitleKey,\r\n  textKey,\r\n  textBelowChildren,\r\n  translationOptions,\r\n  components,\r\n  children,\r\n}) => {\r\n  const { currentStep, skippedSteps } = useAppSelector(selectFlowState);\r\n  const { t, i18n } = useTranslation();\r\n  const sectionElement = useRef<HTMLElement>(null);\r\n\r\n  // Figure out if we are the active step so we can tell children and trigger effects\r\n  const stepActive = currentStep === step;\r\n  // Skip rendering if the setup process isn't up to our step or we were skipped\r\n  const stepRendered = currentStep >= step && !skippedSteps[step];\r\n\r\n  // Trigger a scroll-to effect when we become active\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      sectionElement.current?.scrollIntoView({\r\n        behavior: window.matchMedia(\"(prefers-reduced-motion)\").matches ? \"auto\" : \"smooth\",\r\n      });\r\n  });\r\n\r\n  // Generate the (sub)title text in advance so we can use it to rename the window (if required)\r\n  let titleText: string | null = null;\r\n  let subtitleText: string | null = null;\r\n\r\n  // Only compute the titles if we will actually render\r\n  // We do this instead of returning null here as the useEffect hook must always be called\r\n  if (stepRendered) {\r\n    // Only generate if the prerequisites for rendering the title are met\r\n    const defaultTitleKey = \"setupStep.\" + SetupStep[step] + \".title\";\r\n    if (renderTitle ?? i18n.exists(defaultTitleKey))\r\n      titleText = t(defaultTitleKey, translationOptions);\r\n\r\n    // Only generate if the prerequisites for rendering the subtitle are met\r\n    const defaultSubtitleKey = \"setupStep.\" + SetupStep[step] + \".subtitle\";\r\n    if (renderSubtitle ?? subtitleKey ?? i18n.exists(defaultSubtitleKey))\r\n      subtitleText = t(subtitleKey ?? defaultSubtitleKey, translationOptions);\r\n  }\r\n\r\n  // Rename the window to match our step (if we are the active step)\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      // Preappend the step title or subtitle if our step has one\r\n      document.title =\r\n        (titleText || subtitleText ? (titleText || subtitleText) + \" - \" : \"\") +\r\n        t(\"label.pageTitle\");\r\n  }, [stepActive, titleText, subtitleText, t]);\r\n\r\n  return stepRendered ? (\r\n    <StepProvider value={{ stepActive }}>\r\n      <section\r\n        className={classNames(styles.container, {\r\n          [styles.inactive]: !stepActive,\r\n        })}\r\n        ref={sectionElement}\r\n      >\r\n        {titleText && <h1 className={styles.title}>{titleText}</h1>}\r\n        {subtitleText && <h2 className={styles.subtitle}>{subtitleText}.</h2>}\r\n        {textBelowChildren ? children : null}\r\n        <Trans\r\n          i18nKey={textKey ?? \"setupStep.\" + SetupStep[step] + \".body\"}\r\n          count={translationOptions?.count} // For Trans component count cannot be passed in with options\r\n          tOptions={translationOptions}\r\n          components={{ ...iconComponents, ...components }}\r\n        />\r\n        {!textBelowChildren ? children : null}\r\n      </section>\r\n    </StepProvider>\r\n  ) : null;\r\n};\r\n\r\nStep.defaultProps = {\r\n  textBelowChildren: false,\r\n};\r\n\r\nexport default Step;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMilitant(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 57 57\",\n    style: {\n      enableBackground: \"new 0 0 57 57\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M57,0h-8.837L18.171,29.992l-4.076-4.076l-1.345-4.034c-0.22-0.663-0.857-1.065-1.55-0.98 c-0.693,0.085-1.214,0.63-1.268,1.327l-0.572,7.438l5.982,5.982L4.992,46H2.274C1.02,46,0,47.02,0,48.274v6.452 C0,55.98,1.02,57,2.274,57h6.452C9.98,57,11,55.98,11,54.726v-3.421l10-10l6.021,6.021l6.866-1.145 c0.685-0.113,1.182-0.677,1.21-1.37c0.028-0.693-0.422-1.295-1.096-1.464l-3.297-0.824l-4.043-4.043L57,8.489V0z M9,54.726 C9,54.877,8.877,55,8.726,55H2.274C2.123,55,2,54.877,2,54.726v-6.452C2,48.123,2.123,48,2.274,48h0.718h5.734 C8.877,48,9,48.123,9,48.274v5.031V54.726z M11,48.477v-0.203C11,47.02,9.98,46,8.726,46H7.82l8.938-8.938l1.417,1.417l1.411,1.411 L11,48.477z M30.942,44.645l-3.235,0.54l-5.293-5.293l0,0l-2.833-2.833l-8.155-8.155l0.292-3.796l0.63,1.89l4.41,4.41l0,0 l4.225,4.225l8.699,8.699L30.942,44.645z M25.247,37.066l-2.822-2.822l-2.839-2.839L48.991,2h4.243L23.829,31.406 c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293L55,3.062v4.592L25.247,37.066z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMilitant);\nexport default __webpack_public_path__ + \"static/media/militant.4708c67a499bc925b7614c6ae04fce14.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"checkbox_container__RTzFl\",\"input\":\"checkbox_input__MdKTm\",\"checkbox\":\"checkbox_checkbox__lAzac\",\"label\":\"checkbox_label__FffJ+\",\"inactive\":\"checkbox_inactive__Wnwb7\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../features/selectors\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"./step\";\r\nimport styles from \"./css/checkbox.module.css\";\r\n\r\ninterface CheckboxProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport const Checkbox: React.FC<CheckboxProps> = ({ id, defaultValue, onChange }) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return defaultValue || stepActive ? (\r\n    <div\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      <input\r\n        id={id}\r\n        type=\"checkbox\"\r\n        className={styles.input}\r\n        defaultChecked={defaultValue ?? false}\r\n        disabled={!stepActive}\r\n        onChange={(e) => onChange(e.target.checked)}\r\n        aria-invalid={stepActive && errorMessage ? true : undefined}\r\n        aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n      />\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={\"label.\" + id} />\r\n      </label>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default Checkbox;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"componentToggle_carousel__NHWoA\",\"inactive\":\"componentToggle_inactive__UEoK7\",\"component\":\"componentToggle_component__PWbGV\",\"enabled\":\"componentToggle_enabled__AYDr6\",\"locked\":\"componentToggle_locked__kxyUS\",\"image\":\"componentToggle_image__qTQf5\",\"largeLabels\":\"componentToggle_largeLabels__eSXai\",\"label\":\"componentToggle_label__kjAM+\"};","import classNames from \"classnames\";\r\nimport { useContext, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { CodeObject, GameComponent, Togglable } from \"../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"./step\";\r\nimport { AppThunk, RootState } from \"../store\";\r\nimport styles from \"./css/componentToggle.module.css\";\r\nimport { selectSetupParameters } from \"../features/selectors\";\r\nimport { setErrorMessage } from \"../features/setupSlice\";\r\nimport { PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface ComponentListProps<T> {\r\n  selector: (state: RootState) => T[];\r\n  toggleComponent: (code: string) => PayloadAction<any> | AppThunk;\r\n  getLabelKey: (component: T) => string;\r\n  getLockedKey?: (component: T) => string | null;\r\n  unsorted?: boolean;\r\n}\r\n\r\nexport const ComponentToggle = <T extends CodeObject & Togglable & GameComponent>({\r\n  selector,\r\n  toggleComponent,\r\n  getLabelKey,\r\n  getLockedKey,\r\n  unsorted,\r\n}: ComponentListProps<T>) => {\r\n  const components = useAppSelector(selector);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const [largeLabels, setLargeLabels] = useState(false);\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Sort our component list, then memoize the result for performance\r\n  const sortedComponents = useMemo(() => {\r\n    // Reset large labels flag in case we changed language\r\n    setLargeLabels(false);\r\n\r\n    // For sorting purposes, generate the final label text in advance\r\n    const returnValue = components.map((component) => {\r\n      // If any label in our list is longer than 30 characters then we give more room for the labels\r\n      // In the future I'd really like to replace this with a CSS only solution\r\n      const label = t(getLabelKey(component));\r\n      if (label.length > 30) setLargeLabels(true);\r\n\r\n      return {\r\n        ...component,\r\n        label,\r\n      };\r\n    });\r\n\r\n    // Sort it by default (unless asked explicitly not to)\r\n    if (!unsorted) returnValue.sort((a, b) => a.label.localeCompare(b.label, i18n.language));\r\n\r\n    return returnValue;\r\n  }, [components, t, getLabelKey, unsorted, i18n.language]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.carousel, {\r\n        [styles.largeLabels]: largeLabels,\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      {sortedComponents.map((component) => {\r\n        if (component.enabled || stepActive) {\r\n          const componentLockedKey = getLockedKey ? getLockedKey(component) : null;\r\n          const componentLocked = componentLockedKey != null;\r\n          return (\r\n            <button\r\n              key={component.code}\r\n              className={classNames(styles.component, {\r\n                [styles.enabled]: stepActive && component.enabled,\r\n                [styles.locked]: stepActive && componentLocked,\r\n              })}\r\n              onClick={() =>\r\n                componentLocked\r\n                  ? dispatch(setErrorMessage(componentLockedKey))\r\n                  : dispatch(toggleComponent(component.code))\r\n              }\r\n              disabled={!stepActive}\r\n              title={stepActive && componentLocked ? t(componentLockedKey) : undefined}\r\n              tabIndex={stepActive && componentLocked ? -1 : undefined}\r\n              role=\"switch\"\r\n              aria-checked={component.enabled}\r\n              aria-disabled={stepActive ? componentLocked : undefined}\r\n              aria-label={stepActive ? component.label : undefined}\r\n              aria-invalid={stepActive && errorMessage ? true : undefined}\r\n              aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n            >\r\n              <img\r\n                className={styles.image}\r\n                src={component.image}\r\n                alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n                aria-hidden=\"true\"\r\n              />\r\n              <div className={styles.label}>\r\n                <span>{component.label}</span>\r\n              </div>\r\n            </button>\r\n          );\r\n        }\r\n        return null;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComponentToggle;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"factionSelect_carousel__AKemB\",\"faction\":\"factionSelect_faction__Bg3LH\",\"selected\":\"factionSelect_selected__gByVm\",\"locked\":\"factionSelect_locked__pZem8\",\"image\":\"factionSelect_image__2Re8u\",\"icon\":\"factionSelect_icon__3NKCT\",\"title\":\"factionSelect_title__VN0dW\",\"militant\":\"factionSelect_militant__yJAna\",\"label\":\"factionSelect_label__a-YJ-\",\"factionInfo\":\"factionSelect_factionInfo__Q+NN-\",\"componentCounts\":\"factionSelect_componentCounts__NDwSB\",\"stats\":\"factionSelect_stats__aToKc\",\"summaryTitle\":\"factionSelect_summaryTitle__wrJDs\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"statBar_container__6tZTz\",\"inactive\":\"statBar_inactive__MHUq6\",\"label\":\"statBar_label__uvYSX\",\"barLow\":\"statBar_barLow__IG4vE\",\"barModerate\":\"statBar_barModerate__y0swq\",\"barHigh\":\"statBar_barHigh__ZtIlk\"};","import styles from \"./css/statBar.module.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { selectFactionPool, selectFlowState } from \"../features/selectors\";\r\nimport classNames from \"classnames\";\r\nimport { StepContext } from \"./step\";\r\nimport { useContext } from \"react\";\r\n\r\ninterface StatBarProps {\r\n  stat: \"complexity\" | \"wealth\" | \"aggression\" | \"crafting\";\r\n}\r\n\r\nexport const StatBar: React.FC<StatBarProps> = ({ stat }) => {\r\n  const { currentFactionIndex } = useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const statValue = currentFactionIndex != null ? factionPool[currentFactionIndex][stat] : 0;\r\n  return (\r\n    <div\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      <span className={styles.label}>{t(\"label.\" + stat)}</span>\r\n      <span\r\n        className={classNames({\r\n          [styles.barLow]: statValue < 1,\r\n          [styles.barModerate]: statValue === 1,\r\n          [styles.barHigh]: statValue > 1,\r\n        })}\r\n      >\r\n        {t(\"label.factionRating.\" + statValue)}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatBar;\r\n","import { ClearingSuit, Item } from \"../types\";\r\nimport Icon from \"./icon\";\r\n\r\ninterface ItemListProps {\r\n  list: (Item | ClearingSuit)[];\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const IconList: React.FC<ItemListProps> = ({ list, children }) => (\r\n  <>\r\n    {list.map((item, index) => (\r\n      <Icon key={index} icon={item}>\r\n        {index < list.length - 1 ? children : null}\r\n      </Icon>\r\n    ))}\r\n  </>\r\n);\r\n\r\nIconList.defaultProps = {\r\n  children: \", \",\r\n};\r\n\r\nexport default IconList;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"componentCount_container__wwOZX\",\"image\":\"componentCount_image__N1uOt\",\"inactive\":\"componentCount_inactive__laFug\"};","import styles from \"./css/componentCount.module.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { selectFactionPool, selectFlowState } from \"../features/selectors\";\r\nimport classNames from \"classnames\";\r\nimport { StepContext } from \"./step\";\r\nimport { useContext } from \"react\";\r\n\r\nconst imageSource: {\r\n  [component: string]: \"image\" | \"buildingImage\" | \"tokenImage\";\r\n} = {\r\n  warriors: \"image\",\r\n  buildings: \"buildingImage\",\r\n  tokens: \"tokenImage\",\r\n};\r\n\r\ninterface ComponentCountProps {\r\n  component: \"warriors\" | \"buildings\" | \"tokens\";\r\n}\r\n\r\nexport const ComponentCount: React.FC<ComponentCountProps> = ({ component }) => {\r\n  const { currentFactionIndex } = useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const componentCount =\r\n    currentFactionIndex != null ? factionPool[currentFactionIndex][component] : 0;\r\n\r\n  if (componentCount > 0) {\r\n    // We know currentFactionIndex is not null because if it was componentCount defaults to 0\r\n    const componentImage = factionPool[currentFactionIndex!][imageSource[component]];\r\n    return (\r\n      <div\r\n        className={classNames(styles.container, {\r\n          [styles.inactive]: !stepActive,\r\n        })}\r\n      >\r\n        <img\r\n          className={styles.image}\r\n          src={componentImage}\r\n          alt=\"\" // Image is just decoration, so hide from screen readers\r\n          aria-hidden=\"true\"\r\n        />{\" \"}\r\n        &#215;\r\n        {t(\"component.\" + component, {\r\n          count: componentCount,\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default ComponentCount;\r\n","import classNames from \"classnames\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { selectFactionPool, selectFlowState, selectSetupParameters } from \"../features/selectors\";\r\nimport { setCurrentFactionIndex } from \"../features/flowSlice\";\r\nimport { setErrorMessage } from \"../features/setupSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./css/factionSelect.module.css\";\r\nimport { useContext } from \"react\";\r\nimport { StepContext } from \"./step\";\r\nimport { ReactComponent as MilitantIcon } from \"../images/icons/militant.svg\";\r\nimport { StatBar } from \"./statBar\";\r\nimport iconComponents from \"../iconComponents\";\r\nimport IconList from \"./iconList\";\r\nimport { ComponentCount } from \"./componentCount\";\r\n\r\nexport const FactionSelect: React.FC = () => {\r\n  const { currentFactionIndex, lastFactionLocked } = useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const onKeyDownHandler: React.KeyboardEventHandler<HTMLButtonElement> = (event) => {\r\n    const focusedIndex = currentFactionIndex ?? 0;\r\n    const maxIndex = factionPool.length - (lastFactionLocked ? 2 : 1);\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1;\r\n      if (newIndex > maxIndex) newIndex = 0;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1;\r\n      if (newIndex < 0) newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      dispatch(setCurrentFactionIndex(newIndex));\r\n      // @ts-expect-error focus function is incorrectly excluded from children typing\r\n      event.currentTarget.parentNode?.children[newIndex].focus();\r\n    }\r\n  };\r\n\r\n  const lastIndex = factionPool.length - 1;\r\n  const selectedFaction = currentFactionIndex != null ? factionPool[currentFactionIndex] : null;\r\n  return (\r\n    <>\r\n      <div\r\n        className={styles.carousel}\r\n        role=\"radiogroup\"\r\n        aria-label={t(\"setupStep.selectFaction.subtitle\")}\r\n        aria-required=\"true\"\r\n        aria-invalid={stepActive && errorMessage ? true : undefined}\r\n        aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n        aria-disabled={!stepActive}\r\n      >\r\n        {factionPool.map((faction, index) => {\r\n          // Prepare the faction name in advance as we need to incorporate the vagabond character name (if there is one)\r\n          const factionName = faction.vagabond\r\n            ? t(\"vagabond.\" + faction.vagabond.code + \".name\") +\r\n              \" (\" +\r\n              t(\"faction.\" + faction.key + \".name\") +\r\n              \")\"\r\n            : t(\"faction.\" + faction.key + \".name\");\r\n          // Swap out the faction image for the vagabond image (if we have one)\r\n          const factionImage = faction.vagabond ? faction.vagabond.image : faction.image;\r\n          return (\r\n            <button\r\n              key={faction.code}\r\n              className={classNames(styles.faction, {\r\n                [styles.militant]: faction.militant,\r\n                [styles.selected]: index === currentFactionIndex,\r\n                [styles.locked]: lastFactionLocked && index === lastIndex,\r\n              })}\r\n              onClick={() => {\r\n                if (index !== currentFactionIndex) {\r\n                  if (!lastFactionLocked || index < lastIndex) {\r\n                    dispatch(setCurrentFactionIndex(index));\r\n                  } else {\r\n                    dispatch(setErrorMessage(\"error.lockedFaction\"));\r\n                  }\r\n                }\r\n              }}\r\n              disabled={!stepActive}\r\n              title={\r\n                stepActive && lastFactionLocked && index === lastIndex\r\n                  ? t(\"error.lockedFaction\")\r\n                  : undefined\r\n              }\r\n              role=\"radio\"\r\n              aria-checked={index === currentFactionIndex}\r\n              aria-disabled={stepActive ? lastFactionLocked && index === lastIndex : undefined}\r\n              aria-label={\r\n                stepActive\r\n                  ? factionName + faction.militant\r\n                    ? \" (\" + t(\"label.militant\") + \")\"\r\n                    : \"\"\r\n                  : undefined\r\n              }\r\n              // We have to override the tabbing logic to meet the standard of role \"radio\"\r\n              tabIndex={stepActive ? (index === (currentFactionIndex ?? 0) ? 0 : -1) : undefined}\r\n              onKeyDown={onKeyDownHandler}\r\n            >\r\n              <img\r\n                className={styles.image}\r\n                src={factionImage}\r\n                alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n                aria-hidden=\"true\"\r\n              />\r\n              <div className={styles.title}>\r\n                <span className={styles.label}>\r\n                  {faction.militant ? (\r\n                    <>\r\n                      <MilitantIcon className={styles.icon} title={t(\"label.militant\")} />{\" \"}\r\n                    </>\r\n                  ) : null}\r\n                  {factionName}\r\n                </span>\r\n              </div>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      {stepActive && selectedFaction ? (\r\n        <div className={styles.factionInfo}>\r\n          <div className={styles.stats}>\r\n            <StatBar stat=\"complexity\" />\r\n            <StatBar stat=\"wealth\" />\r\n            <StatBar stat=\"aggression\" />\r\n            <StatBar stat=\"crafting\" />\r\n          </div>\r\n          <div>\r\n            <div className={styles.componentCounts}>\r\n              <ComponentCount component=\"warriors\" />\r\n              <ComponentCount component=\"buildings\" />\r\n              <ComponentCount component=\"tokens\" />\r\n            </div>\r\n            {selectedFaction.vagabond && (\r\n              <>\r\n                <p>\r\n                  <strong>{t(\"label.startingItems\")}.</strong>{\" \"}\r\n                  <IconList list={selectedFaction.vagabond.startingItems} />.\r\n                </p>\r\n                <p>\r\n                  <strong>\r\n                    {t(\"label.specialAction\")}:{\" \"}\r\n                    {t(\"vagabond.\" + selectedFaction.vagabond.code + \".action\")}.\r\n                  </strong>{\" \"}\r\n                  <Trans\r\n                    i18nKey={\"vagabond.\" + selectedFaction.vagabond.code + \".effect\"}\r\n                    components={iconComponents}\r\n                  />\r\n                </p>\r\n              </>\r\n            )}\r\n            <h3 className={styles.summaryTitle}>\r\n              {t(\"faction.\" + selectedFaction.key + \".summaryTitle\")}\r\n            </h3>\r\n            <Trans i18nKey={\"faction.\" + selectedFaction.key + \".summary\"} />\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FactionSelect;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"numberSelector_container__KVrpV\",\"label\":\"numberSelector_label__dJBel\",\"button\":\"numberSelector_button__pWUXh\",\"input\":\"numberSelector_input__Y3k4M\",\"value\":\"numberSelector_value__LsgFn\"};","import { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../features/selectors\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"./step\";\r\nimport styles from \"./css/numberSelector.module.css\";\r\n\r\ninterface NumberSelectorProps {\r\n  id: string;\r\n  value: number;\r\n  minVal: number;\r\n  maxVal: number;\r\n  onChange: (value: number) => void;\r\n}\r\n\r\nexport const NumberSelector: React.FC<NumberSelectorProps> = ({\r\n  id,\r\n  value,\r\n  minVal,\r\n  maxVal,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  // This used to be dynamic but we've effectivley constrained this via CSS\r\n  const size = 2;\r\n\r\n  const buttonHandler = (amount: number) => {\r\n    const newValue = value + amount;\r\n    if (newValue >= minVal && newValue <= maxVal) onChange(newValue);\r\n  };\r\n\r\n  const typingHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const rawValue = event.target.value;\r\n    let newValue = Number(rawValue);\r\n    // Only continue processing if the user entered a numeric value\r\n    if (!isNaN(newValue)) {\r\n      // Trim off any extra numbers at the start of the input to allow numbers to be freely typed in\r\n      // We do this in a loop so we keep cutting off leading digits until we get a valid value\r\n      for (let digits = size; digits > 0; digits--) {\r\n        newValue = Number(rawValue.substring(rawValue.length - digits));\r\n        // Stop the loop once the value is small enough\r\n        if (newValue <= maxVal) {\r\n          // Only make the change if the value isn't too small\r\n          if (newValue >= minVal) onChange(newValue);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={\"label.\" + id} />\r\n      </label>\r\n      {stepActive ? (\r\n        <>\r\n          <button className={styles.button} onClick={() => buttonHandler(-1)}>\r\n            -\r\n          </button>\r\n          <input\r\n            id={id}\r\n            inputMode=\"numeric\"\r\n            className={styles.input}\r\n            value={value}\r\n            size={size}\r\n            onChange={typingHandler}\r\n            aria-invalid={stepActive && errorMessage ? true : undefined}\r\n            aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n          />\r\n          <button className={styles.button} onClick={() => buttonHandler(+1)}>\r\n            +\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <span id={id} className={styles.value}>\r\n          {value}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NumberSelector;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"radiogroup_container__VHGVH\",\"option\":\"radiogroup_option__uhMQy\",\"radio\":\"radiogroup_radio__JaIzm\",\"label\":\"radiogroup_label__FAeB1\",\"inactive\":\"radiogroup_inactive__KwPwK\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../features/selectors\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"./step\";\r\nimport styles from \"./css/radiogroup.module.css\";\r\n\r\ninterface RadiogroupProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (value: boolean) => void;\r\n}\r\n\r\nexport const Radiogroup: React.FC<RadiogroupProps> = ({ id, defaultValue, onChange }) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return (\r\n    <fieldset\r\n      name={id}\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n      disabled={!stepActive}\r\n      aria-required=\"true\"\r\n      aria-invalid={stepActive && errorMessage ? true : undefined}\r\n      aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n    >\r\n      {!defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={id + \"False\"}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={!defaultValue}\r\n            onChange={() => onChange(false)}\r\n          />\r\n          <label htmlFor={id + \"False\"} className={styles.label}>\r\n            <Trans i18nKey={\"label.\" + id + \".false\"} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n      {defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={id + \"True\"}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={defaultValue}\r\n            onChange={() => onChange(true)}\r\n          />\r\n          <label htmlFor={id + \"True\"} className={styles.label}>\r\n            <Trans i18nKey={\"label.\" + id + \".true\"} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nRadiogroup.defaultProps = {\r\n  defaultValue: false,\r\n};\r\n\r\nexport default Radiogroup;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRestart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M77.25 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C175.6 444.9 183.8 448 192 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L77.25 256zM269.3 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C367.6 444.9 375.8 448 384 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L269.3 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRestart);\nexport default __webpack_public_path__ + \"static/media/restart.1f1bc0fcdd3af260a646146f9839655a.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"stepList_container__zCVs-\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"button_wrapper__QBqRh\",\"disabled\":\"button_disabled__8eWG7\",\"icon\":\"button_icon__SaCKD\",\"labelLeft\":\"button_labelLeft__+ccWQ\",\"labelRight\":\"button_labelRight__IS6wZ\"};","import classNames from \"classnames\";\r\nimport React from \"react\";\r\nimport styles from \"./css/button.module.css\";\r\n\r\ninterface ButtonProps\r\n  extends React.DetailedHTMLProps<\r\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    HTMLButtonElement\r\n  > {\r\n  Icon?: React.ElementType;\r\n  iconLeft?: boolean;\r\n}\r\n\r\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, disabled, onClick, Icon, iconLeft, children, ...props }, ref) => {\r\n    const renderIconLeft = Icon && iconLeft;\r\n    const renderIconRight = Icon && !iconLeft;\r\n    const buttonIcon = Icon && <Icon className={styles.icon} />;\r\n    return (\r\n      <button\r\n        {...props}\r\n        ref={ref}\r\n        className={classNames(styles.wrapper, className, {\r\n          [styles.disabled]: disabled,\r\n        })}\r\n        onClick={disabled ? undefined : onClick}\r\n      >\r\n        {renderIconLeft ? buttonIcon : null}\r\n        {children && (\r\n          <span\r\n            className={classNames({\r\n              [styles.labelRight]: renderIconLeft,\r\n              [styles.labelLeft]: renderIconRight,\r\n            })}\r\n          >\r\n            {children}\r\n          </span>\r\n        )}\r\n        {renderIconRight ? buttonIcon : null}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\nButton.defaultProps = {\r\n  iconLeft: false,\r\n};\r\n\r\nexport default Button;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2868256c5d35189e90f781fe73fc5c34.svg\";\nexport { ForwardRef as ReactComponent };","import { useTranslation } from \"react-i18next\";\r\nimport {\r\n  enableMapLandmark,\r\n  fixFirstPlayer,\r\n  setLandmarkCount,\r\n  setPlayerCount,\r\n} from \"../features/setupSlice\";\r\nimport {\r\n  selectDeckArray,\r\n  selectExpansionArray,\r\n  selectFactionArray,\r\n  selectFactionCodeArray,\r\n  selectHirelingArray,\r\n  selectLandmarkArray,\r\n  selectMapArray,\r\n  selectSetupParameters,\r\n  selectFlowState,\r\n  selectFactionPool,\r\n  selectSetupMap,\r\n  selectVagabondArray,\r\n} from \"../features/selectors\";\r\nimport { skipSteps, resetFlow } from \"../features/flowSlice\";\r\nimport {\r\n  toggleDeck,\r\n  toggleExpansion,\r\n  toggleHireling,\r\n  toggleLandmark,\r\n  toggleMap,\r\n  toggleFaction,\r\n  toggleVagabond,\r\n} from \"../features/componentsSlice\";\r\nimport { SetupStep } from \"../types\";\r\nimport Checkbox from \"./checkbox\";\r\nimport ComponentToggle from \"./componentToggle\";\r\nimport { FactionSelect } from \"./factionSelect\";\r\nimport { useAppDispatch, useAppSelector, useNthLastPlayer } from \"../hooks\";\r\nimport NumberSelector from \"./numberSelector\";\r\nimport Radiogroup from \"./radiogroup\";\r\nimport Step from \"./step\";\r\nimport styles from \"./css/stepList.module.css\";\r\nimport { ReactComponent as RestartIcon } from \"../images/icons/restart.svg\";\r\nimport Button from \"./button\";\r\nimport IconList from \"./iconList\";\r\nimport Icon from \"./icon\";\r\n\r\nexport const StepList: React.FC = () => {\r\n  const {\r\n    playerCount,\r\n    fixedFirstPlayer,\r\n    useMapLandmark,\r\n    deck,\r\n    landmarkCount,\r\n    landmark1,\r\n    landmark2,\r\n    hireling1,\r\n    hireling2,\r\n    hireling3,\r\n    excludedFactions,\r\n    playerOrder,\r\n  } = useAppSelector(selectSetupParameters);\r\n  const { currentPlayerIndex, currentFactionIndex, vagabondSetUp } =\r\n    useAppSelector(selectFlowState);\r\n  const { skippedSteps } = useAppSelector(selectFlowState);\r\n\r\n  const factions = useAppSelector(selectFactionArray);\r\n  const maps = useAppSelector(selectMapArray);\r\n  const map = useAppSelector(selectSetupMap);\r\n  const factionCodes = useAppSelector(selectFactionCodeArray);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const selectedVagabond =\r\n    currentFactionIndex != null ? factionPool[currentFactionIndex].vagabond : undefined;\r\n\r\n  const dispatch = useAppDispatch();\r\n  const nthLastPlayer = useNthLastPlayer();\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <main className={styles.container}>\r\n      <Step step={SetupStep.chooseExpansions}>\r\n        <ComponentToggle\r\n          selector={selectExpansionArray}\r\n          toggleComponent={toggleExpansion}\r\n          getLabelKey={(expansion) => \"expansion.\" + expansion.code}\r\n          getLockedKey={(expansion) =>\r\n            // Prevent the player from deselecting the Root base game\r\n            expansion.base ? \"error.baseExpansionRequired\" : null\r\n          }\r\n          unsorted={true}\r\n        />\r\n        <Checkbox\r\n          id=\"includeBotStep\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpBots]}\r\n          onChange={(checked) => dispatch(skipSteps(SetupStep.setUpBots, !checked))}\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.seatPlayers}>\r\n        <NumberSelector\r\n          id=\"playerCount\"\r\n          value={playerCount}\r\n          minVal={skippedSteps[SetupStep.setUpBots] ? 2 : 1}\r\n          maxVal={factions.length - 1}\r\n          onChange={(value) => dispatch(setPlayerCount(value))}\r\n        />\r\n        <Radiogroup\r\n          id=\"fixedFirstPlayer\"\r\n          defaultValue={fixedFirstPlayer}\r\n          onChange={(value) => dispatch(fixFirstPlayer(value))}\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.chooseMap}>\r\n        <ComponentToggle\r\n          selector={selectMapArray}\r\n          toggleComponent={toggleMap}\r\n          getLabelKey={(map) => \"map.\" + map.code + \".name\"}\r\n        />\r\n        {maps.some((map) => map.landmark && map.enabled) ? (\r\n          <Checkbox\r\n            id=\"useMapLandmark\"\r\n            defaultValue={useMapLandmark}\r\n            onChange={(checked) => dispatch(enableMapLandmark(checked))}\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpMap}\r\n        subtitleKey={\"map.\" + map?.code + \".setupTitle\"}\r\n        textKey={\"map.\" + map?.code + \".setup\"}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpMapLandmark}\r\n        subtitleKey={\"landmark.\" + map?.landmark + \".setupTitle\"}\r\n        textKey={\"map.\" + map?.code + \".landmarkSetup\"}\r\n        translationOptions={{ context: map?.code }}\r\n      />\r\n      <Step step={SetupStep.chooseDeck}>\r\n        <ComponentToggle\r\n          selector={selectDeckArray}\r\n          toggleComponent={toggleDeck}\r\n          getLabelKey={(deck) => \"deck.\" + deck.code + \".name\"}\r\n        />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpDeck}\r\n        renderTitle={skippedSteps[SetupStep.chooseDeck]}\r\n        renderSubtitle={!skippedSteps[SetupStep.chooseDeck]}\r\n        subtitleKey={\"deck.\" + deck + \".setupTitle\"}\r\n        textKey={\"deck.\" + deck + \".setup\"}\r\n        translationOptions={{\r\n          context: playerCount < 3 ? \"twoPlayer\" : undefined,\r\n        }}\r\n      />\r\n      <Step step={SetupStep.setUpBots} />\r\n      <Step\r\n        step={SetupStep.chooseLandmarks}\r\n        translationOptions={{\r\n          context: useMapLandmark && map?.landmark ? \"mapLandmark\" : undefined,\r\n        }}\r\n      >\r\n        <NumberSelector\r\n          id=\"landmarkCount\"\r\n          value={landmarkCount}\r\n          minVal={0}\r\n          maxVal={2}\r\n          onChange={(value) => dispatch(setLandmarkCount(value))}\r\n        />\r\n        {landmarkCount > 0 ? (\r\n          <ComponentToggle\r\n            selector={selectLandmarkArray}\r\n            toggleComponent={toggleLandmark}\r\n            getLabelKey={(landmark) => \"landmark.\" + landmark.code + \".name\"}\r\n            getLockedKey={(landmark) =>\r\n              // Disable this landmark if it requires more players to include\r\n              landmark.minPlayers > playerCount\r\n                ? \"error.landmarkNotEnoughPlayers\"\r\n                : // Disable this landmark if it was already used in map setup\r\n                useMapLandmark && landmark.code === map?.landmark\r\n                ? \"error.mapLandmarkUsed\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpLandmark1}\r\n        subtitleKey={\"landmark.\" + landmark1 + \".setupTitle\"}\r\n        textKey={\"landmark.\" + landmark1 + \".setup\"}\r\n        translationOptions={{\r\n          context: map?.code,\r\n          count: nthLastPlayer(1),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpLandmark2}\r\n        subtitleKey={\"landmark.\" + landmark2 + \".setupTitle\"}\r\n        textKey={\"landmark.\" + landmark2 + \".setup\"}\r\n        translationOptions={{\r\n          context: map?.code,\r\n          count: nthLastPlayer(2),\r\n        }}\r\n      />\r\n      <Step step={SetupStep.chooseHirelings}>\r\n        <Checkbox\r\n          id=\"includeHirelings\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpHireling1]}\r\n          onChange={(checked) =>\r\n            dispatch(\r\n              skipSteps(\r\n                [\r\n                  SetupStep.setUpHireling1,\r\n                  SetupStep.setUpHireling2,\r\n                  SetupStep.setUpHireling3,\r\n                  SetupStep.postHirelingSetup,\r\n                ],\r\n                !checked\r\n              )\r\n            )\r\n          }\r\n        />\r\n        {!skippedSteps[SetupStep.setUpHireling1] ? (\r\n          <ComponentToggle\r\n            selector={selectHirelingArray}\r\n            toggleComponent={toggleHireling}\r\n            getLabelKey={(hireling) => \"hireling.\" + hireling.code + \".name\"}\r\n            getLockedKey={(hireling) =>\r\n              // Are we at the max player count (i.e. there are no factions to spare for an equivilent hireling)?\r\n              playerCount >= factionCodes.length - 1 &&\r\n              // Is this hireling one of the faction equivilents?\r\n              hireling.factions.some((faction) => factionCodes.includes(faction))\r\n                ? \"error.factionHirelingExcluded\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpHireling1}\r\n        subtitleKey={\"hireling.\" + hireling1?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling1?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling1?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(1),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling2}\r\n        subtitleKey={\"hireling.\" + hireling2?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling2?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling2?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(2),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling3}\r\n        subtitleKey={\"hireling.\" + hireling3?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling3?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling3?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(3),\r\n        }}\r\n      />\r\n      <Step step={SetupStep.postHirelingSetup} />\r\n      <Step step={SetupStep.drawCards} />\r\n      <Step step={SetupStep.chooseFactions}>\r\n        <ComponentToggle\r\n          selector={selectFactionArray}\r\n          toggleComponent={toggleFaction}\r\n          getLabelKey={(faction) => \"faction.\" + faction.key + \".name\"}\r\n          getLockedKey={(faction) =>\r\n            // Disable insurgent factions if we're only playing with 2 people and no bots or hirelings\r\n            playerCount < 3 &&\r\n            !faction.militant &&\r\n            skippedSteps[SetupStep.setUpHireling1] &&\r\n            skippedSteps[SetupStep.setUpBots]\r\n              ? \"error.tooFewPlayerInsurgent\"\r\n              : // Disable a faction if it was replaced by an equivilent hireling\r\n              excludedFactions.includes(faction.code)\r\n              ? \"error.hirelingSelected\"\r\n              : null\r\n          }\r\n        />\r\n        {factions.some((faction) => faction.isVagabond && faction.enabled) ? (\r\n          <>\r\n            {t(\"label.selectVagabonds\")}\r\n            <ComponentToggle\r\n              selector={selectVagabondArray}\r\n              toggleComponent={toggleVagabond}\r\n              getLabelKey={(vagabond) => \"vagabond.\" + vagabond.code + \".name\"}\r\n            />\r\n          </>\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.selectFaction}\r\n        translationOptions={{ count: playerOrder[currentPlayerIndex] }}\r\n      >\r\n        <FactionSelect />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpFaction}\r\n        subtitleKey={\r\n          currentFactionIndex != null\r\n            ? \"faction.\" + factionPool[currentFactionIndex].key + \".setupTitle\"\r\n            : undefined\r\n        }\r\n        textKey={\r\n          currentFactionIndex != null\r\n            ? \"faction.\" + factionPool[currentFactionIndex].key + \".setup\"\r\n            : undefined\r\n        }\r\n        translationOptions={{\r\n          context: vagabondSetUp ? \"vagabondSetUp\" : undefined,\r\n          vagabond: selectedVagabond && t(\"vagabond.\" + selectedVagabond.code + \".name\"),\r\n        }}\r\n        components={\r\n          selectedVagabond && {\r\n            InitialStartingItems: <IconList list={selectedVagabond.startingItems.slice(0, -1)} />,\r\n            FinalStartingItem: (\r\n              <Icon\r\n                icon={selectedVagabond.startingItems[selectedVagabond.startingItems.length - 1]}\r\n              />\r\n            ),\r\n          }\r\n        }\r\n      />\r\n      <Step\r\n        step={SetupStep.placeScoreMarkers}\r\n        translationOptions={{\r\n          context: vagabondSetUp ? \"vagabondSetUp\" : undefined,\r\n        }}\r\n      />\r\n      <Step step={SetupStep.chooseHand} />\r\n      <Step step={SetupStep.setupEnd} translationOptions={{ count: playerOrder[0] }}>\r\n        <Button Icon={RestartIcon} iconLeft={true} onClick={() => dispatch(resetFlow())}>\r\n          {t(\"label.restartSetup\")}\r\n        </Button>\r\n      </Step>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default StepList;\r\n","import { configureStore, ThunkAction, Action } from \"@reduxjs/toolkit\";\r\nimport componentsReducer from \"./features/componentsSlice\";\r\nimport flowReducer from \"./features/flowSlice\";\r\nimport setupReducer from \"./features/setupSlice\";\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    components: componentsReducer,\r\n    flow: flowReducer,\r\n    setup: setupReducer,\r\n  },\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  Action<string>\r\n>;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"toast_anchor__EikSb\",\"hidden\":\"toast_hidden__UGxrL\",\"container\":\"toast_container__clsnS\",\"message\":\"toast_message__TpoS-\",\"close\":\"toast_close__w9YNw\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUndo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUndo);\nexport default __webpack_public_path__ + \"static/media/undo.5a573c6cc3c17506a909a3a801018a50.svg\";\nexport { ForwardRef as ReactComponent };","import { useTranslation } from \"react-i18next\";\r\nimport styles from \"./css/toast.module.css\";\r\nimport { ReactComponent as CloseIcon } from \"../images/icons/close.svg\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { selectSetupParameters } from \"../features/selectors\";\r\nimport { setErrorMessage } from \"../features/setupSlice\";\r\nimport { useEffect, useState } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nexport const Toast: React.FC = () => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  // Cache the error message to allow us to continue displaying it as we transition\r\n  const [cachedMessage, setCachedMessage] = useState(errorMessage);\r\n  const dispatch = useAppDispatch();\r\n  const { t } = useTranslation();\r\n\r\n  // Update the cached message if a new one came through\r\n  useEffect(() => {\r\n    if (errorMessage != null) setCachedMessage(errorMessage);\r\n  }, [errorMessage]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.anchor, { [styles.hidden]: !errorMessage })}\r\n      aria-hidden={!errorMessage}\r\n      aria-live=\"assertive\"\r\n    >\r\n      <div className={styles.container}>\r\n        <span id=\"appError\" className={styles.message}>\r\n          {cachedMessage && t(cachedMessage)}.\r\n        </span>\r\n        <button\r\n          className={styles.close}\r\n          title={t(\"label.closeMessage\")}\r\n          onClick={() => dispatch(setErrorMessage(null))}\r\n          disabled={!errorMessage}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toast;\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { AppThunk, RootState } from \"../store\";\r\nimport { SetupStep, Togglable, WithCode } from \"../types\";\r\nimport { toggleFaction, toggleHireling, toggleLandmark } from \"./componentsSlice\";\r\nimport {\r\n  addToFactionPool,\r\n  clearFactionPool,\r\n  incrementStep,\r\n  setCurrentPlayerIndex,\r\n  skipSteps,\r\n} from \"./flowSlice\";\r\nimport {\r\n  selectDeckArray,\r\n  selectEnabledIndependentHirelings,\r\n  selectEnabledInsurgentFactions,\r\n  selectEnabledMilitantFactions,\r\n  selectFactionArray,\r\n  selectFactionCodeArray,\r\n  selectFactionHirelingArray,\r\n  selectFlowState,\r\n  selectHirelingArray,\r\n  selectLandmarkArray,\r\n  selectMapArray,\r\n  selectSetupParameters,\r\n  selectVagabondArray,\r\n} from \"./selectors\";\r\nimport {\r\n  clearExcludedFactions,\r\n  setDeck,\r\n  setErrorMessage,\r\n  setFirstPlayer,\r\n  setHireling,\r\n  setLandmark1,\r\n  setLandmark2,\r\n  setMap,\r\n  setPlayerCount,\r\n} from \"./setupSlice\";\r\nimport { selectEnabled, takeRandom } from \"./utils\";\r\n\r\n/**\r\n * Thunk action for mass updating the enable/disable state of multiple components, dispatching the minimum amount of actions to do so\r\n * @param selectComponentArray Selector for the list of components you wish to update\r\n * @param componentEnable Either a function returning the desired enable state for a given component, or a boolean which sets the enable state of all given components\r\n * @param toggleComponent Action creator for dispatching the toggle component action for the given components\r\n */\r\nexport const massComponentToggle =\r\n  <T extends Togglable>(\r\n    selectComponentArray: (state: RootState) => WithCode<T>[],\r\n    componentEnable: boolean | ((component: WithCode<T>) => boolean),\r\n    toggleComponent: (code: string, enabled?: boolean) => PayloadAction<any>\r\n  ): AppThunk =>\r\n  (dispatch, getState) => {\r\n    selectComponentArray(getState()).forEach((component) => {\r\n      // Calculate what the enable state of the component should be\r\n      const shouldEnable =\r\n        typeof componentEnable === \"function\" ? componentEnable(component) : componentEnable;\r\n      // If the desired state does not match the actual state, fix it\r\n      if (component.enabled !== shouldEnable) {\r\n        dispatch(toggleComponent(component.code, shouldEnable));\r\n      }\r\n    });\r\n  };\r\n\r\n/** Advances to the next step in setup, performing all validation logic and state changes required for each step */\r\nexport const nextStep = (): AppThunk => (dispatch, getState) => {\r\n  // Retrieve our setup state\r\n  const setupParameters = selectSetupParameters(getState());\r\n  const flowState = selectFlowState(getState());\r\n  let doIncrementStep = true;\r\n  let validationError: string | null = null;\r\n\r\n  // Handle any special logic that fires at the end of a step\r\n  switch (flowState.currentStep) {\r\n    case SetupStep.chooseExpansions:\r\n      // After locking in the Choosen expansions, we need to calculate which steps can be skipped\r\n      // Do we need to choose a deck?\r\n      const decks = selectDeckArray(getState());\r\n      if (decks.length === 1) {\r\n        // Auto select the only deck\r\n        dispatch(setDeck(decks[0]));\r\n        dispatch(skipSteps(SetupStep.chooseDeck, true));\r\n      } else {\r\n        // Make sure we do the choose deck step\r\n        dispatch(skipSteps(SetupStep.chooseDeck, false));\r\n      }\r\n\r\n      // Correct our current playercount if it is too low or high (this can occur with undo/redo)\r\n      if (setupParameters.playerCount < 2 && flowState.skippedSteps[SetupStep.setUpBots]) {\r\n        dispatch(setPlayerCount(2));\r\n      } else {\r\n        const maxPlayerCount = selectFactionCodeArray(getState()).length - 1;\r\n        if (setupParameters.playerCount > maxPlayerCount) {\r\n          dispatch(setPlayerCount(maxPlayerCount));\r\n        }\r\n      }\r\n\r\n      // Are there any landmarks that can be set up?\r\n      dispatch(\r\n        skipSteps(\r\n          [SetupStep.chooseLandmarks, SetupStep.setUpLandmark1, SetupStep.setUpLandmark2],\r\n          selectLandmarkArray(getState()).length === 0\r\n        )\r\n      );\r\n\r\n      // Are there any hirelings that can be set up?\r\n      if (selectHirelingArray(getState()).length === 0) {\r\n        // We must ensure all hireling setup is skipped\r\n        dispatch(\r\n          skipSteps(\r\n            [\r\n              SetupStep.chooseHirelings,\r\n              SetupStep.setUpHireling1,\r\n              SetupStep.setUpHireling2,\r\n              SetupStep.setUpHireling3,\r\n              SetupStep.postHirelingSetup,\r\n            ],\r\n            true\r\n          )\r\n        );\r\n        // Clear the exlcude faction pool of any potential stale data from previous setups\r\n        // We need to do this here since we're skipping the chooseHirelings step\r\n        if (setupParameters.excludedFactions.length > 0) dispatch(clearExcludedFactions());\r\n      } else {\r\n        // By default we still skip the actual hireling setup, as per other optional components\r\n        dispatch(skipSteps(SetupStep.chooseHirelings, false));\r\n      }\r\n      break;\r\n\r\n    case SetupStep.seatPlayers:\r\n      let firstPlayer: number;\r\n\r\n      // Do we need to randomise the first player\r\n      if (setupParameters.fixedFirstPlayer) {\r\n        // First player is always \"1\" as the player number represents turn order\r\n        firstPlayer = 1;\r\n      } else {\r\n        // Randomly pick a first player between 1 and playerCount, as the player number represents table seating order\r\n        firstPlayer = Math.floor(Math.random() * setupParameters.playerCount) + 1;\r\n      }\r\n      dispatch(setFirstPlayer(firstPlayer));\r\n\r\n      // Ensure that we include/exclude faction hirelings depending on if we can spare factions for hirelings at our player count\r\n      dispatch(\r\n        massComponentToggle(\r\n          selectFactionHirelingArray,\r\n          setupParameters.playerCount < selectFactionCodeArray(getState()).length - 1,\r\n          toggleHireling\r\n        )\r\n      );\r\n      break;\r\n\r\n    case SetupStep.chooseMap:\r\n      // Get our list of maps which are avaliable for selection\r\n      let mapPool = selectEnabled(selectMapArray(getState()));\r\n\r\n      // Check that there is even a map to be selected...\r\n      if (mapPool.length > 0) {\r\n        // Choose a random map\r\n        const map = takeRandom(mapPool);\r\n        dispatch(setMap(map));\r\n\r\n        // Do the map landmark setup if we have one\r\n        dispatch(\r\n          skipSteps(SetupStep.setUpMapLandmark, !setupParameters.useMapLandmark || !map.landmark)\r\n        );\r\n\r\n        // Ensure that any landmarks not supported at this player count or used by map setup are disabled\r\n        dispatch(\r\n          massComponentToggle(\r\n            selectLandmarkArray,\r\n            (landmark) =>\r\n              landmark.minPlayers <= setupParameters.playerCount &&\r\n              (!setupParameters.useMapLandmark || map.landmark !== landmark.code),\r\n            toggleLandmark\r\n          )\r\n        );\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n        validationError = \"error.noMap\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseDeck:\r\n      // Get our list of decks which are avaliable for selection\r\n      let deckPool = selectEnabled(selectDeckArray(getState()));\r\n\r\n      // Check that there is even a deck to be selected...\r\n      if (deckPool.length > 0) {\r\n        // Choose a random deck\r\n        dispatch(setDeck(takeRandom(deckPool)));\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n        validationError = \"error.noDeck\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseLandmarks:\r\n      // Get our list of landmarks which are avaliable for selection\r\n      let landmarkPool = selectEnabled(selectLandmarkArray(getState()));\r\n\r\n      // Check that there are enough enabled landmarks for how many we want to set up\r\n      if (landmarkPool.length >= setupParameters.landmarkCount) {\r\n        // Select the first landmark\r\n        if (setupParameters.landmarkCount >= 1) {\r\n          // Choose a random landmark\r\n          dispatch(setLandmark1(takeRandom(landmarkPool)));\r\n\r\n          // Select the second landmark\r\n          if (setupParameters.landmarkCount >= 2) {\r\n            // Choose a random landmark\r\n            dispatch(setLandmark2(takeRandom(landmarkPool)));\r\n            // Ensure we don't skip the setup steps\r\n            dispatch(skipSteps([SetupStep.setUpLandmark1, SetupStep.setUpLandmark2], false));\r\n          } else {\r\n            // Handle skipping just the second landmark setup\r\n            dispatch(skipSteps(SetupStep.setUpLandmark1, false));\r\n            dispatch(skipSteps(SetupStep.setUpLandmark2, true));\r\n          }\r\n        } else {\r\n          // We're not setting up any landmarks, so skip both setup steps\r\n          dispatch(skipSteps([SetupStep.setUpLandmark1, SetupStep.setUpLandmark2], true));\r\n        }\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n\r\n        // Set the correct error message\r\n        if (landmarkPool.length === 0) {\r\n          validationError = \"error.noLandmark\";\r\n        } else {\r\n          validationError = \"error.tooFewLandmark\";\r\n        }\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseHirelings:\r\n      // Clear the exclude faction pool of any potential stale data from previous hireling setups\r\n      if (setupParameters.excludedFactions.length > 0) dispatch(clearExcludedFactions());\r\n\r\n      // Did we skip the hireling setup?\r\n      if (!flowState.skippedSteps[SetupStep.setUpHireling1]) {\r\n        // Get our lists of independent & faction hirelings which are avaliable for selection\r\n        let hirelingPool = selectEnabledIndependentHirelings(getState());\r\n        let factionHirelings = selectEnabled(selectFactionHirelingArray(getState()));\r\n\r\n        // Calculate how many factions we can spare for hirelings (i.e. total factions minus setup faction count)\r\n        const factionCodes = selectFactionCodeArray(getState());\r\n        let spareFactionCount = factionCodes.length - (setupParameters.playerCount + 1);\r\n\r\n        // If we can only spare 3 or less factions then limit the amount of faction hirelings\r\n        if (spareFactionCount <= 3) {\r\n          // Add a random sample of faction hirelings to our pool, ensuring that the random hireling draw will never exclude too many factions for setup\r\n          while (spareFactionCount > 0 && factionHirelings.length > 0) {\r\n            // Grab a random faction hireling\r\n            let hireling = takeRandom(factionHirelings);\r\n            // Calculate how many factions we will exclude by including it (based on what factions are actually in play)\r\n            let excludeCount =\r\n              hireling.factions.length > 1\r\n                ? // Make sure we only count the factions that are actually in play\r\n                  hireling.factions.filter((factionCode) => factionCodes.includes(factionCode))\r\n                    .length\r\n                : 1;\r\n            // Ensure that we don't exclude too many factions by addding this hireling (The Exile can cause this edge case)\r\n            if (spareFactionCount - excludeCount >= 0) {\r\n              hirelingPool.push(hireling);\r\n              spareFactionCount -= excludeCount;\r\n            }\r\n          }\r\n        } else {\r\n          // There are enough spare factions that we can throw all faction hirelings into the mix\r\n          hirelingPool = hirelingPool.concat(factionHirelings);\r\n        }\r\n\r\n        // Check that there are enough hirelings selected\r\n        if (hirelingPool.length >= 3) {\r\n          // Choose three random hirelings\r\n          for (let number = 1; number <= 3; number++) {\r\n            dispatch(\r\n              setHireling(\r\n                number,\r\n                takeRandom(hirelingPool),\r\n                setupParameters.playerCount + number > 5\r\n              )\r\n            );\r\n          }\r\n        } else {\r\n          // Invalid state, do not proceed\r\n          doIncrementStep = false;\r\n          validationError = \"error.tooFewHireling\";\r\n        }\r\n      }\r\n\r\n      // Disable the factions that are mutually exclusive with the selected hirelings\r\n      // Also disable insurgent factions if we're only playing with 2 people and no bots or hirelings\r\n      const excludedFactions = selectSetupParameters(getState()).excludedFactions;\r\n      dispatch(\r\n        massComponentToggle(\r\n          selectFactionArray,\r\n          (faction) =>\r\n            !excludedFactions.includes(faction.code) &&\r\n            (setupParameters.playerCount > 2 ||\r\n              faction.militant ||\r\n              !flowState.skippedSteps[SetupStep.setUpHireling1] ||\r\n              !flowState.skippedSteps[SetupStep.setUpBots]),\r\n          toggleFaction\r\n        )\r\n      );\r\n      break;\r\n\r\n    case SetupStep.chooseFactions:\r\n      // Clear the faction pool of any potential stale data from previous setups\r\n      if (flowState.factionPool.length > 0) dispatch(clearFactionPool());\r\n\r\n      // Get our list of militant factions and vagabonds which are avaliable for selection\r\n      let workingFactionPool = selectEnabledMilitantFactions(getState());\r\n      let vagabondPool = selectEnabled(selectVagabondArray(getState()));\r\n\r\n      // Get our list of insurgent factions to be added to the working faction pool during setup\r\n      const insurgentFactions = selectEnabledInsurgentFactions(getState());\r\n      // Get our vagabond faction count to validate our vagabondPool against\r\n      const vagabondFactionCount = workingFactionPool\r\n        .concat(insurgentFactions)\r\n        .reduce((count, faction) => (faction.isVagabond ? count + 1 : count), 0);\r\n\r\n      // Check that there are enough factions avaliable for setup\r\n      if (\r\n        workingFactionPool.length > 0 &&\r\n        vagabondPool.length >= vagabondFactionCount &&\r\n        workingFactionPool.length + insurgentFactions.length >= setupParameters.playerCount + 1\r\n      ) {\r\n        // Start by adding a random militant faction\r\n        dispatch(addToFactionPool(takeRandom(workingFactionPool), vagabondPool));\r\n        // Add the insurgent factions to the mix\r\n        workingFactionPool = workingFactionPool.concat(insurgentFactions);\r\n        // Add enough factions to make the total pool playerCount + 1\r\n        for (let i = 0; i < setupParameters.playerCount; i++) {\r\n          dispatch(addToFactionPool(takeRandom(workingFactionPool), vagabondPool));\r\n        }\r\n\r\n        // Begin the setup at the bottom of player order\r\n        dispatch(setCurrentPlayerIndex(setupParameters.playerCount - 1));\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n\r\n        // Set the correct error message\r\n        if (workingFactionPool.length === 0) {\r\n          validationError = \"error.noMilitantFaction\";\r\n        } else if (vagabondPool.length < vagabondFactionCount) {\r\n          validationError = \"error.tooFewVagabond\";\r\n        } else {\r\n          validationError = \"error.tooFewFaction\";\r\n        }\r\n      }\r\n      break;\r\n\r\n    case SetupStep.selectFaction:\r\n      // Ensure the user has actually selected a faction\r\n      if (flowState.currentFactionIndex == null) {\r\n        doIncrementStep = false;\r\n        validationError = \"error.noFaction\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.setupEnd:\r\n      // This is the final step, so don't try to increment\r\n      doIncrementStep = false;\r\n      break;\r\n  }\r\n\r\n  // Set the error message if it's changed\r\n  if (setupParameters.errorMessage !== validationError) {\r\n    dispatch(setErrorMessage(validationError));\r\n  }\r\n\r\n  // Increment the step if we're still flagged to do so\r\n  if (doIncrementStep) {\r\n    dispatch(incrementStep());\r\n  }\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"toolbar_container__JFX1M\",\"bar\":\"toolbar_bar__1mmhU\",\"left\":\"toolbar_left__R96an\",\"right\":\"toolbar_right__3o7ME\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRedo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRedo);\nexport default __webpack_public_path__ + \"static/media/redo.11634d8fe78742557717ccbadd28ebfd.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNext);\nexport default __webpack_public_path__ + \"static/media/next.f651cefe41f9309065677703624ef585.svg\";\nexport { ForwardRef as ReactComponent };","import { useTranslation } from \"react-i18next\";\r\nimport { nextStep } from \"../features/thunks\";\r\nimport { redoStep, undoStep } from \"../features/flowSlice\";\r\nimport { selectFlowState } from \"../features/selectors\";\r\nimport { SetupStep } from \"../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./css/toolbar.module.css\";\r\nimport { ReactComponent as UndoIcon } from \"../images/icons/undo.svg\";\r\nimport { ReactComponent as RedoIcon } from \"../images/icons/redo.svg\";\r\nimport { ReactComponent as NextIcon } from \"../images/icons/next.svg\";\r\nimport { useRef, useState } from \"react\";\r\nimport Button from \"./button\";\r\n\r\nexport const Toolbar: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useAppDispatch();\r\n  const { pastSteps, futureSteps, currentStep } = useAppSelector(selectFlowState);\r\n  const [focusedIndex, setFocusedIndex] = useState(0);\r\n\r\n  const buttonRefs = [\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n  ];\r\n\r\n  const onKeyDownHandler = (\r\n    event: React.KeyboardEvent<HTMLButtonElement>,\r\n    focusedIndex: number\r\n  ) => {\r\n    const maxIndex = buttonRefs.length - 1;\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1 > maxIndex ? 0 : focusedIndex + 1;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1 < 0 ? maxIndex : focusedIndex - 1;\r\n    } else if (event.key === \"Home\") {\r\n      newIndex = 0;\r\n    } else if (event.key === \"End\") {\r\n      newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      setFocusedIndex(newIndex);\r\n      buttonRefs[newIndex].current?.focus();\r\n    }\r\n  };\r\n\r\n  const undoDisabled = pastSteps.length === 0;\r\n  const redoDisabled = futureSteps.length === 0;\r\n  const nextStepDisabled = currentStep >= SetupStep.setupEnd;\r\n\r\n  return (\r\n    <footer className={styles.container}>\r\n      <div className={styles.bar} role=\"toolbar\">\r\n        <Button\r\n          Icon={UndoIcon}\r\n          disabled={undoDisabled}\r\n          className={styles.left}\r\n          ref={buttonRefs[0]}\r\n          onClick={() => {\r\n            dispatch(undoStep());\r\n            setFocusedIndex(0);\r\n          }}\r\n          title={t(\"label.undo\")}\r\n          aria-disabled={undoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 0 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 0)}\r\n        />\r\n        <Button\r\n          Icon={RedoIcon}\r\n          disabled={redoDisabled}\r\n          className={styles.left}\r\n          ref={buttonRefs[1]}\r\n          onClick={() => {\r\n            dispatch(redoStep());\r\n            setFocusedIndex(1);\r\n          }}\r\n          title={t(\"label.redo\")}\r\n          aria-disabled={redoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 1 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 1)}\r\n        />\r\n        <Button\r\n          Icon={NextIcon}\r\n          disabled={nextStepDisabled}\r\n          className={styles.right}\r\n          ref={buttonRefs[2]}\r\n          onClick={() => {\r\n            dispatch(nextStep());\r\n            setFocusedIndex(2);\r\n          }}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 2 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 2)}\r\n        >\r\n          {t(\"label.nextStep\")}\r\n        </Button>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Toolbar;\r\n","// This code is used to register a service worker.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function registerServiceWorker(config?: Config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = process.env.PUBLIC_URL + \"/service-worker.js\";\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\"No internet connection found. App is running in offline mode.\");\r\n    });\r\n}\r\n\r\nexport function unregisterServiceWorker() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport Backend from \"i18next-http-backend\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport Header from \"./header\";\r\nimport StepList from \"./stepList\";\r\nimport { store } from \"../store\";\r\nimport Toast from \"./toast\";\r\nimport Toolbar from \"./toolbar\";\r\nimport { registerServiceWorker } from \"../serviceWorkerRegistration\";\r\n\r\n// Don't try to re-initalize if this chunk got hot-reloaded in a dev environment\r\n(process.env.NODE_ENV !== \"development\" || !i18n.isInitialized) &&\r\n  i18n\r\n    .use(Backend)\r\n    .use(LanguageDetector)\r\n    .use(initReactI18next)\r\n    .init({\r\n      fallbackLng: \"en\",\r\n      debug: process.env.NODE_ENV === \"development\",\r\n      load: \"languageOnly\", // Just load the base language with no locale. Can be removed in the future to support explicit locales\r\n      ns: \"auset\",\r\n      interpolation: {\r\n        escapeValue: false, // not needed for react as it escapes by default\r\n      },\r\n      backend: {\r\n        loadPath: process.env.PUBLIC_URL + \"/locales/{{ns}}-{{lng}}.json\",\r\n      },\r\n      react: {\r\n        transKeepBasicHtmlNodesFor: [\"br\", \"i\", \"p\", \"b\"],\r\n      },\r\n    });\r\n\r\nexport const App: React.FC = () => (\r\n  <Provider store={store}>\r\n    <Header />\r\n    <StepList />\r\n    <Toolbar />\r\n    <Toast />\r\n  </Provider>\r\n);\r\n\r\nregisterServiceWorker({\r\n  onUpdate: (registration) => {\r\n    if (registration.waiting) {\r\n      // It's safe to skip waiting because at this point we've already served all the application\r\n      // code and localization, which are the two things that break the app when out of sync\r\n      registration.waiting.postMessage({ type: \"SKIP_WAITING\" });\r\n    }\r\n  },\r\n});\r\n\r\nexport default App;\r\n"],"names":["SetupStep","t","useTranslation","className","styles","src","rootLogo","alt","setupSlice","createSlice","name","initialState","playerCount","fixedFirstPlayer","playerOrder","errorMessage","map","useMapLandmark","deck","landmarkCount","landmark1","landmark2","hireling1","hireling2","hireling3","excludedFactions","reducers","setPlayerCount","state","payload","fixFirstPlayer","setFirstPlayer","firstPlayer","i","nextPlayer","push","process","setErrorMessage","enableMapLandmark","setMap","mapCode","code","setDeck","deckCode","setLandmarkCount","setLandmark1","landmarkCode","setLandmark2","setHireling","prepare","number","hireling","demoted","hirelingEntry","factions","reducer","clearExcludedFactions","extraReducers","builder","addDefaultCase","actions","typedKeys","Object","keys","typedEntries","entries","persistExpansionEnabled","expansionCode","enabled","localStorage","setItem","error","expansionEnabled","base","storedVal","getItem","takeRandom","list","Math","floor","random","length","returnVal","splice","generateComponentSelectors","componentType","getComponentData","select","componentInfo","components","selectArray","createSelector","componentList","array","selectEnabled","filter","value","content","root","image","rootBox","decks","standard","standardCard","marquise","key","marquiseMeeple","militant","isVagabond","warriors","buildings","buildingImage","marquiseBuildings","tokens","tokenImage","marquiseTokens","complexity","wealth","aggression","crafting","eyrie","eyrieMeeple","roostBuilding","alliance","allianceMeeple","baseBuildings","vagabond","thiefMeeple","maps","autumn","autumnMap","winter","winterMap","vagabonds","thief","startingItems","tinker","tinkerMeeple","ranger","rangerMeeple","riverfolk","riverfolkBox","cult","cultMeeple","gardenBuildings","riverfolkMeeple","vagabond2","roninMeeple","vagrant","vagrantMeeple","arbiter","arbiterMeeple","scoundrel","scoundrelMeeple","underworld","underworldBox","duchy","duchyMeeple","duchyBuildings","corvid","corvidMeeple","plotToken","landmarks","tower","towerLandmark","minPlayers","ferry","ferryLandmark","lake","landmark","lakeMap","mountain","mountainMap","marauder","marauderBox","warlord","warlordMeeple","mobToken","keepers","keepersMeeple","waystationBuildings","relicTokens","hirelings","patrol","patrolMeeple","dynasty","dynastyMeeple","uprising","uprisingMeeple","exile","exileMeeple","exilesDeck","exilesDeckBox","exiles","exilesCard","landmarkPack","landmarkPackBox","treetop","treetopLandmark","city","cityLandmark","market","marketLandmark","forge","forgeLandmark","vagabondPack","vagabondPackBox","adventurer","adventurerMeeple","ronin","harrier","harrierMeeple","riverfolkHirelings","riverfolkHirelingsBox","prophets","prophetsMeeple","flotilla","flotillaMeeple","bandits","banditsMeeple","underworldHirelings","underworldHirelingsBox","expedition","expeditionMeeple","spies","spiesMeeple","protector","protectorMeeple","marauderHirelings","marauderHirelingsBox","flamebearers","flamebearersMeeple","vaultkeepers","vaultkeepersMeeple","band","bandMeeple","freeze","componentCode","selectDeckArray","selectExpansionArray","expansions","expansionInfo","selectFaction","selectFactionArray","selectFactionCodeArray","selectFactionPool","flow","factionPool","entry","selectVagabond","undefined","selectFlowState","selectHirelingArray","selectFactionHirelingArray","some","factionCode","includes","selectLandmarkArray","selectMap","selectMapArray","selectSetupMap","setup","selectSetupParameters","selectVagabondArray","pastSteps","currentStep","chooseExpansions","lastFactionLocked","vagabondSetUp","currentPlayerIndex","currentFactionIndex","skippedSteps","Array","setupEnd","fill","futureSteps","setUpBots","setUpHireling1","setUpHireling2","setUpHireling3","postHirelingSetup","getSlice","step","playerIndex","factionIndex","applySlice","slice","flowSlice","incrementStep","setUpFaction","removedFaction","skipStep","undoStep","previousStep","pop","unshift","redoStep","nextStep","shift","skipSteps","steps","skip","forEach","clearFactionPool","addToFactionPool","faction","vagabondPool","factionEntry","setCurrentPlayerIndex","setCurrentFactionIndex","resetFlow","addCase","addExpansionComponents","toggleComponent","shouldEnable","componentsSlice","expansion","toggleExpansion","toggleDeck","toggleFaction","toggleHireling","toggleLandmark","toggleMap","toggleVagabond","useAppDispatch","useDispatch","useAppSelector","useSelector","iconDict","fox","mouse","rabbit","bag","boot","coin","crossbow","hammer","sword","tea","torch","Icon","icon","children","stepActive","useContext","StepContext","iconAlt","classNames","title","Bag","Boot","Coin","Crossbow","Fox","Hammer","Mouse","Rabbit","Sword","Tea","Torch","defaultValue","createContext","StepProvider","Provider","Step","renderTitle","renderSubtitle","subtitleKey","textKey","textBelowChildren","translationOptions","i18n","sectionElement","useRef","stepRendered","useEffect","current","scrollIntoView","behavior","window","matchMedia","matches","titleText","subtitleText","defaultTitleKey","exists","defaultSubtitleKey","document","ref","Trans","i18nKey","count","tOptions","iconComponents","defaultProps","_path","id","onChange","type","defaultChecked","disabled","e","target","checked","htmlFor","selector","getLabelKey","getLockedKey","unsorted","dispatch","useState","largeLabels","setLargeLabels","sortedComponents","useMemo","returnValue","component","label","sort","a","b","localeCompare","language","componentLockedKey","componentLocked","onClick","tabIndex","role","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMilitant","_ref","svgRef","titleId","props","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","d","ForwardRef","StatBar","stat","statValue","IconList","item","index","imageSource","ComponentCount","componentCount","componentImage","FactionSelect","onKeyDownHandler","event","newIndex","focusedIndex","maxIndex","preventDefault","currentTarget","parentNode","focus","lastIndex","selectedFaction","factionName","factionImage","onKeyDown","minVal","maxVal","buttonHandler","amount","newValue","inputMode","size","rawValue","Number","isNaN","digits","substring","Radiogroup","SvgRestart","Button","React","iconLeft","renderIconLeft","renderIconRight","buttonIcon","factionCodes","selectedVagabond","nthLastPlayer","position","useNthLastPlayer","seatPlayers","chooseMap","setUpMap","setUpMapLandmark","context","chooseDeck","setUpDeck","chooseLandmarks","setUpLandmark1","setUpLandmark2","chooseHirelings","drawCards","chooseFactions","InitialStartingItems","FinalStartingItem","placeScoreMarkers","chooseHand","RestartIcon","store","configureStore","componentsReducer","flowReducer","setupReducer","SvgClose","cachedMessage","setCachedMessage","massComponentToggle","selectComponentArray","componentEnable","getState","setupParameters","flowState","doIncrementStep","validationError","maxPlayerCount","mapPool","deckPool","landmarkPool","hirelingPool","every","factionHirelings","spareFactionCount","excludeCount","concat","workingFactionPool","insurgentFactions","selectEnabledInsurgentFactions","vagabondFactionCount","reduce","SvgUndo","SvgRedo","SvgNext","setFocusedIndex","buttonRefs","undoDisabled","redoDisabled","nextStepDisabled","UndoIcon","RedoIcon","NextIcon","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","console","Backend","use","LanguageDetector","initReactI18next","init","fallbackLng","debug","load","ns","interpolation","escapeValue","backend","loadPath","react","transKeepBasicHtmlNodesFor","App","URL","href","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","log","checkValidServiceWorker","registerServiceWorker","waiting","postMessage"],"sourceRoot":""}