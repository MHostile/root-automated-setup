{"version":3,"file":"static/js/872.2b216d3f.chunk.js","mappings":"sSA4FYA,E,4CC3FZ,EAA4B,0BAA5B,EAA6D,qBAA7D,EAA6F,yB,qECA7F,ECGgC,WAC9B,IAAQC,GAAMC,EAAAA,EAAAA,KAAND,EACR,OACE,oBAAQE,UAAWC,EAAnB,WACE,gBAAKC,IAAKC,EAAUC,IAAKN,EAAE,iBAAkBE,UAAWC,KACxD,gBAAKD,UAAWC,EAAhB,SAAkCH,EAAE,wB,ikLCG7BO,EAA0B,SACrCC,EACAC,GAEA,IACEC,aAAaC,QAAQH,EAAeC,EAbzB,IACC,KAaZ,MAAOG,GACHC,IAaKC,EAAmB,SAC9BN,EACAO,GAGA,GAAIA,EAAM,OAAO,EAGjB,IACIN,EADAO,EAAYN,aAAaO,QAAQT,GAarC,OATiB,MAAbQ,EAEFP,EA1CW,MA0CDO,EAIVT,EAAwBC,EADxBC,GAAU,GAILA,GAOIS,EAAqB,SAACV,GAAD,OAGhCW,EAAQX,IAMGY,EAAyB,SACpCC,EACAb,EACAc,GAEI,IADJC,EACG,uDADSL,EAAmBV,GAE/B,GAAiB,MAAbe,GAAqBD,KAAgBC,EACvC,cAAyCC,OAAOC,QAC9CF,EAAUD,IADZ,eAEG,CAFE,sBAAOI,EAAP,KAAsBC,EAAtB,KAIyB,MAAxBN,EAAMK,KACRL,EAAMK,IAAN,kBACKC,GADL,IAEEnB,cAAeA,EACfC,SAAS,OAeNmB,EACX,SAA+BN,GAA/B,OACA,WAEE,IADA,IAAMO,EAAkC,GACxC,MAAyCL,OAAOC,QAAQN,GAAxD,eAAkE,CAA7D,sBAAOX,EAAP,KAAsBe,EAAtB,KACCT,EAAiBN,EAAee,EAAUR,OAC5CK,EACES,EACArB,EACAc,EACAC,GAIN,OAAOM,IAQEC,EAAkB,CAC7BC,QAAS,SAACC,EAAcvB,GAAf,MAAsC,CAC7CwB,QAAS,CACPD,KAAAA,EACAvB,QAAAA,KAGJyB,QAAS,SACPb,EACAc,GAGA,IAEuB,EAFjBR,EAAYN,EAAMc,EAAOF,QAAQD,MAEtB,MAAbL,IAEFA,EAAUlB,QAAV,UAAoB0B,EAAOF,QAAQxB,eAAnC,SAA+CkB,EAAUlB,WAclD2B,EAAa,SAAIC,GAE5B,IAAMC,EAAIC,KAAKC,MAAMD,KAAKE,SAAWJ,EAAKK,QAEpCC,EAAYN,EAAKC,GAGvB,OADAD,EAAKO,OAAON,EAAG,GACRK,GCnIHE,EAAsB,SAC1BxB,EACAb,EACAC,GAGA,IAAMc,EAAYF,EAAMb,GAEP,MAAbe,GAAsBA,EAAUR,OAClCQ,EAAUd,QAAUA,EACpBF,EAAwBC,EAAee,EAAUd,WAIxCqC,GAAiBC,EAAAA,EAAAA,IAAY,CACxCC,KAAM,YACNnB,aA5BiC,WAEjC,IADA,IAAIA,EAA0C,GAC9C,MAAyCL,OAAOC,QAAQN,GAAxD,eAAkE,CAA7D,sBAAOX,EAAP,KAAsBe,EAAtB,KACHM,EAAarB,GAAiB,CAC5BO,KAAMQ,EAAUR,KAChBkC,MAA2B,KAApB1B,EAAU0B,WAAeC,EAAY3B,EAAU0B,MACtDxC,QAASK,EAAiBN,EAAee,EAAUR,OAGvD,OAAOc,GAoBPsB,SAAU,CACRC,gBAAiB,SAAC/B,EAAOc,GAAR,OACfU,EAAoBxB,EAAOc,EAAOF,SAAS,IAC7CoB,iBAAkB,SAAChC,EAAOc,GAAR,OAChBU,EAAoBxB,EAAOc,EAAOF,SAAS,OAI1C,EAA8Ca,EAAeQ,QAArDF,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,iBAChC,EAAeP,EAAf,QAGaS,EACX,SAA+BjC,GAA/B,OACA,SAACkC,GACCA,EACGC,QAAQL,GAAiB,SAAC/B,EAAOc,GAAR,OACxBf,EAAiCC,EAAOc,EAAOF,QAASX,MAEzDmC,QAAQJ,GAAkB,SAAChC,EAAOc,GAAY,IAAD,EAE5C,GAAI,UAACjB,EAAmBiB,EAAOF,gBAA3B,QAAC,EAAoClB,KAEvC,cAAyCS,OAAOC,QAAQJ,GAAxD,eAAgE,CAA3D,sBAAOK,EAAP,UACWlB,gBAAkB2B,EAAOF,gBAC9BZ,EAAMK,SChEdgC,GAAYX,EAAAA,EAAAA,IAAY,CACnCC,KAAM,OACNnB,aAAcD,EAAsC,SACpDuB,SAAU,CACRQ,WAAY7B,GAEd8B,cAAeL,EAAkB,WAGpBI,EAAeD,EAAUJ,QAAzBK,WACf,EAAeD,EAAf,QCVaG,GAAed,EAAAA,EAAAA,IAAY,CACtCC,KAAM,UACNnB,aAAcD,EAA2B,YACzCuB,SAAU,CACRW,cAAehC,GAEjB8B,cAAeL,EAAkB,cAGpBO,EAAkBD,EAAaP,QAA/BQ,cACf,EAAeD,EAAf,Q,UPuGwH,SA1B5G9D,GAAAA,EAAAA,EAAAA,iBAAAA,GAAAA,mBAAAA,EAAAA,EAAAA,YAAAA,GAAAA,cAAAA,EAAAA,EAAAA,UAAAA,GAAAA,YAAAA,EAAAA,EAAAA,SAAAA,GAAAA,WAAAA,EAAAA,EAAAA,iBAAAA,GAAAA,mBAAAA,EAAAA,EAAAA,WAAAA,GAAAA,aAAAA,EAAAA,EAAAA,UAAAA,GAAAA,YAAAA,EAAAA,EAAAA,UAAAA,GAAAA,YAAAA,EAAAA,EAAAA,gBAAAA,GAAAA,kBAAAA,EAAAA,EAAAA,eAAAA,GAAAA,iBAAAA,EAAAA,EAAAA,eAAAA,IAAAA,iBAAAA,EAAAA,EAAAA,gBAAAA,IAAAA,kBAAAA,EAAAA,EAAAA,eAAAA,IAAAA,iBAAAA,EAAAA,EAAAA,eAAAA,IAAAA,iBAAAA,EAAAA,EAAAA,eAAAA,IAAAA,iBAAAA,EAAAA,EAAAA,kBAAAA,IAAAA,oBAAAA,EAAAA,EAAAA,UAAAA,IAAAA,YAAAA,EAAAA,EAAAA,eAAAA,IAAAA,iBAAAA,EAAAA,EAAAA,cAAAA,IAAAA,gBAAAA,EAAAA,EAAAA,aAAAA,IAAAA,eAAAA,EAAAA,EAAAA,kBAAAA,IAAAA,oBAAAA,EAAAA,EAAAA,WAAAA,IAAAA,aAAAA,EAAAA,EAAAA,SAAAA,IAAAA,WA0B4G,CA1B5GA,IAAAA,EAAAA,KQjFZ,IAsBagE,GAAahB,EAAAA,EAAAA,IAAY,CACpCC,KAAM,QACNnB,aAxB+B,CAC/BmC,YAAa,EACbC,kBAAkB,EAClBC,YAAa,GACbC,aAAc,KAEdC,IAAK,KACLC,gBAAgB,EAEhBC,KAAM,KAENC,cAAe,EACfC,UAAW,KACXC,UAAW,KAEXC,UAAW,KACXC,UAAW,KACXC,UAAW,KAEXC,iBAAkB,IAMlB1B,SAAU,CACR2B,eAAgB,SAACzD,EAAOc,GAElBA,EAAOF,SAAW,IACpBZ,EAAM2C,YAAc7B,EAAOF,QAC3BZ,EAAM8C,aAAe,OAQzBY,eAAgB,SAAC1D,EAAOc,GACtBd,EAAM4C,iBAAmB9B,EAAOF,QAChCZ,EAAM8C,aAAe,MAEvBa,eAAgB,SAAC3D,EAAOc,GAEtB,GAAIA,EAAOF,SAAW,GAAKE,EAAOF,SAAWZ,EAAM2C,YAAa,CAC9D3C,EAAM6C,YAAc,GAEpB,IAAK,IAAI5B,EAAI,EAAGA,EAAIjB,EAAM2C,YAAa1B,IAAK,CAE1C,IAAI2C,EAAa9C,EAAOF,QAAUK,EAC9B2C,EAAa5D,EAAM2C,cAAaiB,GAAc5D,EAAM2C,aACxD3C,EAAM6C,YAAYgB,KAAKD,SAEhBpE,GAObsE,gBAAiB,SAAC9D,EAAOc,GACvBd,EAAM8C,aAAehC,EAAOF,SAE9BmD,kBAAmB,SAAC/D,EAAOc,GACzBd,EAAMgD,eAAiBlC,EAAOF,QAC9BZ,EAAM8C,aAAe,MAEvBkB,OAAQ,CACNtD,QAAS,SAACqC,GAAD,MAAkC,CAAEnC,QAASmC,EAAIpC,OAC1DE,QAAS,SAACb,EAAOc,GACfd,EAAM+C,IAAMjC,EAAOF,UAGvBqD,QAAS,CACPvD,QAAS,SAACuC,GAAD,MAAyC,CAAErC,QAASqC,EAAKtC,OAClEE,QAAS,SAACb,EAAOc,GACfd,EAAMiD,KAAOnC,EAAOF,UAGxBsD,iBAAkB,SAAClE,EAAOc,IAGH,IAAnBA,EAAOF,SACY,IAAnBE,EAAOF,SACY,IAAnBE,EAAOF,WAEPZ,EAAMkD,cAAgBpC,EAAOF,QAC7BZ,EAAM8C,aAAe,OAQzBqB,aAAc,CACZzD,QAAS,SAAC0D,GAAD,MAAmC,CAAExD,QAASwD,EAASzD,OAChEE,QAAS,SAACb,EAAOc,GACXd,EAAMkD,eAAiB,IACzBlD,EAAMmD,UAAYrC,EAAOF,WAS/ByD,aAAc,CACZ3D,QAAS,SAAC0D,GAAD,MAAmC,CAAExD,QAASwD,EAASzD,OAChEE,QAAS,SAACb,EAAOc,GACXd,EAAMkD,eAAiB,IACzBlD,EAAMoD,UAAYtC,EAAOF,WAS/B0D,YAAa,CACX5D,QAAS,SACP6D,EACAC,EACAC,GAHO,MAIH,CACJ7D,QAAS,CACP2D,OAAAA,EACAC,SAAUA,EAAS7D,KACnB+D,SAAUF,EAASE,SACnBD,QAAAA,KAGJ5D,QAAS,SACPb,EACAc,GAOA,GAAIA,EAAOF,QAAQ2D,QAAU,GAAKzD,EAAOF,QAAQ2D,QAAU,EAAG,CAAC,IAAD,EACtDC,EAA0B,CAC9B7D,KAAMG,EAAOF,QAAQ4D,SACrBC,QAAS3D,EAAOF,QAAQ6D,SAGI,IAA1B3D,EAAOF,QAAQ2D,SAAcvE,EAAMqD,UAAYmB,GACrB,IAA1B1D,EAAOF,QAAQ2D,SAAcvE,EAAMsD,UAAYkB,GACrB,IAA1B1D,EAAOF,QAAQ2D,SAAcvE,EAAMuD,UAAYiB,IAEnD,EAAAxE,EAAMwD,kBAAiBK,KAAvB,gBAA+B/C,EAAOF,QAAQ8D,gBACrClF,IAQfmF,sBAAuB,SAAC3E,GACtBA,EAAMwD,iBAAmB,KAG7BjB,cAAe,SAACJ,GAEdA,EAAQyC,gBAAe,SAAC5E,GACtBA,EAAM8C,aAAe,WAKpB,EAaHJ,EAAWT,QAZbwB,EADK,EACLA,eACAC,EAFK,EAELA,eACAC,EAHK,EAGLA,eACAG,EAJK,EAILA,gBACAC,EALK,EAKLA,kBACAC,EANK,EAMLA,OACAC,EAPK,EAOLA,QACAC,EARK,EAQLA,iBACAC,EATK,EASLA,aACAE,EAVK,EAULA,aACAC,EAXK,EAWLA,YACAK,GAZK,EAYLA,sBAEF,GAAejC,EAAf,QC1LMlC,GAA0B,CAC9BqE,UAAW,GACXC,YAAapG,EAAUqG,iBACvBC,YAAa,GACbC,mBAAmB,EACnBC,eAAe,EACfC,mBAAoB,EACpBC,oBAAqB,KAErBC,aAAcC,MAAM5G,EAAU6G,SAAW,GAAGC,MAAK,GACjDC,YAAa,IAGfjF,GAAa6E,aAAa3G,EAAUgH,YAAa,EACjDlF,GAAa6E,aAAa3G,EAAUiH,iBAAkB,EACtDnF,GAAa6E,aAAa3G,EAAUkH,iBAAkB,EACtDpF,GAAa6E,aAAa3G,EAAUmH,iBAAkB,EACtDrF,GAAa6E,aAAa3G,EAAUoH,oBAAqB,EAEzD,IAAMC,GAAW,SAAC/F,GAAD,MAAkC,CACjDgG,KAAMhG,EAAM8E,YAEZE,aAAY,OAAKhF,EAAMgF,aACvBC,kBAAmBjF,EAAMiF,kBACzBC,cAAelF,EAAMkF,cACrBe,YAAajG,EAAMmF,mBACnBe,aAAclG,EAAMoF,sBAGhBe,GAAa,SAACnG,EAAkBoG,GACpCpG,EAAM8E,YAAcsB,EAAMJ,KAC1BhG,EAAMgF,YAAcoB,EAAMpB,YAC1BhF,EAAMiF,kBAAoBmB,EAAMnB,kBAChCjF,EAAMkF,cAAgBkB,EAAMlB,cAC5BlF,EAAMmF,mBAAqBiB,EAAMH,YACjCjG,EAAMoF,oBAAsBgB,EAAMF,cAGvBG,IAAY3E,EAAAA,EAAAA,IAAY,CACnCC,KAAM,OACNnB,aAAAA,GACAsB,SAAU,CACRwE,cAAe,SAACtG,EAAOc,GACwB,IAAD,EAA5C,GAAId,EAAM8E,YAAcpG,EAAU6G,SAchC,GAZAvF,EAAM6E,UAAUhB,KAAKkC,GAAS/F,IAC9BA,EAAMyF,YAAc,GAIlBzF,EAAM8E,cAAgBpG,EAAU6H,eAC/BvG,EAAMkF,eACPlF,EAAMgF,YAAN,UAAkBhF,EAAMoF,2BAAxB,QAA+C,GAAGoB,WAElDxG,EAAMkF,eAAgB,GAItBlF,EAAM8E,cAAgBpG,EAAU6H,cAChCvG,EAAMmF,mBAAqB,EAC3B,CAAC,IAAD,EAEAnF,EAAMmF,qBAEN,MAAyBnF,EAAMgF,YAAYzD,OAAlB,UACvBvB,EAAMoF,2BADiB,QACM,EAC7B,GAFKqB,GAAP,eAIAzG,EAAMoF,oBAAsB,KAExBpF,EAAMiF,mBAAqBwB,EAAeC,WAC5C1G,EAAMiF,mBAAoB,GAE5BjF,EAAM8E,YAAcpG,EAAUiI,kBACzB,CAEL,IAAIC,GAAW,EACf,GACE5G,EAAM8E,cACN8B,EAAW5G,EAAMqF,aAAarF,EAAM8E,mBAC7B8B,GAAY5G,EAAM8E,YAAcpG,EAAU6G,eAE5C/F,GAObqH,SAAU,SAAC7G,EAAOc,GAEhB,IAAMgG,EAAe9G,EAAM6E,UAAUkC,MACjB,MAAhBD,IAEF9G,EAAMyF,YAAYuB,QAAQjB,GAAS/F,IAEnCmG,GAAWnG,EAAO8G,KAQtBG,SAAU,SAACjH,EAAOc,GAEhB,IAAMoG,EAAWlH,EAAMyF,YAAY0B,QACnB,MAAZD,IAEFlH,EAAM6E,UAAUhB,KAAKkC,GAAS/F,IAE9BmG,GAAWnG,EAAOkH,KAQtBE,UAAW,CACT1G,QAAS,SAAC2G,EAAgCC,GAAjC,MAAoD,CAC3D1G,QAAS,CACPyG,MAAwB,kBAAVA,EAAqB,CAACA,GAASA,EAC7CC,KAAMA,KAGVzG,QAAS,SACPb,EACAc,GAEAA,EAAOF,QAAQyG,MAAME,SAAQ,SAACvB,GAC5BhG,EAAMqF,aAAaW,GAAQlF,EAAOF,QAAQ0G,QAE5CtH,EAAMyF,YAAc,KAGxB+B,iBAAkB,SAACxH,GACjBA,EAAMgF,YAAc,GACpBhF,EAAMiF,mBAAoB,EAC1BjF,EAAMoF,oBAAsB,MAE9BqC,iBAAkB,CAChB/G,QAAS,SACPgH,EACAC,GAFO,MAGH,CACJ/G,QAAS,CACPD,KAAM+G,EAAQ/G,KACd+F,SAAUgB,EAAQhB,SAClBF,SAAUkB,EAAQE,WACd7G,EAAW4G,GAAchH,UACzBkB,KAGRhB,QAAS,SAACb,EAAOc,GAEfd,EAAMgF,YAAYnB,KAAK/C,EAAOF,SAC9BZ,EAAMiF,mBAAqBnE,EAAOF,QAAQ8F,WAG9CmB,sBAAuB,SAAC7H,EAAOc,GACzBA,EAAOF,SAAW,IACpBZ,EAAMmF,mBAAqBrE,EAAOF,UAQtCkH,uBAAwB,SAAC9H,EAAOc,GAC1BA,EAAOF,SAAW,GAAKE,EAAOF,QAAUZ,EAAMgF,YAAY3D,SAC5DrB,EAAMoF,oBAAsBtE,EAAOF,QACnCZ,EAAMyF,YAAc,KAQxBsC,UAAW,SAAC/H,GACVA,EAAM6E,UAAY,GAClB7E,EAAM8E,YAAcpG,EAAUqG,iBAC9B/E,EAAMyF,YAAc,KAGxBlD,cAAe,SAACJ,GAEdA,EAEGC,QAAQ0B,GAAiB,eACzBc,gBAAe,SAAC5E,GACfA,EAAMyF,YAAc,SAKrB,GAUHY,GAAUpE,QATZqE,GADK,GACLA,cACAO,GAFK,GAELA,SACAI,GAHK,GAGLA,SACAG,GAJK,GAILA,UACAI,GALK,GAKLA,iBACAC,GANK,GAMLA,iBACAI,GAPK,GAOLA,sBACAC,GARK,GAQLA,uBACAC,GATK,GASLA,UAEF,GAAe1B,GAAf,QCzNa2B,IAAgBtG,EAAAA,EAAAA,IAAY,CACvCC,KAAM,WACNnB,aAAcD,EAA4B,aAC1CuB,SAAU,CACRmG,eAAgBxH,GAElB8B,cAAeL,EAAkB,eAGpB+F,GAAmBD,GAAc/F,QAAjCgG,eACf,GAAeD,GAAf,QCVaE,IAAgBxG,EAAAA,EAAAA,IAAY,CACvCC,KAAM,WACNnB,aAAcD,EAA4B,aAC1CuB,SAAU,CACRqG,eAAgB1H,GAElB8B,cAAeL,EAAkB,eAGpBiG,GAAmBD,GAAcjG,QAAjCkG,eACf,GAAeD,GAAf,QCVaE,IAAW1G,EAAAA,EAAAA,IAAY,CAClCC,KAAM,MACNnB,aAAcD,EAAgC,QAC9CuB,SAAU,CACRuG,UAAW5H,GAEb8B,cAAeL,EAAkB,UAGpBmG,GAAcD,GAASnG,QAAvBoG,UACf,GAAeD,GAAf,QCVaE,IAAgB5G,EAAAA,EAAAA,IAAY,CACvCC,KAAM,WACNnB,aAAcD,EAA4B,aAC1CuB,SAAU,CACRyG,eAAgB9H,GAElB8B,cAAeL,EAAkB,eAGpBqG,GAAmBD,GAAcrG,QAAjCsG,eACf,GAAeD,GAAf,Q,UCPME,GAAuB,SAC3BC,GAD2B,OAG3BC,EAAAA,GAAAA,IAAeD,GAAQ,SAACE,GAEtB,IADA,IAAMC,EAAQ,GACd,MAA6BzI,OAAOC,QAAQuI,GAA5C,eAAyD,CAApD,sBAAOhI,EAAP,KAAakI,EAAb,KACHD,EAAM/E,MAAN,kBAAgBgF,GAAhB,IAAwBlI,KAAAA,KAE1B,OAAOiI,MAIEE,GAAgB,SAA0BF,GAA1B,OAC3BA,EAAMG,QAAO,SAACC,GAAD,OAAWA,EAAM5J,YAMnB6J,GAAkBT,IAAqB,SAACxI,GAAD,OAAWA,EAAMiD,QAOxDiG,GAAuBV,IAClC,SAACxI,GAAD,OAAWA,EAAME,aAQNiJ,GAAqBX,IAChC,SAACxI,GAAD,OAAWA,EAAM0H,WAIN0B,GAAyB,SAACpJ,GAAD,OACpCG,OAAOkJ,KAAKrJ,EAAM0H,UAWP4B,IAAoBZ,EAAAA,GAAAA,KAC/B,SAAC1I,GAAD,OAAsBA,EAAMuJ,KAAKvE,eACjC,SAAChF,GAAD,OAAsBA,EAAM0H,WAC5B,SAAC1H,GAAD,OAAsBA,EAAMwG,YAC5B,SAACxB,EAAaN,EAAU8E,GAAxB,OACExE,EAAYjC,KAAI,SAAC0G,GAAD,eAAC,UACZ/E,EAAS+E,EAAM9I,OADJ,IAEdA,KAAM8I,EAAM9I,KACZ6F,SAAUiD,EAAMjD,UAAN,kBACDgD,EAAUC,EAAMjD,WADf,IAC0B7F,KAAM8I,EAAMjD,gBAC5C3E,UAKG6H,GAAkB,SAAC1J,GAAD,OAAsBA,EAAMuJ,MAO9CI,GAAsBnB,IACjC,SAACxI,GAAD,OAAWA,EAAMwE,YAINoF,GAA6B,SAAC5J,GAAD,OACxC2J,GAAoB3J,GAAO+I,QAAO,SAACvE,GAAD,OAEhCA,EAASE,SAASmF,MAAK,SAACC,GAAD,OACrBV,GAAuBpJ,GAAO+J,SAASD,UAoBhCE,GAAsBxB,IACjC,SAACxI,GAAD,OAAWA,EAAMoE,YAON6F,GAAiBzB,IAAqB,SAACxI,GAAD,OAAWA,EAAM+C,OAGvDmH,GAAiB,SAAClK,GAAD,OACT,MAAnBA,EAAMmK,MAAMpH,KAAZ,kBACS/C,EAAM+C,IAAI/C,EAAMmK,MAAMpH,MAD/B,IACqCpC,KAAMX,EAAMmK,MAAMpH,MACnD,MAsDOqH,GAAwB,SAACpK,GAAD,OAAsBA,EAAMmK,OAOpDE,GAAsB7B,IACjC,SAACxI,GAAD,OAAWA,EAAMwG,YC9IN8D,GACX,SAACnL,GAAD,OACA,SAACoL,EAAUC,GAET,IDnB4BxK,EAAkBW,ECmBxCT,GDnBsBF,ECmBMwK,IDnBY7J,ECmBAxB,EDlBhDa,EAAME,UAAUS,ICoBG,MAAbT,GAAsBA,EAAUR,OAE9BQ,EAAUd,QACZmL,EAASvI,EAAiB7C,IAE1BoL,EAASxI,EAAgB5C,OAWpBsL,GACX,SACEjC,EACAkC,EACAjK,GAHF,OAQA,SAAC8J,EAAUC,GACThC,EAAqBgC,KAAYjD,SAAQ,SAACjH,GAExC,IAAMqK,EACuB,oBAApBD,EACHA,EAAgBpK,GAChBoK,EAEFpK,EAAUlB,UAAYuL,GACxBJ,EAAS9J,EAAgBH,EAAUK,KAAMgK,SAMpCzD,GAAW,kBAAgB,SAACqD,EAAUC,GAEjD,IDzC4CxK,ECyCtC4K,EAAkBR,GAAsBI,KACxCK,EAAYnB,GAAgBc,KAC9BM,GAAkB,EAClBC,EAAiC,KAGrC,OAAQF,EAAU/F,aAChB,KAAKpG,EAAUqG,iBAGb,IAAMiG,EAAQ/B,GAAgBuB,KAW9B,GAVqB,IAAjBQ,EAAM3J,QAERkJ,EAAStG,EAAQ+G,EAAM,KACvBT,EAASnD,GAAU1I,EAAUuM,YAAY,KAGzCV,EAASnD,GAAU1I,EAAUuM,YAAY,IAKzCL,EAAgBjI,YAAc,GAC9BkI,EAAUxF,aAAa3G,EAAUgH,WAEjC6E,EAAS9G,EAAe,QACnB,CACL,IAAMyH,EAAiB9B,GAAuBoB,KAAYnJ,OAAS,EAC/DuJ,EAAgBjI,YAAcuI,GAChCX,EAAS9G,EAAeyH,IAK5BX,EACEnD,GACE,CACE1I,EAAUyM,gBACVzM,EAAU0M,eACV1M,EAAU2M,gBAE+B,IAA3CrB,GAAoBQ,KAAYnJ,SAKW,IAA3CsI,GAAoBa,KAAYnJ,QAElCkJ,EACEnD,GACE,CACE1I,EAAU4M,gBACV5M,EAAUiH,eACVjH,EAAUkH,eACVlH,EAAUmH,eACVnH,EAAUoH,oBAEZ,IAKA8E,EAAgBpH,iBAAiBnC,OAAS,GAC5CkJ,EAAS5F,OAGX4F,EAASnD,GAAU1I,EAAU4M,iBAAiB,IAEhD,MAEF,KAAK5M,EAAU6M,YACb,IAAIC,EAKFA,EAFEZ,EAAgBhI,iBAEJ,EAIZ1B,KAAKC,MAAMD,KAAKE,SAAWwJ,EAAgBjI,aAAe,EAE9D4H,EAAS5G,EAAe6H,IAGxBjB,EACEE,GACEb,GACAgB,EAAgBjI,YACdyG,GAAuBoB,KAAYnJ,OAAS,EAC9C4G,KAGJ,MAEF,KAAKvJ,EAAU+M,UAEb,IAAIC,EAAU5C,GAAcmB,GAAeO,MAG3C,GAAIkB,EAAQrK,OAAS,EAAG,CAEtB,IAAM0B,EAAMhC,EAAW2K,GACvBnB,EAASvG,EAAOjB,IAGhBwH,EACEnD,GACE1I,EAAUiN,kBACTf,EAAgB5H,iBAAmBD,EAAIqB,WAK5CmG,EACEE,GACET,IACA,SAAC5F,GAAD,OACEA,EAASwH,YAAchB,EAAgBjI,eACrCiI,EAAgB5H,gBAChBD,EAAIqB,WAAaA,EAASzD,QAC9BwH,UAKJ2C,GAAkB,EAClBC,EAAkB,cAEpB,MAEF,KAAKrM,EAAUuM,WAEb,IAAIY,EAAW/C,GAAcG,GAAgBuB,MAGzCqB,EAASxK,OAAS,EAEpBkJ,EAAStG,EAAQlD,EAAW8K,MAG5Bf,GAAkB,EAClBC,EAAkB,gBAEpB,MAEF,KAAKrM,EAAUyM,gBAEb,IAAIW,EAAehD,GAAckB,GAAoBQ,MAGjDsB,EAAazK,QAAUuJ,EAAgB1H,cAErC0H,EAAgB1H,eAAiB,GAEnCqH,EAASpG,EAAapD,EAAW+K,KAG7BlB,EAAgB1H,eAAiB,GAEnCqH,EAASlG,EAAatD,EAAW+K,KAEjCvB,EACEnD,GACE,CAAC1I,EAAU0M,eAAgB1M,EAAU2M,iBACrC,MAKJd,EAASnD,GAAU1I,EAAU0M,gBAAgB,IAC7Cb,EAASnD,GAAU1I,EAAU2M,gBAAgB,MAI/Cd,EACEnD,GACE,CAAC1I,EAAU0M,eAAgB1M,EAAU2M,iBACrC,KAMNP,GAAkB,EAIhBC,EAD0B,IAAxBe,EAAazK,OACG,mBAEA,wBAGtB,MAEF,KAAK3C,EAAU4M,gBAETV,EAAgBpH,iBAAiBnC,OAAS,GAC5CkJ,EAAS5F,MAGNkG,EAAUxF,aAAa3G,EAAUiH,iBAAkB,WAEtD,IDxM0C3F,ECwMtC+L,GDxMsC/L,ECwMWwK,IDvM3Db,GAAoB3J,GAAO+I,QACzB,SAACvE,GAAD,OACEA,EAASpF,SAEToF,EAASE,SAASsH,OAChB,SAAClC,GAAD,OAAkBV,GAAuBpJ,GAAO+J,SAASD,UCmMrDmC,EAAmBnD,GACrBc,GAA2BY,MAIvB0B,EAAe9C,GAAuBoB,KACxC2B,EACFD,EAAa7K,QAAUuJ,EAAgBjI,YAAc,GAGvD,GAAIwJ,GAAqB,EAEvB,KAAOA,EAAoB,GAAKF,EAAiB5K,OAAS,GAAG,CAE3D,IAAImD,EAAWzD,EAAWkL,GAEtBG,EACF5H,EAASE,SAASrD,OAAS,EAEvBmD,EAASE,SAASqE,QAAO,SAACe,GAAD,OACvBoC,EAAanC,SAASD,MACtBzI,OACF,EAEF8K,EAAoBC,GAAgB,IACtCL,EAAalI,KAAKW,GAClB2H,GAAqBC,QAKzBL,EAAeA,EAAaM,OAAOJ,GAIrC,GAAIF,EAAa1K,QAAU,EAEzB,IAAK,IAAIkD,EAAS,EAAGA,GAAU,EAAGA,IAChCgG,EACEjG,EACEC,EACAxD,EAAWgL,GACXnB,EAAgBjI,YAAc4B,EAAS,SAM7CuG,GAAkB,EAClBC,EAAkB,uBApDkC,GA0DxD,IAAMvH,EAAmB4G,GACvBI,KACAhH,iBACF+G,EACEE,GACEtB,IACA,SAACzB,GAAD,OACGlE,EAAiBuG,SAASrC,EAAQ/G,QAClCiK,EAAgBjI,YAAc,GAC7B+E,EAAQhB,WACPmE,EAAUxF,aAAa3G,EAAUiH,kBACjCkF,EAAUxF,aAAa3G,EAAUgH,cACtCjD,IAGJ,MAEF,KAAK/D,EAAU4N,eAETzB,EAAU7F,YAAY3D,OAAS,GAAGkJ,EAAS/C,MAG/C,IAAI+E,GDlUoCvM,ECkUewK,IDjU3DrB,GAAmBnJ,GAAO+I,QAAO,SAACC,GAAD,OAAWA,EAAM5J,SAAW4J,EAAMtC,aCkU3DiB,EAAemB,GAAcuB,GAAoBG,MAG/CgC,EDlUkC,SAACxM,GAAD,OAC5CmJ,GAAmBnJ,GAAO+I,QAAO,SAACC,GAAD,OAAWA,EAAM5J,UAAY4J,EAAMtC,YCiUtC+F,CAA+BjC,KAEnDkC,EAAuBH,EAC1BF,OAAOG,GACPG,QACC,SAACC,EAAOlF,GAAR,OAAqBA,EAAQE,WAAagF,EAAQ,EAAIA,IACtD,GAIJ,GACEL,EAAmBlL,OAAS,GAC5BsG,EAAatG,QAAUqL,GACvBH,EAAmBlL,OAASmL,EAAkBnL,QAC5CuJ,EAAgBjI,YAAc,EAChC,CAEA4H,EACE9C,GAAiB1G,EAAWwL,GAAqB5E,IAGnD4E,EAAqBA,EAAmBF,OAAOG,GAE/C,IAAK,IAAIvL,EAAI,EAAGA,EAAI2J,EAAgBjI,YAAa1B,IAC/CsJ,EACE9C,GAAiB1G,EAAWwL,GAAqB5E,IAKrD4C,EAAS1C,GAAsB+C,EAAgBjI,YAAc,SAG7DmI,GAAkB,EAIhBC,EADgC,IAA9BwB,EAAmBlL,OACH,0BACTsG,EAAatG,OAASqL,EACb,uBAEA,sBAGtB,MAEF,KAAKhO,EAAUiI,cAEwB,MAAjCkE,EAAUzF,sBACZ0F,GAAkB,EAClBC,EAAkB,mBAEpB,MAEF,KAAKrM,EAAU6G,SAEbuF,GAAkB,EAKlBF,EAAgB9H,eAAiBiI,GACnCR,EAASzG,EAAgBiH,IAIvBD,GACFP,EAASjE,Q,mDCzbAuG,GAAiB,kBAAMC,EAAAA,EAAAA,OACvBC,GAAkDC,EAAAA,GCJ/D,GAAuB,mBAAvB,GAAqD,uBCkB/CC,GAKF,CACFC,IAAK,CACHC,IAAK,YACLvL,M,0yKAEFwL,MAAO,CACLD,IAAK,cACLvL,M,kvQAEFyL,OAAQ,CACNF,IAAK,eACLvL,M,06KAEF0L,IAAK,CACHH,IAAK,gBACLvL,M,kpXAEF2L,KAAM,CACJJ,IAAK,iBACLvL,M,klXAEF4L,KAAM,CACJL,IAAK,iBACLvL,M,0wYAEF6L,SAAU,CACRN,IAAK,qBACLvL,M,0tWAEF8L,OAAQ,CACNP,IAAK,mBACLvL,M,85WAEF+L,MAAO,CACLR,IAAK,kBACLvL,M,0xRAEFgM,IAAK,CACHT,IAAK,gBACLvL,M,86XAEFiM,MAAO,CACLV,IAAK,kBACLvL,M,+1UASSkM,GAA4B,SAAC,GAAwB,IAAD,IAArBC,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,SACxCC,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WAGFG,GAAUzP,GAFFC,EAAAA,EAAAA,KAAND,GAES,UAACsO,GAASc,UAAV,aAAC,EAAgBZ,KAClC,OACE,iCACE,gBACEtO,UAAWwP,IAAAA,CAAWvP,IAAD,WAAiBA,IAAmBmP,IACzDlP,IAAG,UAAEkO,GAASc,UAAX,aAAE,EAAgBnM,MACrB3C,IAAKmP,EACLE,MAAOF,IAERJ,MCvFMO,GAAiB,CAC5BC,KAAK,SAACV,GAAD,CAAMC,KAAK,QAChBU,MAAM,SAACX,GAAD,CAAMC,KAAK,SACjBW,MAAM,SAACZ,GAAD,CAAMC,KAAK,SACjBY,UAAU,SAACb,GAAD,CAAMC,KAAK,aACrBa,KAAK,SAACd,GAAD,CAAMC,KAAK,QAChBc,QAAQ,SAACf,GAAD,CAAMC,KAAK,WACnBe,OAAO,SAAChB,GAAD,CAAMC,KAAK,UAClBgB,QAAQ,SAACjB,GAAD,CAAMC,KAAK,WACnBiB,OAAO,SAAClB,GAAD,CAAMC,KAAK,UAClBkB,KAAK,SAACnB,GAAD,CAAMC,KAAK,QAChBmB,OAAO,SAACpB,GAAD,CAAMC,KAAK,WCZpB,MCAA,GAAuB,mBAAvB,GAAqD,uBAArD,GAAoF,oBAApF,GAAmH,uBCK7GoB,GAAiC,CACrClB,YAAY,GAGDE,IAAciB,EAAAA,GAAAA,eAAcD,IAC5BE,GAAelB,GAAYmB,SCc3BC,GAA4B,SAAC,GAUnC,IATLvJ,EASI,EATJA,KACAwJ,EAQI,EARJA,YACAC,EAOI,EAPJA,eACAC,EAMI,EANJA,YACAC,EAKI,EALJA,QACAC,EAII,EAJJA,kBACAC,EAGI,EAHJA,mBACAC,EAEI,EAFJA,WACA9B,EACI,EADJA,SAEA,EAAsCjB,GAAerD,IAA7C5E,EAAR,EAAQA,YAAaO,EAArB,EAAqBA,aACrB,GAAoBzG,EAAAA,EAAAA,KAAZD,EAAR,EAAQA,EAAGoR,EAAX,EAAWA,KACLC,GAAiBC,EAAAA,GAAAA,QAAoB,MAGrChC,EAAanJ,IAAgBkB,EAE7BkK,EAAepL,GAAekB,IAASX,EAAaW,IAG1DmK,EAAAA,GAAAA,YAAU,WAAO,IAAD,EACVlC,IACF,UAAA+B,EAAeI,eAAf,SAAwBC,eAAe,CACrCC,SAAUC,OAAOC,WAAW,4BAA4BC,QACpD,OACA,eAKV,IAAIC,EAA2B,KAC3BC,EAA8B,KAIlC,GAAIT,EAAc,CAAC,IAAD,EAEVU,EAAkB,aAAelS,EAAUsH,GAAQ,UACzD,OAAIwJ,QAAJ,IAAIA,EAAAA,EAAeO,EAAKc,OAAOD,MAC7BF,EAAY/R,EAAEiS,EAAiBf,IAGjC,IAAMiB,EAAqB,aAAepS,EAAUsH,GAAQ,aAC5D,iBAAIyJ,QAAJ,IAAIA,EAAAA,EAAkBC,SAAtB,QAAqCK,EAAKc,OAAOC,MAC/CH,EAAehS,EAAC,OAAC+Q,QAAD,IAACA,EAAAA,EAAeoB,EAAoBjB,IAYxD,OARAM,EAAAA,GAAAA,YAAU,WACJlC,IAEF8C,SAASzC,OACNoC,GAAaC,GAAgBD,GAAaC,GAAgB,MAAQ,IACnEhS,EAAE,sBACL,CAACsP,EAAYyC,EAAWC,EAAchS,IAElCuR,GACL,SAACb,GAAD,CAAcrG,MAAO,CAAEiF,WAAAA,GAAvB,UACE,qBACEpP,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAEtB+C,IAAKhB,EAJP,UAMGU,IAAa,eAAI7R,UAAWC,GAAf,SAA8B4R,IAC3CC,IAAgB,gBAAI9R,UAAWC,GAAf,UAAiC6R,EAAjC,OAChBf,EAAoB5B,EAAW,MAChC,SAACiD,GAAA,EAAD,CACEC,QAAO,OAAEvB,QAAF,IAAEA,EAAAA,EAAW,aAAejR,EAAUsH,GAAQ,QACrD4G,MAAK,OAAEiD,QAAF,IAAEA,OAAF,EAAEA,EAAoBjD,MAC3BuE,SAAUtB,EACVC,YAAU,kBAAOvB,IAAmBuB,KAEpCF,EAA+B,KAAX5B,OAGxB,MAGNuB,GAAK6B,aAAe,CAClBxB,mBAAmB,GCzGrB,ICDIyB,GDCJ,MEAA,GAA4B,4BAA5B,GAAmE,2BAAnE,GAAsG,wBAAtG,GAAyI,2BCAzI,GCaiD,SAAC,GAI3C,IAHLC,EAGI,EAHJA,GACAnC,EAEI,EAFJA,aACAoC,EACI,EADJA,SAEQzO,EAAiBiK,GAAe3C,IAAhCtH,aACAmL,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACR,OAAOkB,GAAgBlB,GACrB,iBACEpP,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAFxB,WAKE,kBACEqD,GAAIA,EACJE,KAAK,WACL3S,UAAWC,GACX2S,eAAc,OAAEtC,QAAF,IAAEA,GAAAA,EAChBuC,UAAWzD,EACXsD,SAAU,SAACI,GAAD,OAAOJ,EAASI,EAAEC,OAAOC,UACnC,kBAAc5D,IAAcnL,SAAsBjB,EAClD,oBAAmBoM,GAAcnL,EAAe,gBAAajB,KAE/D,kBAAOiQ,QAASR,EAAIzS,UAAWC,GAA/B,UACE,SAACmS,GAAA,EAAD,CAAOC,QAAS,SAAWI,SAG7B,MCxCN,GAA2B,kCAA3B,GAAwE,kCAAxE,GAAsH,mCAAtH,GAAmK,iCAAnK,GAA6M,gCAA7M,GAAqP,+BAArP,GAA4R,+B,gECA5R,GCmB+B,YAMD,IAL5BS,EAK2B,EAL3BA,SACAtR,EAI2B,EAJ3BA,gBACAuR,EAG2B,EAH3BA,YACAC,EAE2B,EAF3BA,aACAC,EAC2B,EAD3BA,SAEMpC,EAAa/C,GAAegF,GAC1BjP,EAAiBiK,GAAe3C,IAAhCtH,aACFyH,EAAWsC,KACToB,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACR,GAAoBrP,EAAAA,EAAAA,KAAZD,EAAR,EAAQA,EAAGoR,EAAX,EAAWA,KAGLoC,GAAmBC,EAAAA,GAAAA,UAAQ,WAE/B,IAAMC,EAAcvC,EAAW/M,KAAI,SAACzC,GAAD,eAAC,UAC/BA,GAD8B,IAEjCgS,MAAO3T,EAAEqT,EAAY1R,SAOvB,OAHK4R,GACHG,EAAYE,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEF,MAAMI,cAAcD,EAAEH,MAAOvC,EAAK4C,aAE1DN,IACN,CAACvC,EAAYnR,EAAGqT,EAAaE,EAAUnC,EAAK4C,WAE/C,OACE,gBACE9T,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAFxB,SAKGkE,EAAiBpP,KAAI,SAACzC,GACrB,GAAIA,EAAUlB,SAAW6O,EAAY,CAAC,IAAD,EAC7B2E,EAAqBX,EACvBA,EAAa3R,GACb,KACEuS,EAAwC,MAAtBD,EACxB,OACE,oBAEE/T,UAAWwP,IAAAA,CAAWvP,IAAD,gBAClBA,GAAiBmP,GAAc3N,EAAUlB,UADvB,UAElBN,GAAgBmP,GAAc4E,GAFZ,IAIrBC,QAAS,kBAEHvI,EADJsI,EACa/O,EAAgB8O,GAChBnS,EAAgBH,EAAUK,QAEzC+Q,UAAWzD,EACXK,MACEL,GAAc4E,EACVlU,EAAEiU,QACF/Q,EAENkR,SAAU9E,GAAc4E,GAAmB,OAAIhR,EAC/CmR,KAAK,SACL,eAAc1S,EAAUlB,QACxB,gBAAe6O,EAAa4E,OAAkBhR,EAC9C,aAAYoM,EAAa3N,EAAUgS,WAAQzQ,EAC3C,kBAAcoM,IAAcnL,SAAsBjB,EAClD,oBACEoM,GAAcnL,EAAe,gBAAajB,EAxB9C,WA2BE,gBACEhD,UAAWC,GACXC,IACEuB,EAAUsB,MACNpC,gCAAsCc,EAAUsB,MAChDqR,GAENhU,IAAI,GACJ,cAAY,UAEd,gBAAKJ,UAAWC,GAAhB,UACE,0BAAOwB,EAAUgS,YArCdhS,EAAUK,MA0CrB,OAAO,WCvGf,GAA2B,gCAA3B,GAAqE,+BAArE,GAA+G,gCAA/G,GAAwJ,8BAAxJ,GAA8L,6BAA9L,GAAkO,4BAAlO,GAAsQ,6BAAtQ,GAA8S,gCAA9S,GAAsV,6BAAtV,GAAiY,mCAAjY,GAAsb,uCAAtb,GAAqe,6BAAre,GAAihB,oCPC7gBuS,GAAY,CAAC,QAAS,WAE1B,SAASC,KAA2Q,OAA9PA,GAAWhT,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkBuB,GAASO,MAAMC,KAAMN,WAEhT,SAASO,GAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxMoC,CAA8BV,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASwC,GAAYC,EAAMC,GACzB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQZ,GAAyBS,EAAMnB,IAE3C,OAAoB,iBAAoB,MAAOC,GAAS,CACtD7B,GAAI,SACJmD,MAAO,6BACPC,WAAY,+BACZC,EAAG,MACHC,EAAG,MACHC,QAAS,YACTC,MAAO,CACLC,iBAAkB,iBAEpBC,SAAU,WACVhE,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM+C,KAAUA,GAAqB,iBAAoB,OAAQ,CAC3E7L,KAAM,eACNyP,EAAG,0+BAIP,IAAIC,GAA0B,cAAiBd,IQrC/C,IRsCe,IQtCa,4BAA5B,GAAkE,0BAAlE,GAAoG,uBAApG,GAAoI,wBAApI,GAA0K,6BAA1K,GAAiN,yBCWpMe,GAAkC,SAAC,GAAc,IAAD,EAAXC,EAAW,EAAXA,KACxChQ,EAAwB2H,GAAerD,IAAvCtE,oBACFJ,EAAc+H,GAAezD,IAC3B2E,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACAtP,GAAMC,EAAAA,EAAAA,KAAND,EAEF0W,EACmB,MAAvBjQ,EAA8BJ,EAAYI,GAAqBgQ,GAAQ,EACzE,OACE,iBACEvW,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAFxB,WAKE,iBAAMpP,UAAWC,GAAjB,SAAgCH,EAAE,SAAWyW,MAC7C,iBACEvW,UAAWwP,IAAAA,EAAU,gBAClBvP,GAAgBuW,EAAY,IADV,UAElBvW,GAAmC,IAAduW,IAFH,UAGlBvW,GAAiBuW,EAAY,GAHX,IADvB,SAOG1W,EAAE,uBAAyB0W,SC3BvBC,GAAoC,SAAC,GAAD,IAAGtU,EAAH,EAAGA,KAAMgN,EAAT,EAASA,SAAT,OAC/C,8BACGhN,EAAK+B,KAAI,SAACwS,EAAMC,GAAP,OACR,SAAC,GAAD,CAAkBzH,KAAMwH,EAAxB,SACGC,EAAQxU,EAAKK,OAAS,EAAI2M,OAAWnM,GAD7B2T,SAOjBF,GAASlE,aAAe,CACtBpD,SAAU,MCjBZ,UCAA,GAA4B,kCAA5B,GAAsE,8BAAtE,GAA+G,iCCQzGyH,GAEF,CACFC,SAAU,QACVC,UAAW,gBACXC,OAAQ,cAOGC,GAAgD,SAAC,GAEvD,IADLvV,EACI,EADJA,UAEQ8E,EAAwB2H,GAAerD,IAAvCtE,oBACFJ,EAAc+H,GAAezD,IAC3B2E,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACAtP,GAAMC,EAAAA,EAAAA,KAAND,EAEFmX,EACmB,MAAvB1Q,EACIJ,EAAYI,GAAqB9E,GACjC,EAEN,GAAIwV,EAAiB,EAAG,CAEtB,IAAMC,EACJ/Q,EAAYI,GAAsBqQ,GAAYnV,IAChD,OACE,iBACEzB,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAFxB,WAKE,gBACEpP,UAAWC,GACXC,IACEgX,EACIvW,gCAAsCuW,EACtC9C,GAENhU,IAAI,GACJ,cAAY,SACX,IAdL,OAgBGN,EAAE,aAAe2B,EAAW,CAC3BsM,MAAOkJ,OAKf,OAAO,MCzCIE,GAA0B,WACrC,MACEjJ,GAAerD,IADTtE,EAAR,EAAQA,oBAAqBH,EAA7B,EAA6BA,kBAEvBD,EAAc+H,GAAezD,IAC3BxG,EAAiBiK,GAAe3C,IAAhCtH,aACFyH,EAAWsC,KACToB,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACAtP,GAAMC,EAAAA,EAAAA,KAAND,EAEFsX,EAAkE,SACtEC,GAEA,IAEIC,EAUkB,EAZhBC,EAAY,OAAGhR,QAAH,IAAGA,EAAAA,EAAuB,EACtCiR,EAAWrR,EAAY3D,QAAU4D,EAAoB,EAAI,IAG7C,eAAdiR,EAAM/I,KAAsC,cAAd+I,EAAM/I,KACtCgJ,EAAWC,EAAe,GACXC,IAAUF,EAAW,GACb,cAAdD,EAAM/I,KAAqC,YAAd+I,EAAM/I,MAC5CgJ,EAAWC,EAAe,GACX,IAAGD,EAAWE,GAGf,MAAZF,KACFD,EAAMI,iBACN/L,EAASzC,GAAuBqO,IAEhC,UAAAD,EAAMK,cAAcC,kBAApB,SAAgCxI,SAASmI,GAAUM,UAIjDC,EAAY1R,EAAY3D,OAAS,EACjCsV,EACmB,MAAvBvR,EAA8BJ,EAAYI,GAAuB,KACnE,OACE,iCACE,gBACEvG,UAAWC,GACXkU,KAAK,aACL,aAAYrU,EAAE,oCACd,gBAAc,OACd,kBAAcsP,IAAcnL,SAAsBjB,EAClD,oBAAmBoM,GAAcnL,EAAe,gBAAajB,EAC7D,iBAAgBoM,EAPlB,SASGjJ,EAAYjC,KAAI,SAAC2E,EAAS8N,GAAW,IAAD,EAE7BoB,EAAclP,EAAQlB,SACxB7H,EAAE,YAAc+I,EAAQlB,SAAS7F,KAAO,SACxC,KACAhC,EAAE,WAAa+I,EAAQyF,IAAM,SAC7B,IACAxO,EAAE,WAAa+I,EAAQyF,IAAM,SAE3B0J,EAAenP,EAAQlB,SACzBkB,EAAQlB,SAAS5E,MACjB8F,EAAQ9F,MACZ,OACE,oBAEE/C,UAAWwP,IAAAA,CAAWvP,IAAD,gBAClBA,GAAkB4I,EAAQhB,WADR,UAElB5H,GAAkB0W,IAAUpQ,IAFV,UAGlBtG,GAAgBmG,GAAqBuQ,IAAUkB,GAH7B,IAKrB5D,QAAS,WACH0C,IAAUpQ,GAEVmF,GADGtF,GAAqBuQ,EAAQkB,EACvB5O,GAAuB0N,GAEvB1R,EAAgB,yBAI/B4N,UAAWzD,EACXK,MACEL,GAAchJ,GAAqBuQ,IAAUkB,EACzC/X,EAAE,4BACFkD,EAENmR,KAAK,QACL,eAAcwC,IAAUpQ,EACxB,gBACE6I,EACIhJ,GAAqBuQ,IAAUkB,OAC/B7U,EAEN,aACEoM,EACI2I,EAAclP,EAAQhB,SACpB,KAAO/H,EAAE,kBAAoB,IAC7B,QACFkD,EAGNkR,SACE9E,EACIuH,KAAK,OAAMpQ,QAAN,IAAMA,EAAAA,EAAuB,GAChC,GACC,OACHvD,EAENiV,UAAWb,EA5Cb,WA8CE,gBACEpX,UAAWC,GACXC,IACE8X,EACIrX,gCAAsCqX,EACtC5D,GAENhU,IAAI,GACJ,cAAY,UAEd,gBAAKJ,UAAWC,GAAhB,UACE,kBAAMD,UAAWC,GAAjB,UACG4I,EAAQhB,UACP,iCACE,SAAC,GAAD,CACE7H,UAAWC,GACXwP,MAAO3P,EAAE,oBACR,OAEH,KACHiY,SAjEAlP,EAAQ/G,WAwEpBsN,GAAc0I,GACb,iBAAK9X,UAAWC,GAAhB,WACE,iBAAKD,UAAWC,GAAhB,WACE,SAACqW,GAAD,CAASC,KAAK,gBACd,SAACD,GAAD,CAASC,KAAK,YACd,SAACD,GAAD,CAASC,KAAK,gBACd,SAACD,GAAD,CAASC,KAAK,iBAEhB,4BACE,iBAAKvW,UAAWC,GAAhB,WACE,SAAC+W,GAAD,CAAgBvV,UAAU,cAC1B,SAACuV,GAAD,CAAgBvV,UAAU,eAC1B,SAACuV,GAAD,CAAgBvV,UAAU,cAE3BqW,EAAgBnQ,WACf,iCACE,0BACE,8BAAS7H,EAAE,uBAAX,OAA6C,KAC7C,SAAC,GAAD,CAAUqC,KAAM2V,EAAgBnQ,SAASuQ,gBAF3C,QAIA,0BACE,8BACGpY,EAAE,uBADL,IAC8B,IAC3BA,EAAE,YAAcgY,EAAgBnQ,SAAS7F,KAAO,WAFnD,OAIU,KACV,SAACsQ,GAAA,EAAD,CACEC,QACE,YAAcyF,EAAgBnQ,SAAS7F,KAAO,UAEhDmP,WAAYvB,YAKpB,eAAI1P,UAAWC,GAAf,SACGH,EAAE,WAAagY,EAAgBxJ,IAAM,oBAExC,SAAC8D,GAAA,EAAD,CAAOC,QAAS,WAAayF,EAAgBxJ,IAAM,mBAGrD,SChMV,GAA4B,kCAA5B,GAAsE,8BAAtE,GAA6G,+BAA7G,GAAoJ,8BAApJ,GAA0L,8BCA1L,GCc6D,SAAC,GAMvD,IALLmE,EAKI,EALJA,GACAtI,EAII,EAJJA,MACAgO,EAGI,EAHJA,OACAC,EAEI,EAFJA,OACA1F,EACI,EADJA,SAEQzO,EAAiBiK,GAAe3C,IAAhCtH,aACAmL,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WAIFiJ,EAAgB,SAACC,GACrB,IAAMC,EAAWpO,EAAQmO,EACrBC,GAAYJ,GAAUI,GAAYH,GAAQ1F,EAAS6F,IAsBzD,OACE,iBAAKvY,UAAWC,GAAhB,WACE,kBAAOgT,QAASR,EAAIzS,UAAWC,GAA/B,UACE,SAACmS,GAAA,EAAD,CAAOC,QAAS,SAAWI,MAE5BrD,GACC,iCACE,mBAAQpP,UAAWC,GAAegU,QAAS,kBAAMoE,GAAe,IAAhE,gBAGA,kBACE5F,GAAIA,EACJ+F,UAAU,UACVxY,UAAWC,GACXkK,MAAOA,EACPsO,KAzCG,EA0CH/F,SAnCY,SAAC2E,GACrB,IAAMqB,EAAWrB,EAAMtE,OAAO5I,MAC1BoO,EAAWI,OAAOD,GAEtB,IAAKE,MAAML,GAGT,IAAK,IAAIM,EAdA,EAceA,EAAS,EAAGA,IAGlC,IAFAN,EAAWI,OAAOD,EAASI,UAAUJ,EAASlW,OAASqW,MAEvCT,EAAQ,CAElBG,GAAYJ,GAAQzF,EAAS6F,GACjC,QAuBE,kBAAcnJ,IAAcnL,SAAsBjB,EAClD,oBACEoM,GAAcnL,EAAe,gBAAajB,KAG9C,mBAAQhD,UAAWC,GAAegU,QAAS,kBAAMoE,EAAc,IAA/D,mBAKF,iBAAM5F,GAAIA,EAAIzS,UAAWC,GAAzB,SACGkK,QC9EX,GAA4B,8BAA5B,GAAmE,2BAAnE,GAAsG,0BAAtG,GAAwI,0BAAxI,GAA6K,6BCahK4O,GAAwC,SAAC,GAI/C,IAHLtG,EAGI,EAHJA,GACAnC,EAEI,EAFJA,aACAoC,EACI,EADJA,SAEQzO,EAAiBiK,GAAe3C,IAAhCtH,aACAmL,GAAeC,EAAAA,GAAAA,YAAWC,IAA1BF,WACR,OACE,sBACEtM,KAAM2P,EACNzS,UAAWwP,IAAAA,CAAWvP,IAAD,WAClBA,IAAmBmP,IAEtByD,UAAWzD,EACX,gBAAc,OACd,kBAAcA,IAAcnL,SAAsBjB,EAClD,oBAAmBoM,GAAcnL,EAAe,gBAAajB,EAR/D,WAUIsN,GAAgBlB,GAChB,iBAAKpP,UAAWC,GAAhB,WACE,kBACE6C,KAAM2P,EACNA,GAAIA,EAAK,QACTE,KAAK,QACL3S,UAAWC,GACX+S,SAAU1C,EACVoC,SAAU,kBAAMA,GAAS,OAE3B,kBAAOO,QAASR,EAAK,QAASzS,UAAWC,GAAzC,UACE,SAACmS,GAAA,EAAD,CAAOC,QAAS,SAAWI,EAAK,gBAGlC,KACHnC,GAAgBlB,GACf,iBAAKpP,UAAWC,GAAhB,WACE,kBACE6C,KAAM2P,EACNA,GAAIA,EAAK,OACTE,KAAK,QACL3S,UAAWC,GACX+S,QAAS1C,EACToC,SAAU,kBAAMA,GAAS,OAE3B,kBAAOO,QAASR,EAAK,OAAQzS,UAAWC,GAAxC,UACE,SAACmS,GAAA,EAAD,CAAOC,QAAS,SAAWI,EAAK,eAGlC,SAKVsG,GAAWxG,aAAe,CACxBjC,cAAc,GClEhB,ICDI,GDCJ,MEAA,GAA4B,4BDCxB,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAWhP,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkB,GAAS8B,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxM,CAA8B0B,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASiG,GAAWxD,EAAMC,GACxB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQ,GAAyBH,EAAM,IAE3C,OAAoB,iBAAoB,MAAO,GAAS,CACtDI,MAAO,6BACPI,QAAS,cACT7D,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM,KAAU,GAAqB,iBAAoB,OAAQ,CAC3E9I,KAAM,eACNyP,EAAG,+aAIP,IAAI,GAA0B,cAAiB4C,I,IAChC,I,QE9Bf,GAAyB,uBAAzB,GAA2D,yBAA3D,GAA2F,qBAA3F,GAA4H,0BAA5H,GAAmK,2B,mECYtJC,GAASC,GAAAA,YACpB,WAEE/G,GACI,IAAD,EAFDnS,EAEC,EAFDA,UAAW6S,EAEV,EAFUA,SAAUoB,EAEpB,EAFoBA,QAAShF,EAE7B,EAF6BA,KAAMkK,EAEnC,EAFmCA,SAAUhK,EAE7C,EAF6CA,SAAawG,GAE1D,cACGyD,EAAiBnK,GAAQkK,EACzBE,EAAkBpK,IAASkK,EAC3BG,EAAarK,IAAQ,SAACA,EAAD,CAAMjP,UAAWC,KAC5C,OACE,sCACM0V,GADN,IAEExD,IAAKA,EACLnS,UAAWwP,IAAAA,CAAWvP,GAAeD,GAAhB,WAClBC,GAAkB4S,IAErBoB,QAASpB,OAAW7P,EAAYiR,EANlC,UAQGmF,EAAiBE,EAAa,KAC9BnK,IACC,iBACEnP,UAAWwP,IAAAA,EAAU,gBAClBvP,GAAoBmZ,IADF,UAElBnZ,GAAmBoZ,GAFD,IADvB,SAMGlK,IAGJkK,EAAkBC,EAAa,YAMxCL,GAAO1G,aAAe,CACpB4G,UAAU,GC/CZ,ICDI,GDCJ,MEAA,GCyCkC,WAChC,MAaIjL,GAAe3C,IAZjBzH,EADF,EACEA,YACAC,EAFF,EAEEA,iBACAI,EAHF,EAGEA,eACAC,EAJF,EAIEA,KACAC,EALF,EAKEA,cACAC,EANF,EAMEA,UACAC,EAPF,EAOEA,UACAC,EARF,EAQEA,UACAC,EATF,EASEA,UACAC,EAVF,EAUEA,UACAC,EAXF,EAWEA,iBACAX,EAZF,EAYEA,YAEF,EACEkK,GAAerD,IADTvE,EAAR,EAAQA,mBAAoBC,EAA5B,EAA4BA,oBAAqBF,EAAjD,EAAiDA,cAEzCG,EAAiB0H,GAAerD,IAAhCrE,aAEFX,EAAWqI,GAAe5D,IAC1BiP,EAAOrL,GAAe9C,IACtBlH,EAAMgK,GAAe7C,IACrBgC,EAAea,GAAe3D,IAC9BpE,EAAc+H,GAAezD,IAC7B+O,EACmB,MAAvBjT,EACIJ,EAAYI,GAAqBoB,cACjC3E,EAEA0I,EAAWsC,KACXyL,ErChEwB,WAC9B,IAAQzV,EAAgBkK,GAAe3C,IAA/BvH,YACR,OAAO,SAAC0V,GACN,GAAI1V,EAAYxB,OAAS,EAAG,CAC1B,IAAImU,GAAS+C,EACb,GACE/C,GAAS3S,EAAYxB,aACdmU,EAAQ,GACjB,OAAO3S,EAAY2S,GAErB,OAAO,GqCsDagD,GACd7Z,GAAMC,EAAAA,EAAAA,KAAND,EAER,OACE,kBAAME,UAAWC,GAAjB,WACE,UAAC,GAAD,CAAMkH,KAAMtH,EAAUqG,iBAAtB,WACE,SAAC,GAAD,CACEgN,SAAU7I,GACVzI,gBAAiB6J,GACjB0H,YAAa,SAAC9R,GAAD,MAAe,aAAeA,EAAUS,MACrDsR,aAAc,SAAC/R,GAAD,OAEZA,EAAUR,KAAO,8BAAgC,MAEnDwS,UAAU,KAEZ,SAAC,GAAD,CACEZ,GAAG,iBACHnC,cAAe9J,EAAa3G,EAAUgH,WACtC6L,SAAU,SAACM,GAAD,OACRtH,EAASnD,GAAU1I,EAAUgH,WAAYmM,WAI/C,UAAC,GAAD,CAAM7L,KAAMtH,EAAU6M,YAAtB,WACE,SAAC,GAAD,CACE+F,GAAG,cACHtI,MAAOrG,EACPqU,OAAQ3R,EAAa3G,EAAUgH,WAAa,EAAI,EAChDuR,OAAQvS,EAASrD,OAAS,EAC1BkQ,SAAU,SAACvI,GAAD,OAAWuB,EAAS9G,EAAeuF,QAE/C,SAAC,GAAD,CACEsI,GAAG,mBACHnC,aAAcvM,EACd2O,SAAU,SAACvI,GAAD,OAAWuB,EAAS7G,EAAesF,WAGjD,UAAC,GAAD,CAAMhD,KAAMtH,EAAU+M,UAAtB,WACE,SAAC,GAAD,CACEsG,SAAU9H,GACVxJ,gBAAiB4H,GACjB2J,YAAa,SAACjP,GAAD,MAAS,OAASA,EAAIpC,KAAO,WAE3CyX,EAAKvO,MAAK,SAAC9G,GAAD,OAASA,EAAIqB,UAAYrB,EAAI3D,YACtC,SAAC,GAAD,CACEkS,GAAG,iBACHnC,aAAcnM,EACduO,SAAU,SAACM,GAAD,OAAatH,EAASxG,EAAkB8N,OAElD,SAEN,SAAC,GAAD,CACE7L,KAAMtH,EAAU+Z,SAChB/I,YAAa,eAAS3M,QAAT,IAASA,OAAT,EAASA,EAAKpC,MAAO,cAClCgP,QAAS,eAAS5M,QAAT,IAASA,OAAT,EAASA,EAAKpC,MAAO,SAC9BkP,mBAAoB,CAAE9M,IAAKA,GAAOpE,EAAE,OAASoE,EAAIpC,KAAO,aAE1D,SAAC,GAAD,CACEqF,KAAMtH,EAAUiN,iBAChB+D,YAAa,oBAAc3M,QAAd,IAAcA,OAAd,EAAcA,EAAKqB,UAAW,cAC3CuL,QAAS,eAAS5M,QAAT,IAASA,OAAT,EAASA,EAAKpC,MAAO,iBAC9BkP,mBAAoB,CAAE6I,QAAO,OAAE3V,QAAF,IAAEA,OAAF,EAAEA,EAAKpC,SAEtC,SAAC,GAAD,CAAMqF,KAAMtH,EAAUuM,WAAtB,UACE,SAAC,GAAD,CACE8G,SAAU9I,GACVxI,gBAAiB6B,EACjB0P,YAAa,SAAC/O,GAAD,MAAU,QAAUA,EAAKtC,KAAO,cAGjD,SAAC,GAAD,CACEqF,KAAMtH,EAAUia,UAChBnJ,YAAanK,EAAa3G,EAAUuM,YACpCwE,gBAAiBpK,EAAa3G,EAAUuM,YACxCyE,YAAa,QAAUzM,EAAO,cAC9B0M,QAAS,QAAU1M,EAAO,SAC1B4M,mBAAoB,CAClB6I,QAAS/V,EAAc,EAAI,iBAAcd,MAG7C,SAAC,GAAD,CAAMmE,KAAMtH,EAAUgH,aACtB,UAAC,GAAD,CACEM,KAAMtH,EAAUyM,gBAChB0E,mBAAoB,CAClB6I,QAAS1V,GAAc,OAAID,QAAJ,IAAIA,GAAAA,EAAKqB,SAAW,mBAAgBvC,GAH/D,WAME,SAAC,GAAD,CACEyP,GAAG,gBACHtI,MAAO9F,EACP8T,OAAQ,EACRC,OAAQ,EACR1F,SAAU,SAACvI,GAAD,OAAWuB,EAASrG,EAAiB8E,OAEhD9F,EAAgB,GACf,SAAC,GAAD,CACE6O,SAAU/H,GACVvJ,gBAAiB0H,GACjB6J,YAAa,SAAC5N,GAAD,MAAc,YAAcA,EAASzD,KAAO,SACzDsR,aAAc,SAAC7N,GAAD,OAEZA,EAASwH,WAAajJ,EAClB,iCAEFK,GAAkBoB,EAASzD,QAAT,OAAkBoC,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAKqB,UACvC,wBACA,QAGN,SAEN,SAAC,GAAD,CACE4B,KAAMtH,EAAU0M,eAChBsE,YAAa,YAAcvM,EAAY,cACvCwM,QAAS,YAAcxM,EAAY,SACnC0M,mBAAoB,CAClB6I,QAAO,OAAE3V,QAAF,IAAEA,OAAF,EAAEA,EAAKpC,KACdiM,MAAO0L,EAAc,OAGzB,SAAC,GAAD,CACEtS,KAAMtH,EAAU2M,eAChBqE,YAAa,YAActM,EAAY,cACvCuM,QAAS,YAAcvM,EAAY,SACnCyM,mBAAoB,CAClB6I,QAAO,OAAE3V,QAAF,IAAEA,OAAF,EAAEA,EAAKpC,KACdiM,MAAO0L,EAAc,OAGzB,UAAC,GAAD,CAAMtS,KAAMtH,EAAU4M,gBAAtB,WACE,SAAC,GAAD,CACEgG,GAAG,mBACHnC,cAAe9J,EAAa3G,EAAUiH,gBACtC4L,SAAU,SAACM,GAAD,OACRtH,EACEnD,GACE,CACE1I,EAAUiH,eACVjH,EAAUkH,eACVlH,EAAUmH,eACVnH,EAAUoH,oBAEX+L,OAKPxM,EAAa3G,EAAUiH,gBAgBrB,MAfF,SAAC,GAAD,CACEoM,SAAUpI,GACVlJ,gBAAiBwH,GACjB+J,YAAa,SAACxN,GAAD,MAAc,YAAcA,EAAS7D,KAAO,SACzDsR,aAAc,SAACzN,GAAD,OAEZ7B,GAAeuJ,EAAa7K,OAAS,GAErCmD,EAASE,SAASmF,MAAK,SAACnC,GAAD,OACrBwE,EAAanC,SAASrC,MAEpB,gCACA,YAKZ,SAAC,GAAD,CACE1B,KAAMtH,EAAUiH,eAChB+J,YAAa,oBAAcrM,QAAd,IAAcA,OAAd,EAAcA,EAAW1C,MAAO,cAC7CgP,QAAS,oBAActM,QAAd,IAAcA,OAAd,EAAcA,EAAW1C,MAAO,SACzCkP,mBAAoB,CAClB6I,QAAkB,OAATrV,QAAS,IAATA,GAAAA,EAAWoB,QAAU,eAAY5C,EAC1C+K,MAAO0L,EAAc,OAGzB,SAAC,GAAD,CACEtS,KAAMtH,EAAUkH,eAChB8J,YAAa,oBAAcpM,QAAd,IAAcA,OAAd,EAAcA,EAAW3C,MAAO,cAC7CgP,QAAS,oBAAcrM,QAAd,IAAcA,OAAd,EAAcA,EAAW3C,MAAO,SACzCkP,mBAAoB,CAClB6I,QAAkB,OAATpV,QAAS,IAATA,GAAAA,EAAWmB,QAAU,eAAY5C,EAC1C+K,MAAO0L,EAAc,OAGzB,SAAC,GAAD,CACEtS,KAAMtH,EAAUmH,eAChB6J,YAAa,oBAAcnM,QAAd,IAAcA,OAAd,EAAcA,EAAW5C,MAAO,cAC7CgP,QAAS,oBAAcpM,QAAd,IAAcA,OAAd,EAAcA,EAAW5C,MAAO,SACzCkP,mBAAoB,CAClB6I,QAAkB,OAATnV,QAAS,IAATA,GAAAA,EAAWkB,QAAU,eAAY5C,EAC1C+K,MAAO0L,EAAc,OAGzB,SAAC,GAAD,CAAMtS,KAAMtH,EAAUoH,qBACtB,SAAC,GAAD,CAAME,KAAMtH,EAAUka,aACtB,UAAC,GAAD,CAAM5S,KAAMtH,EAAU4N,eAAtB,WACE,SAAC,GAAD,CACEyF,SAAU5I,GACV1I,gBAAiBgC,EACjBuP,YAAa,SAACtK,GAAD,MAAa,WAAaA,EAAQyF,IAAM,SACrD8E,aAAc,SAACvK,GAAD,OAEZ/E,EAAc,IACb+E,EAAQhB,UACTrB,EAAa3G,EAAUiH,iBACvBN,EAAa3G,EAAUgH,WACnB,8BAEFlC,EAAiBuG,SAASrC,EAAQ/G,MAChC,yBACA,QAGP+D,EAASmF,MAAK,SAACnC,GAAD,OAAaA,EAAQE,YAAcF,EAAQtI,YACxD,gCACGT,EAAE,0BACH,SAAC,GAAD,CACEoT,SAAU1H,GACV5J,gBAAiB8H,GACjByJ,YAAa,SAACxL,GAAD,MAAc,YAAcA,EAAS7F,KAAO,cAG3D,SAEN,SAAC,GAAD,CACEqF,KAAMtH,EAAUiI,cAChBkJ,mBAAoB,CAAEjD,MAAO/J,EAAYsC,IAF3C,UAIE,SAAC,GAAD,OAEF,SAAC,GAAD,CACEa,KAAMtH,EAAU6H,aAChBmJ,YACyB,MAAvBtK,EACI,WAAaJ,EAAYI,GAAqB+H,IAAM,mBACpDtL,EAEN8N,QACyB,MAAvBvK,EACI,WAAaJ,EAAYI,GAAqB+H,IAAM,cACpDtL,EAENgO,mBAAoB,CAClB6I,QAASxT,EAAgB,qBAAkBrD,EAC3C2E,SACE6R,GACA1Z,EAAE,YAAc0Z,EAAiB1X,KAAO,UAE5CmP,WACEuI,GAAoB,CAClBQ,sBACE,SAAC,GAAD,CAAU7X,KAAMqX,EAAiBtB,cAAc3Q,MAAM,GAAI,KAE3D0S,mBACE,SAAC,GAAD,CACE/K,KACEsK,EAAiBtB,cACfsB,EAAiBtB,cAAc1V,OAAS,SAQtD,SAAC,GAAD,CACE2E,KAAMtH,EAAUqa,kBAChBlJ,mBAAoB,CAClB6I,QAASxT,EAAgB,qBAAkBrD,MAG/C,SAAC,GAAD,CAAMmE,KAAMtH,EAAUsa,cACtB,SAAC,GAAD,CACEhT,KAAMtH,EAAU6G,SAChBsK,mBAAoB,CAAEjD,MAAO/J,EAAY,IAF3C,UAIE,SAAC,GAAD,CACEiL,KAAMmL,GACNjB,UAAU,EACVlF,QAAS,kBAAMvI,EAASxC,OAH1B,SAKGpJ,EAAE,8BCpVAua,IAAQC,EAAAA,EAAAA,IAAe,CAClCtY,QAAS,CACPoC,KAAMmW,EACNlZ,UAAWmZ,EACX3R,QAAS4R,EACT/P,KAAMgQ,GACN/U,SAAUgV,GACVpV,SAAUqV,GACV1W,IAAK2W,GACLvP,MAAOwP,GACPnT,SAAUoT,MCtBd,GAAyB,sBAAzB,GAAwD,sBAAxD,GAA0F,yBAA1F,GAA6H,uBAA7H,GAA4J,qBJCxJ,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAWzZ,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkB,GAAS8B,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxM,CAA8B0B,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASiI,GAASxF,EAAMC,GACtB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQ,GAAyBH,EAAM,IAE3C,OAAoB,iBAAoB,MAAO,GAAS,CACtDI,MAAO,6BACPI,QAAS,cACT7D,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM,KAAU,GAAqB,iBAAoB,OAAQ,CAC3E9I,KAAM,eACNyP,EAAG,yXAIP,IK9BI,GL8BA,GAA0B,cAAiB4E,IM7B/C,IN8Be,IOvBgB,WAC7B,IAAQ/W,EAAiBiK,GAAe3C,IAAhCtH,aAER,GAA0CgX,EAAAA,GAAAA,UAAShX,GAAnD,eAAOiX,EAAP,KAAsBC,EAAtB,KACMzP,EAAWsC,KACTlO,GAAMC,EAAAA,EAAAA,KAAND,EAMR,OAHoB,MAAhBmE,GAAwBA,IAAiBiX,GAC3CC,EAAiBlX,IAGjB,gBACEjE,UAAWwP,IAAAA,CAAWvP,IAAD,WAAmBA,IAAiBgE,IACzD,eAAcA,EACd,YAAU,YAHZ,UAKE,iBAAKjE,UAAWC,GAAhB,WACE,kBAAMwS,GAAG,WAAWzS,UAAWC,GAA/B,UACGib,GAAiBpb,EAAEob,GADtB,QAGA,mBACElb,UAAWC,GACXwP,MAAO3P,EAAE,sBACTmU,QAAS,kBAAMvI,EAASzG,EAAgB,QACxC4N,UAAW5O,EAJb,UAME,SAAC,GAAD,aClCV,GAA4B,2BAA5B,GAAiE,yBAAjE,GAAiG,sBAAjG,GAA+H,uBHC3H,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAW3C,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkB,GAAS8B,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxM,CAA8B0B,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASqI,GAAQ5F,EAAMC,GACrB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQ,GAAyBH,EAAM,IAE3C,OAAoB,iBAAoB,MAAO,GAAS,CACtDI,MAAO,6BACPI,QAAS,cACT7D,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM,KAAU,GAAqB,iBAAoB,OAAQ,CAC3E9I,KAAM,eACNyP,EAAG,ycAIP,II9BI,GJ8BA,GAA0B,cAAiBgF,II5B3C,IJ6BW,II7BC,CAAC,QAAS,YAE1B,SAAS,KAA2Q,OAA9P,GAAW9Z,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkB,GAAS8B,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxM,CAA8B0B,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASsI,GAAQ7F,EAAMC,GACrB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQ,GAAyBH,EAAM,IAE3C,OAAoB,iBAAoB,MAAO,GAAS,CACtDI,MAAO,6BACPI,QAAS,cACT7D,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM,KAAU,GAAqB,iBAAoB,OAAQ,CAC3E9I,KAAM,eACNyP,EAAG,2bAIP,IC9BI,GD8BA,GAA0B,cAAiBiF,IC5B3C,ID6BW,IC7BC,CAAC,QAAS,YAE1B,SAAS,KAA2Q,OAA9P,GAAW/Z,OAAOiT,QAAU,SAAUxB,GAAU,IAAK,IAAI3Q,EAAI,EAAGA,EAAIoS,UAAUhS,OAAQJ,IAAK,CAAE,IAAIqS,EAASD,UAAUpS,GAAI,IAAK,IAAIkM,KAAOmG,EAAcnT,OAAOoT,UAAUC,eAAeC,KAAKH,EAAQnG,KAAQyE,EAAOzE,GAAOmG,EAAOnG,IAAY,OAAOyE,GAAkB,GAAS8B,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEnG,EAAKlM,EAAnE2Q,EAEzF,SAAuC0B,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DnG,EAAKlM,EAA5D2Q,EAAS,GAAQkC,EAAa3T,OAAOkJ,KAAKiK,GAAqB,IAAKrS,EAAI,EAAGA,EAAI6S,EAAWzS,OAAQJ,IAAOkM,EAAM2G,EAAW7S,GAAQ4S,EAASE,QAAQ5G,IAAQ,IAAayE,EAAOzE,GAAOmG,EAAOnG,IAAQ,OAAOyE,EAFxM,CAA8B0B,EAAQO,GAAuB,GAAI1T,OAAO8T,sBAAuB,CAAE,IAAIC,EAAmB/T,OAAO8T,sBAAsBX,GAAS,IAAKrS,EAAI,EAAGA,EAAIiT,EAAiB7S,OAAQJ,IAAOkM,EAAM+G,EAAiBjT,GAAQ4S,EAASE,QAAQ5G,IAAQ,GAAkBhN,OAAOoT,UAAUY,qBAAqBV,KAAKH,EAAQnG,KAAgByE,EAAOzE,GAAOmG,EAAOnG,IAAU,OAAOyE,EAMne,SAASuI,GAAQ9F,EAAMC,GACrB,IAAIhG,EAAQ+F,EAAK/F,MACbiG,EAAUF,EAAKE,QACfC,EAAQ,GAAyBH,EAAM,IAE3C,OAAoB,iBAAoB,MAAO,GAAS,CACtDI,MAAO,6BACPI,QAAS,cACT7D,IAAKsD,EACL,kBAAmBC,GAClBC,GAAQlG,EAAqB,iBAAoB,QAAS,CAC3DgD,GAAIiD,GACHjG,GAAS,KAAM,KAAU,GAAqB,iBAAoB,OAAQ,CAC3E9I,KAAM,eACNyP,EAAG,gOAIP,IAAI,GAA0B,cAAiBkF,IC7B/C,ID8Be,IEpBkB,WAC/B,IAAQxb,GAAMC,EAAAA,EAAAA,KAAND,EACF4L,EAAWsC,KACjB,EACEE,GAAerD,IADT7E,EAAR,EAAQA,UAAWY,EAAnB,EAAmBA,YAAaX,EAAhC,EAAgCA,YAEhC,GAAwCgV,EAAAA,GAAAA,UAAS,GAAjD,eAAO1D,EAAP,KAAqBgE,EAArB,KAEMC,EAAa,EACjBpK,EAAAA,GAAAA,QAA0B,OAC1BA,EAAAA,GAAAA,QAA0B,OAC1BA,EAAAA,GAAAA,QAA0B,OAGtBgG,EAAmB,SACvBC,EACAE,GAEA,IACID,EAYkB,EAbhBE,EAAWgE,EAAWhZ,OAAS,GAGnB,eAAd6U,EAAM/I,KAAsC,cAAd+I,EAAM/I,IACtCgJ,EAAWC,EAAe,EAAIC,EAAW,EAAID,EAAe,EACrC,cAAdF,EAAM/I,KAAqC,YAAd+I,EAAM/I,IAC5CgJ,EAAWC,EAAe,EAAI,EAAIC,EAAWD,EAAe,EACrC,SAAdF,EAAM/I,IACfgJ,EAAW,EACY,QAAdD,EAAM/I,MACfgJ,EAAWE,GAGG,MAAZF,KACFD,EAAMI,iBACN8D,EAAgBjE,GAChB,UAAAkE,EAAWlE,GAAU/F,eAArB,SAA8BqG,UAI5B6D,EAAoC,IAArBzV,EAAUxD,OACzBkZ,EAAsC,IAAvB9U,EAAYpE,OAC3BmZ,EAAmB1V,GAAepG,EAAU6G,SAElD,OACE,mBAAQ1G,UAAWC,GAAnB,UACE,iBAAKD,UAAWC,GAAgBkU,KAAK,UAArC,WACE,SAAC,GAAD,CACElF,KAAM2M,GACN/I,SAAU4I,EACVzb,UAAWC,GACXkS,IAAKqJ,EAAW,GAChBvH,QAAS,WACPvI,EAAS1D,MACTuT,EAAgB,IAElB9L,MAAO3P,EAAE,cACT,gBAAe2b,EAEfvH,SAA2B,IAAjBqD,EAAqB,GAAK,EACpCU,UAAW,SAACnF,GAAD,OAAOsE,EAAiBtE,EAAG,OAExC,SAAC,GAAD,CACE7D,KAAM4M,GACNhJ,SAAU6I,EACV1b,UAAWC,GACXkS,IAAKqJ,EAAW,GAChBvH,QAAS,WACPvI,EAAStD,MACTmT,EAAgB,IAElB9L,MAAO3P,EAAE,cACT,gBAAe4b,EAEfxH,SAA2B,IAAjBqD,EAAqB,GAAK,EACpCU,UAAW,SAACnF,GAAD,OAAOsE,EAAiBtE,EAAG,OAExC,SAAC,GAAD,CACE7D,KAAM6M,GACNjJ,SAAU8I,EACV3b,UAAWC,GACXkS,IAAKqJ,EAAW,GAChBvH,QAAS,WACPvI,EAASrD,MACTkT,EAAgB,IAGlBrH,SAA2B,IAAjBqD,EAAqB,GAAK,EACpCU,UAAW,SAACnF,GAAD,OAAOsE,EAAiBtE,EAAG,IAXxC,SAaGhT,EAAE,2BCxFPic,GAAcC,QACW,cAA7BtK,OAAOuK,SAASC,UAEe,UAA7BxK,OAAOuK,SAASC,UAEhBxK,OAAOuK,SAASC,SAASC,MACvB,2DASC,SAASC,GAAsBC,GACpC,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIC,IAAI5b,wBAAwB+Q,OAAOuK,SAASO,MACpDC,SAAW/K,OAAOuK,SAASQ,OAIvC,OAGF/K,OAAOgL,iBAAiB,QAAQ,WAC9B,IAAMC,EAAQhc,0CAEVob,GAkDV,SAAiCY,EAAeN,GAE9CO,MAAMD,EAAO,CACXE,QAAS,CAAE,iBAAkB,YAE5BC,MAAK,SAACC,GAEL,IAAMC,EAAcD,EAASF,QAAQI,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAY9H,QAAQ,cAG5CoH,UAAUa,cAAcC,MAAMN,MAAK,SAACO,GAClCA,EAAaC,aAAaR,MAAK,WAC7BpL,OAAOuK,SAASsB,eAKpBC,GAAgBb,EAAON,MAG1BoB,OAAM,WACLC,QAAQC,IACN,oEAzEAC,CAAwBjB,EAAON,GAG/BmB,GAAgBb,EAAON,OAM/B,SAASmB,GAAgBb,EAAeN,GACtCC,UAAUa,cACPU,SAASlB,GACTG,MAAK,SAACO,GACLA,EAAaS,cAAgB,WAC3B,IAAMC,EAAmBV,EAAaW,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB5c,QACfmb,UAAUa,cAAce,WAMtB7B,GAAUA,EAAO8B,UACnB9B,EAAO8B,SAASd,GAQdhB,GAAUA,EAAO+B,WACnB/B,EAAO+B,UAAUf,UAO5BI,OAAM,SAAC/c,GACNgd,QAAQhd,MAAM,4CAA6CA,MAkC1D,SAAS2d,KACV,kBAAmB/B,WACrBA,UAAUa,cAAcC,MACrBN,MAAK,SAACO,GACLA,EAAaC,gBAEdG,OAAM,SAAC/c,GACNgd,QAAQhd,MAAMA,EAAM4d,YC/G1BpN,EAAAA,GAAAA,IACOqN,EAAAA,GACJC,IAAIC,EAAAA,GACJD,IAAIE,EAAAA,IACJC,KAAK,CACJC,YAAa,KACbC,OAAOle,EACPme,KAAM,eACNC,GAAI,QACJC,cAAe,CACbC,aAAa,GAEfC,QAAS,CACPC,SAAUxe,uDAIX,IAAMye,GAAgB,kBAC3B,UAAC,KAAD,CAAU/E,MAAOA,GAAjB,WACE,SAAC,EAAD,KACA,SAAC,GAAD,KACA,SAAC,GAAD,KACA,SAAC,GAAD,QAIJ+B,GAAsB,CACpB+B,SAAU,SAACd,GACLA,EAAagC,SAGfhC,EAAagC,QAAQC,YAAY,CAAE3M,KAAM,oBC7C/C","sources":["types.ts","webpack://root-automated-setup/./src/components/header/header.module.css?9833","components/header/index.ts","components/header/header.tsx","features/utils.ts","features/expansionSlice.ts","features/deckSlice.ts","features/factionSlice.ts","features/setupSlice.ts","features/flowSlice.ts","features/hirelingSlice.ts","features/landmarkSlice.ts","features/mapSlice.ts","features/vagabondSlice.ts","features/selectors.ts","features/thunks.ts","components/hooks.ts","webpack://root-automated-setup/./src/components/icon/icon.module.css?1195","components/icon/icon.tsx","components/icon/iconComponents.tsx","components/icon/index.ts","webpack://root-automated-setup/./src/components/step/step.module.css?0b07","components/step/stepContext.ts","components/step/step.tsx","components/step/index.ts","images/icons/militant.svg","webpack://root-automated-setup/./src/components/checkbox/checkbox.module.css?86aa","components/checkbox/index.ts","components/checkbox/checkbox.tsx","webpack://root-automated-setup/./src/components/componentToggle/componentToggle.module.css?92bd","components/componentToggle/index.ts","components/componentToggle/componentToggle.tsx","webpack://root-automated-setup/./src/components/factionSelect/factionSelect.module.css?cfdb","webpack://root-automated-setup/./src/components/factionSelect/statBar.module.css?a2f0","components/factionSelect/statBar.tsx","components/iconList/iconList.tsx","components/iconList/index.ts","webpack://root-automated-setup/./src/components/factionSelect/componentCount.module.css?49e2","components/factionSelect/componentCount.tsx","components/factionSelect/factionSelect.tsx","webpack://root-automated-setup/./src/components/numberSelector/numberSelector.module.css?b36a","components/numberSelector/index.ts","components/numberSelector/numberSelector.tsx","webpack://root-automated-setup/./src/components/radiogroup/radiogroup.module.css?7099","components/radiogroup/radiogroup.tsx","components/radiogroup/index.ts","images/icons/restart.svg","webpack://root-automated-setup/./src/components/stepList/stepList.module.css?e896","webpack://root-automated-setup/./src/components/button/button.module.css?a294","components/button/button.tsx","components/button/index.ts","images/icons/close.svg","components/stepList/index.ts","components/stepList/stepList.tsx","components/store.ts","webpack://root-automated-setup/./src/components/toast/toast.module.css?25a7","images/icons/undo.svg","components/toast/index.ts","components/toast/toast.tsx","webpack://root-automated-setup/./src/components/toolbar/toolbar.module.css?f173","images/icons/redo.svg","images/icons/next.svg","components/toolbar/index.ts","components/toolbar/toolbar.tsx","components/app/serviceWorkerRegistration.ts","components/app/app.tsx","components/app/index.ts"],"sourcesContent":["/** A game component that can be enabled or disabled, and may have an associated image */\r\nexport interface GameComponent {\r\n  enabled: boolean;\r\n  image?: string;\r\n}\r\n\r\n/** An object representing a game component from an expansion. It holds the same information as a game component but also saves the expansion it is from */\r\nexport interface ExpansionComponent extends GameComponent {\r\n  expansionCode: string;\r\n}\r\n\r\n/** A generic object where each key is the code of an underlying object */\r\nexport interface ComponentState<T> {\r\n  [code: string]: T;\r\n}\r\n\r\n/** Adds the field \"code\" to an existing type */\r\nexport type WithCode<T> = T & {\r\n  code: string;\r\n};\r\n\r\n/** An object representing an Expansion or Base Box for the Root board game */\r\nexport interface Expansion extends GameComponent {\r\n  base: boolean;\r\n}\r\n\r\n/** An object representing a Faction from the Root board game */\r\nexport interface Faction extends ExpansionComponent {\r\n  key: string;\r\n  militant: boolean;\r\n  isVagabond: boolean;\r\n  warriors: number;\r\n  buildings: number;\r\n  buildingImage?: string;\r\n  tokens: number;\r\n  tokenImage?: string;\r\n  complexity: number;\r\n  wealth: number;\r\n  aggression: number;\r\n  crafting: number;\r\n}\r\n\r\n/** An object representing a physical Hireling card from the Root board game, which could be Promoted or Demoted */\r\nexport interface Hireling extends ExpansionComponent {\r\n  factions: string[];\r\n}\r\n\r\n/** An object representing a Landmark piece from the Root board game */\r\nexport interface Landmark extends ExpansionComponent {\r\n  minPlayers: number;\r\n}\r\n\r\n/** An object representing a Map from the Root board game */\r\nexport interface MapComponent extends ExpansionComponent {\r\n  landmark?: string;\r\n}\r\n\r\n/** An object representing a Vagabond character from the Root board game */\r\nexport interface Vagabond extends ExpansionComponent {\r\n  startingItems: string[];\r\n}\r\n\r\n/** An object representing an promoted or demoted Hireling */\r\nexport interface HirelingEntry {\r\n  code: string;\r\n  demoted: boolean;\r\n}\r\n\r\n/** An object containing all variables used during the setup process */\r\nexport interface SetupState {\r\n  playerCount: number;\r\n  fixedFirstPlayer: boolean;\r\n  playerOrder: number[];\r\n  errorMessage: string | null;\r\n  // Map\r\n  map: string | null;\r\n  useMapLandmark: boolean;\r\n  // Deck\r\n  deck: string | null;\r\n  // Landmarks\r\n  landmarkCount: 0 | 1 | 2;\r\n  landmark1: string | null;\r\n  landmark2: string | null;\r\n  // Hirelings\r\n  hireling1: HirelingEntry | null;\r\n  hireling2: HirelingEntry | null;\r\n  hireling3: HirelingEntry | null;\r\n  // Factions\r\n  excludedFactions: string[];\r\n}\r\n\r\n/** An enum of the individual steps in the setup process. The setup process will step through this list during execution */\r\nexport enum SetupStep {\r\n  chooseExpansions,\r\n  seatPlayers,\r\n  chooseMap,\r\n  setUpMap,\r\n  setUpMapLandmark,\r\n  chooseDeck,\r\n  setUpDeck,\r\n  setUpBots,\r\n  chooseLandmarks,\r\n  setUpLandmark1,\r\n  setUpLandmark2,\r\n  chooseHirelings,\r\n  setUpHireling1,\r\n  setUpHireling2,\r\n  setUpHireling3,\r\n  postHirelingSetup,\r\n  drawCards,\r\n  chooseFactions,\r\n  selectFaction,\r\n  setUpFaction,\r\n  placeScoreMarkers,\r\n  chooseHand,\r\n  setupEnd,\r\n}\r\n\r\n/** An object representing a faction in the faction pool, along with it's assigned vagabond character (if it has one) */\r\nexport interface FactionEntry {\r\n  code: string;\r\n  militant: boolean;\r\n  vagabond?: string;\r\n}\r\n\r\n/** An object representing a slice of history for the flow state */\r\nexport interface FlowSlice {\r\n  step: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  vagabondSetUp: boolean;\r\n  playerIndex: number;\r\n  factionIndex: number | null;\r\n}\r\n\r\n/** An object representing the current flow state, including the current step, past and future steps, and what steps should be skipped */\r\nexport interface FlowState {\r\n  pastSteps: FlowSlice[];\r\n  currentStep: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  vagabondSetUp: boolean;\r\n  currentPlayerIndex: number;\r\n  currentFactionIndex: number | null;\r\n  skippedSteps: boolean[];\r\n  futureSteps: FlowSlice[];\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"header_container__HZLDB\",\"logo\":\"header_logo__zVSNC\",\"subtitle\":\"header_subtitle__D1X2k\"};","import { Header } from \"./header\";\nexport default Header;\nexport * from \"./header\";\n","import styles from \"./header.module.css\";\r\nimport rootLogo from \"../../images/logo.png\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const Header: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <header className={styles.container}>\r\n      <img src={rootLogo} alt={t(\"label.logoAlt\")} className={styles.logo} />\r\n      <div className={styles.subtitle}>{t(\"label.logoText\")}</div>\r\n    </header>\r\n  );\r\n};\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport content from \"../content.json\";\r\nimport { GameComponent, ComponentState, ExpansionComponent } from \"../types\";\r\n\r\nconst isTrue = \"1\";\r\nconst isFalse = \"0\";\r\n\r\n/**\r\n * Saves the enable/disable state of the specified expansion to localStorage\r\n * @param expansionCode\r\n * @param enabled\r\n */\r\nexport const persistExpansionEnabled = (\r\n  expansionCode: string,\r\n  enabled: boolean\r\n) => {\r\n  try {\r\n    localStorage.setItem(expansionCode, enabled ? isTrue : isFalse);\r\n  } catch (error: any) {\r\n    if (process.env.NODE_ENV !== \"production\")\r\n      console.warn(\r\n        `Failed to persist enable state of ${enabled} for expansion ${expansionCode}`,\r\n        error\r\n      );\r\n  }\r\n};\r\n\r\n/**\r\n * Function to return the enabled state of a given expansion in localStorage, for the purpose of setting up the initial redux state\r\n * @param expansionCode The code of the expansion to check. Also the key of the value stored in localStorage\r\n * @param base If the given expansion is actually the base game, and thus is always enabled regardless of localStorage\r\n */\r\nexport const expansionEnabled = (\r\n  expansionCode: string,\r\n  base: boolean\r\n): boolean => {\r\n  // Base game is always enabled, so no need to save or load localStorage\r\n  if (base) return true;\r\n\r\n  // Load the current enable state from localStorage so we remember user settings\r\n  let storedVal = localStorage.getItem(expansionCode);\r\n  let enabled: boolean;\r\n\r\n  // Was there a value stored in localStorage?\r\n  if (storedVal != null) {\r\n    // Convert the string stored in localStorage to a boolean\r\n    enabled = storedVal === isTrue;\r\n  } else {\r\n    // Default to false, then save that state to localStorage for future\r\n    enabled = false;\r\n    persistExpansionEnabled(expansionCode, enabled);\r\n  }\r\n\r\n  return enabled;\r\n};\r\n\r\n/**\r\n * Helper function for getting the details of a specified expansion from content.json\r\n * @param expansionCode The expansion code to look up as a key on content.json\r\n */\r\nexport const getExpansionConfig = (expansionCode: string) =>\r\n  // It sucks, but we have to circumvent type saftey here\r\n  // Blame typescript's very loose typings of Object.entries preventing us from typing more strongly\r\n  content[expansionCode as keyof typeof content];\r\n\r\n/**\r\n * Generic function for adding expansion components to the state of a Redux slice\r\n * @param componentKey The expansion object key that the components are stored in\r\n */\r\nexport const addExpansionComponents = <T extends ExpansionComponent>(\r\n  state: ComponentState<T>,\r\n  expansionCode: string,\r\n  componentKey: string,\r\n  expansion = getExpansionConfig(expansionCode)\r\n) => {\r\n  if (expansion != null && componentKey in expansion)\r\n    for (const [componentCode, component] of Object.entries(\r\n      expansion[componentKey as keyof typeof expansion]\r\n    )) {\r\n      // Don't add to state if it already exists\r\n      if (state[componentCode] == null) {\r\n        state[componentCode] = {\r\n          ...component,\r\n          expansionCode: expansionCode,\r\n          enabled: true,\r\n        };\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `While enabling expansion \"${expansionCode}\", ${componentKey} component with duplicate code \"${componentCode}\" not added to state:`,\r\n          component\r\n        );\r\n      }\r\n    }\r\n};\r\n\r\n/**\r\n * Generic function for populating the starting state of a Redux slice using the provided addExpansionComponents function\r\n * @param addExpansionComponents Function for extracting state from a given expansion\r\n */\r\nexport const setupInitialState =\r\n  <T extends ExpansionComponent>(componentKey: string) =>\r\n  () => {\r\n    const initialState: ComponentState<T> = {};\r\n    for (const [expansionCode, expansion] of Object.entries(content)) {\r\n      if (expansionEnabled(expansionCode, expansion.base)) {\r\n        addExpansionComponents<T>(\r\n          initialState,\r\n          expansionCode,\r\n          componentKey,\r\n          expansion\r\n        );\r\n      }\r\n    }\r\n    return initialState;\r\n  };\r\n\r\n/**\r\n * Generic version of Toggle reducer for enabling or disabling a component in state\r\n * @param code The component code to be enabled or disabled\r\n * @param enabled An override value for component enable. Will default to toggling the component if not provided\r\n */\r\nexport const toggleComponent = {\r\n  prepare: (code: string, enabled?: boolean) => ({\r\n    payload: {\r\n      code,\r\n      enabled,\r\n    },\r\n  }),\r\n  reducer: <T extends GameComponent>(\r\n    state: ComponentState<T>,\r\n    action: PayloadAction<{ code: string; enabled?: boolean }>\r\n  ) => {\r\n    // Retreive the component\r\n    const component = state[action.payload.code];\r\n    // Only update the component state if it exists\r\n    if (component != null) {\r\n      // Toggle enabled value\r\n      component.enabled = action.payload.enabled ?? !component.enabled;\r\n    } else if (process.env.NODE_ENV !== \"production\") {\r\n      console.warn(\r\n        \"Invalid payload for toggleComponent action: Payload code not found in component state\",\r\n        action\r\n      );\r\n    }\r\n  },\r\n};\r\n\r\n/**\r\n * Returns a random element from a given list, while also removing it\r\n * @param list The list of elements to be randomly selected\r\n */\r\nexport const takeRandom = <T>(list: T[]): T => {\r\n  // Get a random index in the given list (i.e. between 0 inclusive and list.length exclusive)\r\n  const i = Math.floor(Math.random() * list.length);\r\n  // Save value at given index so we can return it\r\n  const returnVal = list[i];\r\n  // Delete 1 element starting at chosen index\r\n  list.splice(i, 1);\r\n  return returnVal;\r\n};\r\n","import {\n  ActionReducerMapBuilder,\n  createSlice,\n  Draft,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport content from \"../content.json\";\nimport {\n  addExpansionComponents,\n  expansionEnabled,\n  getExpansionConfig,\n  persistExpansionEnabled,\n} from \"./utils\";\nimport { ComponentState, Expansion, ExpansionComponent } from \"../types\";\n\nconst setupInitialExpansionState = () => {\n  let initialState: ComponentState<Expansion> = {};\n  for (const [expansionCode, expansion] of Object.entries(content)) {\n    initialState[expansionCode] = {\n      base: expansion.base,\n      image: expansion.image === \"\" ? undefined : expansion.image,\n      enabled: expansionEnabled(expansionCode, expansion.base),\n    };\n  }\n  return initialState;\n};\n\nconst setExpansionEnabled = (\n  state: ComponentState<Expansion>,\n  expansionCode: string,\n  enabled: boolean\n) => {\n  // Retreive the expansion (may return undefined if code does not exist)\n  const expansion = state[expansionCode];\n  // Only update the expansion state if it exists and is not the base game\n  if (expansion != null && !expansion.base) {\n    expansion.enabled = enabled;\n    persistExpansionEnabled(expansionCode, expansion.enabled);\n  }\n};\n\nexport const expansionSlice = createSlice({\n  name: \"expansion\",\n  initialState: setupInitialExpansionState,\n  reducers: {\n    enableExpansion: (state, action: PayloadAction<string>) =>\n      setExpansionEnabled(state, action.payload, true),\n    disableExpansion: (state, action: PayloadAction<string>) =>\n      setExpansionEnabled(state, action.payload, false),\n  },\n});\n\nexport const { enableExpansion, disableExpansion } = expansionSlice.actions;\nexport default expansionSlice.reducer;\n\n/** Function for adding automatic enable/disable expansion reducers to a redux slice */\nexport const expansionReducers =\n  <T extends ExpansionComponent>(componentKey: string) =>\n  (builder: ActionReducerMapBuilder<ComponentState<T>>) => {\n    builder\n      .addCase(enableExpansion, (state, action) =>\n        addExpansionComponents<Draft<T>>(state, action.payload, componentKey)\n      )\n      .addCase(disableExpansion, (state, action) => {\n        // Skip processing for the base game, as that cannot be disabled\n        if (!getExpansionConfig(action.payload)?.base) {\n          // Remove all components matching the disabled expansion\n          for (const [componentCode, component] of Object.entries(state)) {\n            if (component.expansionCode === action.payload) {\n              delete state[componentCode];\n            }\n          }\n        }\n      });\n  };\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { setupInitialState, toggleComponent } from \"./utils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { ExpansionComponent } from \"../types\";\n\nexport const deckSlice = createSlice({\n  name: \"deck\",\n  initialState: setupInitialState<ExpansionComponent>(\"decks\"),\n  reducers: {\n    toggleDeck: toggleComponent,\n  },\n  extraReducers: expansionReducers(\"decks\"),\n});\n\nexport const { toggleDeck } = deckSlice.actions;\nexport default deckSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { setupInitialState, toggleComponent } from \"./utils\";\r\nimport { expansionReducers } from \"./expansionSlice\";\r\nimport { Faction } from \"../types\";\r\n\r\nexport const factionSlice = createSlice({\r\n  name: \"faction\",\r\n  initialState: setupInitialState<Faction>(\"factions\"),\r\n  reducers: {\r\n    toggleFaction: toggleComponent,\r\n  },\r\n  extraReducers: expansionReducers(\"factions\"),\r\n});\r\n\r\nexport const { toggleFaction } = factionSlice.actions;\r\nexport default factionSlice.reducer;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport {\r\n  ExpansionComponent,\r\n  Hireling,\r\n  HirelingEntry,\r\n  Landmark,\r\n  MapComponent,\r\n  SetupState,\r\n  WithCode,\r\n} from \"../types\";\r\n\r\nconst initialState: SetupState = {\r\n  playerCount: 4,\r\n  fixedFirstPlayer: false,\r\n  playerOrder: [],\r\n  errorMessage: null,\r\n  // Map\r\n  map: null,\r\n  useMapLandmark: true,\r\n  // Deck\r\n  deck: null,\r\n  // Landmarks\r\n  landmarkCount: 0,\r\n  landmark1: null,\r\n  landmark2: null,\r\n  // Hirelings\r\n  hireling1: null,\r\n  hireling2: null,\r\n  hireling3: null,\r\n  // Factions\r\n  excludedFactions: [],\r\n};\r\n\r\nexport const setupSlice = createSlice({\r\n  name: \"setup\",\r\n  initialState,\r\n  reducers: {\r\n    setPlayerCount: (state, action: PayloadAction<number>) => {\r\n      // Make sure the player count is valid (i.e. above 0)\r\n      if (action.payload >= 1) {\r\n        state.playerCount = action.payload;\r\n        state.errorMessage = null;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Invalid payload for setPlayerCount action: Payload must be a number above 0\",\r\n          action\r\n        );\r\n      }\r\n    },\r\n    fixFirstPlayer: (state, action: PayloadAction<boolean>) => {\r\n      state.fixedFirstPlayer = action.payload;\r\n      state.errorMessage = null;\r\n    },\r\n    setFirstPlayer: (state, action: PayloadAction<number>) => {\r\n      // Make sure the player count is valid (i.e. between 1 and playerCount)\r\n      if (action.payload >= 1 && action.payload <= state.playerCount) {\r\n        state.playerOrder = [];\r\n        // Generate the player order array\r\n        for (let i = 0; i < state.playerCount; i++) {\r\n          // Add each player to the array, starting with the first player\r\n          let nextPlayer = action.payload + i;\r\n          if (nextPlayer > state.playerCount) nextPlayer -= state.playerCount;\r\n          state.playerOrder.push(nextPlayer);\r\n        }\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setFirstPlayer action: Payload must be a number between 1 and playerCount (${state.playerCount})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    setErrorMessage: (state, action: PayloadAction<string | null>) => {\r\n      state.errorMessage = action.payload;\r\n    },\r\n    enableMapLandmark: (state, action: PayloadAction<boolean>) => {\r\n      state.useMapLandmark = action.payload;\r\n      state.errorMessage = null;\r\n    },\r\n    setMap: {\r\n      prepare: (map: WithCode<MapComponent>) => ({ payload: map.code }),\r\n      reducer: (state, action: PayloadAction<string>) => {\r\n        state.map = action.payload;\r\n      },\r\n    },\r\n    setDeck: {\r\n      prepare: (deck: WithCode<ExpansionComponent>) => ({ payload: deck.code }),\r\n      reducer: (state, action: PayloadAction<string>) => {\r\n        state.deck = action.payload;\r\n      },\r\n    },\r\n    setLandmarkCount: (state, action: PayloadAction<number>) => {\r\n      // We use === instead of >= or <= to ensure typescript can infer the correct payload type\r\n      if (\r\n        action.payload === 0 ||\r\n        action.payload === 1 ||\r\n        action.payload === 2\r\n      ) {\r\n        state.landmarkCount = action.payload;\r\n        state.errorMessage = null;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Invalid payload for setLandmarkCount action: Payload must be a number between 0 and 2\",\r\n          action\r\n        );\r\n      }\r\n    },\r\n    setLandmark1: {\r\n      prepare: (landmark: WithCode<Landmark>) => ({ payload: landmark.code }),\r\n      reducer: (state, action: PayloadAction<string>) => {\r\n        if (state.landmarkCount >= 1) {\r\n          state.landmark1 = action.payload;\r\n        } else if (process.env.NODE_ENV !== \"production\") {\r\n          console.warn(\r\n            \"Invalid setLandmark1 action: Cannot set landmark 1 when landmark count less than 1\",\r\n            action\r\n          );\r\n        }\r\n      },\r\n    },\r\n    setLandmark2: {\r\n      prepare: (landmark: WithCode<Landmark>) => ({ payload: landmark.code }),\r\n      reducer: (state, action: PayloadAction<string>) => {\r\n        if (state.landmarkCount >= 2) {\r\n          state.landmark2 = action.payload;\r\n        } else if (process.env.NODE_ENV !== \"production\") {\r\n          console.warn(\r\n            \"Invalid setLandmark2 action: Cannot set landmark 2 when landmark count less than 2\",\r\n            action\r\n          );\r\n        }\r\n      },\r\n    },\r\n    setHireling: {\r\n      prepare: (\r\n        number: number,\r\n        hireling: WithCode<Hireling>,\r\n        demoted: boolean\r\n      ) => ({\r\n        payload: {\r\n          number,\r\n          hireling: hireling.code,\r\n          factions: hireling.factions,\r\n          demoted,\r\n        },\r\n      }),\r\n      reducer: (\r\n        state,\r\n        action: PayloadAction<{\r\n          number: number;\r\n          hireling: string;\r\n          factions: string[];\r\n          demoted: boolean;\r\n        }>\r\n      ) => {\r\n        if (action.payload.number >= 1 && action.payload.number <= 3) {\r\n          const hireling: HirelingEntry = {\r\n            code: action.payload.hireling,\r\n            demoted: action.payload.demoted,\r\n          };\r\n\r\n          if (action.payload.number === 1) state.hireling1 = hireling;\r\n          if (action.payload.number === 2) state.hireling2 = hireling;\r\n          if (action.payload.number === 3) state.hireling3 = hireling;\r\n\r\n          state.excludedFactions.push(...action.payload.factions);\r\n        } else if (process.env.NODE_ENV !== \"production\") {\r\n          console.warn(\r\n            'Invalid payload for setHireling action: Payload field \"number\" must be a number between 1 and 3',\r\n            action\r\n          );\r\n        }\r\n      },\r\n    },\r\n    clearExcludedFactions: (state) => {\r\n      state.excludedFactions = [];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // This allows us to always reset the displayed error if the user makes a seperate input\r\n    builder.addDefaultCase((state) => {\r\n      state.errorMessage = null;\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  setPlayerCount,\r\n  fixFirstPlayer,\r\n  setFirstPlayer,\r\n  setErrorMessage,\r\n  enableMapLandmark,\r\n  setMap,\r\n  setDeck,\r\n  setLandmarkCount,\r\n  setLandmark1,\r\n  setLandmark2,\r\n  setHireling,\r\n  clearExcludedFactions,\r\n} = setupSlice.actions;\r\nexport default setupSlice.reducer;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport {\r\n  SetupStep,\r\n  FlowState,\r\n  FlowSlice,\r\n  WithCode,\r\n  Faction,\r\n  Vagabond,\r\n  FactionEntry,\r\n} from \"../types\";\r\nimport { takeRandom } from \"./utils\";\r\nimport { setErrorMessage } from \"./setupSlice\";\r\n\r\nconst initialState: FlowState = {\r\n  pastSteps: [],\r\n  currentStep: SetupStep.chooseExpansions,\r\n  factionPool: [],\r\n  lastFactionLocked: false,\r\n  vagabondSetUp: false,\r\n  currentPlayerIndex: 0,\r\n  currentFactionIndex: null,\r\n  // Create an array with as many elements as there are setup steps\r\n  skippedSteps: Array(SetupStep.setupEnd + 1).fill(false),\r\n  futureSteps: [],\r\n};\r\n// Default to skipping bot & hireling setup steps\r\ninitialState.skippedSteps[SetupStep.setUpBots] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling1] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling2] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling3] = true;\r\ninitialState.skippedSteps[SetupStep.postHirelingSetup] = true;\r\n\r\nconst getSlice = (state: FlowState): FlowSlice => ({\r\n  step: state.currentStep,\r\n  // This prevents changes we make to the faction pool in the draft state being reflected in already generated slices\r\n  factionPool: [...state.factionPool],\r\n  lastFactionLocked: state.lastFactionLocked,\r\n  vagabondSetUp: state.vagabondSetUp,\r\n  playerIndex: state.currentPlayerIndex,\r\n  factionIndex: state.currentFactionIndex,\r\n});\r\n\r\nconst applySlice = (state: FlowState, slice: FlowSlice) => {\r\n  state.currentStep = slice.step;\r\n  state.factionPool = slice.factionPool;\r\n  state.lastFactionLocked = slice.lastFactionLocked;\r\n  state.vagabondSetUp = slice.vagabondSetUp;\r\n  state.currentPlayerIndex = slice.playerIndex;\r\n  state.currentFactionIndex = slice.factionIndex;\r\n};\r\n\r\nexport const flowSlice = createSlice({\r\n  name: \"flow\",\r\n  initialState,\r\n  reducers: {\r\n    incrementStep: (state, action: PayloadAction) => {\r\n      if (state.currentStep < SetupStep.setupEnd) {\r\n        // Add our current state to the undo queue and clear the redo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        state.futureSteps = [];\r\n\r\n        // Flag that we set up a vagabond\r\n        if (\r\n          state.currentStep === SetupStep.setUpFaction &&\r\n          !state.vagabondSetUp &&\r\n          state.factionPool[state.currentFactionIndex ?? 0].vagabond\r\n        )\r\n          state.vagabondSetUp = true;\r\n\r\n        // Handle special case for faction setup\r\n        if (\r\n          state.currentStep === SetupStep.setUpFaction &&\r\n          state.currentPlayerIndex > 0\r\n        ) {\r\n          // If we still have players left over, move on to the next player\r\n          state.currentPlayerIndex--;\r\n          // Remove the faction we just set up from the pool\r\n          const [removedFaction] = state.factionPool.splice(\r\n            state.currentFactionIndex ?? 0,\r\n            1\r\n          );\r\n          state.currentFactionIndex = null;\r\n          // Clear the last faction lock if the removed faction was militant\r\n          if (state.lastFactionLocked && removedFaction.militant)\r\n            state.lastFactionLocked = false;\r\n          // Return to the faction selection step\r\n          state.currentStep = SetupStep.selectFaction;\r\n        } else {\r\n          // Go to the next non-skipped step\r\n          let skipStep = false;\r\n          do {\r\n            state.currentStep++;\r\n            skipStep = state.skippedSteps[state.currentStep];\r\n          } while (skipStep && state.currentStep < SetupStep.setupEnd);\r\n        }\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid incrementStep action: Current step must be smaller than ${SetupStep.setupEnd}`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    undoStep: (state, action: PayloadAction) => {\r\n      // Get the previous step from the undo queue\r\n      const previousStep = state.pastSteps.pop();\r\n      if (previousStep != null) {\r\n        // Add our current state to the redo queue\r\n        state.futureSteps.unshift(getSlice(state));\r\n        // Override current state with state from previous step\r\n        applySlice(state, previousStep);\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid undoStep action: pastSteps array returned empty value (${previousStep})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    redoStep: (state, action: PayloadAction) => {\r\n      // Get the next step from the redo queue\r\n      const nextStep = state.futureSteps.shift();\r\n      if (nextStep != null) {\r\n        // Add our current state to the undo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        // Override current state with state from next step\r\n        applySlice(state, nextStep);\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid redoStep action: futureSteps array returned empty value (${nextStep})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    skipSteps: {\r\n      prepare: (steps: SetupStep | SetupStep[], skip: boolean) => ({\r\n        payload: {\r\n          steps: typeof steps === \"number\" ? [steps] : steps,\r\n          skip: skip,\r\n        },\r\n      }),\r\n      reducer: (\r\n        state,\r\n        action: PayloadAction<{ steps: SetupStep[]; skip: boolean }>\r\n      ) => {\r\n        action.payload.steps.forEach((step) => {\r\n          state.skippedSteps[step] = action.payload.skip;\r\n        });\r\n        state.futureSteps = [];\r\n      },\r\n    },\r\n    clearFactionPool: (state) => {\r\n      state.factionPool = [];\r\n      state.lastFactionLocked = false;\r\n      state.currentFactionIndex = null;\r\n    },\r\n    addToFactionPool: {\r\n      prepare: (\r\n        faction: WithCode<Faction>,\r\n        vagabondPool: WithCode<Vagabond>[]\r\n      ) => ({\r\n        payload: {\r\n          code: faction.code,\r\n          militant: faction.militant,\r\n          vagabond: faction.isVagabond\r\n            ? takeRandom(vagabondPool).code\r\n            : undefined,\r\n        },\r\n      }),\r\n      reducer: (state, action: PayloadAction<FactionEntry>) => {\r\n        // Add to our pool, and set it to locked if insurgent\r\n        state.factionPool.push(action.payload);\r\n        state.lastFactionLocked = !action.payload.militant;\r\n      },\r\n    },\r\n    setCurrentPlayerIndex: (state, action: PayloadAction<number>) => {\r\n      if (action.payload >= 0) {\r\n        state.currentPlayerIndex = action.payload;\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Invalid payload for setCurrentPlayerIndex action: Payload must be a number larger than or equal to 0\",\r\n          action\r\n        );\r\n      }\r\n    },\r\n    setCurrentFactionIndex: (state, action: PayloadAction<number>) => {\r\n      if (action.payload >= 0 && action.payload < state.factionPool.length) {\r\n        state.currentFactionIndex = action.payload;\r\n        state.futureSteps = [];\r\n      } else if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          `Invalid payload for setCurrentFactionIndex action: Payload must be a number larger than or equal to 0 but smaller than the faction pool length (${state.factionPool.length})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    resetFlow: (state) => {\r\n      state.pastSteps = [];\r\n      state.currentStep = SetupStep.chooseExpansions;\r\n      state.futureSteps = [];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // This allows us to always reset the redo queue if the setup state changes\r\n    builder\r\n      // Don't wipe redo queue when the only thing that happened was displaying an error\r\n      .addCase(setErrorMessage, () => {})\r\n      .addDefaultCase((state) => {\r\n        state.futureSteps = [];\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  incrementStep,\r\n  undoStep,\r\n  redoStep,\r\n  skipSteps,\r\n  clearFactionPool,\r\n  addToFactionPool,\r\n  setCurrentPlayerIndex,\r\n  setCurrentFactionIndex,\r\n  resetFlow,\r\n} = flowSlice.actions;\r\nexport default flowSlice.reducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { setupInitialState, toggleComponent } from \"./utils\";\nimport { Hireling } from \"../types\";\nimport { expansionReducers } from \"./expansionSlice\";\n\nexport const hirelingSlice = createSlice({\n  name: \"hireling\",\n  initialState: setupInitialState<Hireling>(\"hirelings\"),\n  reducers: {\n    toggleHireling: toggleComponent,\n  },\n  extraReducers: expansionReducers(\"hirelings\"),\n});\n\nexport const { toggleHireling } = hirelingSlice.actions;\nexport default hirelingSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { setupInitialState, toggleComponent } from \"./utils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { Landmark } from \"../types\";\n\nexport const landmarkSlice = createSlice({\n  name: \"landmark\",\n  initialState: setupInitialState<Landmark>(\"landmarks\"),\n  reducers: {\n    toggleLandmark: toggleComponent,\n  },\n  extraReducers: expansionReducers(\"landmarks\"),\n});\n\nexport const { toggleLandmark } = landmarkSlice.actions;\nexport default landmarkSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { setupInitialState, toggleComponent } from \"./utils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { MapComponent } from \"../types\";\n\nexport const mapSlice = createSlice({\n  name: \"map\",\n  initialState: setupInitialState<MapComponent>(\"maps\"),\n  reducers: {\n    toggleMap: toggleComponent,\n  },\n  extraReducers: expansionReducers(\"maps\"),\n});\n\nexport const { toggleMap } = mapSlice.actions;\nexport default mapSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { setupInitialState, toggleComponent } from \"./utils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { Vagabond } from \"../types\";\n\nexport const vagabondSlice = createSlice({\n  name: \"vagabond\",\n  initialState: setupInitialState<Vagabond>(\"vagabonds\"),\n  reducers: {\n    toggleVagabond: toggleComponent,\n  },\n  extraReducers: expansionReducers(\"vagabonds\"),\n});\n\nexport const { toggleVagabond } = vagabondSlice.actions;\nexport default vagabondSlice.reducer;\n","import { RootState } from \"../components/store\";\r\nimport { createSelector } from \"@reduxjs/toolkit\";\r\nimport { ComponentState, GameComponent } from \"../types\";\r\n\r\n/**\r\n * Redux Selector for returning a component list as an array, moving the component key to the component field \"code\"\r\n * @param select Select function for selecting the component list from the root state\r\n */\r\nconst selectComponentArray = <T>(\r\n  select: (state: RootState) => ComponentState<T>\r\n) =>\r\n  createSelector(select, (stateSlice) => {\r\n    const array = [];\r\n    for (const [code, object] of Object.entries(stateSlice)) {\r\n      array.push({ ...object, code });\r\n    }\r\n    return array;\r\n  });\r\n\r\n/** Filters out disabled components from a given component array */\r\nexport const selectEnabled = <T extends GameComponent>(array: T[]) =>\r\n  array.filter((value) => value.enabled);\r\n\r\n/** Redux Selector for returning a specified Deck from state */\r\nexport const selectDeck = (state: RootState, code: string) => state.deck[code];\r\n\r\n/** Redux Selector for returning the deck list as an array, moving the object key to the object field \"code\" */\r\nexport const selectDeckArray = selectComponentArray((state) => state.deck);\r\n\r\n/** Redux Selector for returning a specified Expansion from state */\r\nexport const selectExpansion = (state: RootState, code: string) =>\r\n  state.expansion[code];\r\n\r\n/** Redux Selector for returning the expansion list as an array, moving the object key to the object field \"code\" */\r\nexport const selectExpansionArray = selectComponentArray(\r\n  (state) => state.expansion\r\n);\r\n\r\n/** Redux Selector for returning a specified Faction from state */\r\nexport const selectFaction = (state: RootState, code: string) =>\r\n  state.faction[code];\r\n\r\n/** Redux Selector for returning the faction list as an array, moving the object key to the object field \"code\" */\r\nexport const selectFactionArray = selectComponentArray(\r\n  (state) => state.faction\r\n);\r\n\r\n/** Redux Selector for returning an array of included faction codes */\r\nexport const selectFactionCodeArray = (state: RootState) =>\r\n  Object.keys(state.faction);\r\n\r\n/** Redux Selector for returning an array of enabled militant factions */\r\nexport const selectEnabledMilitantFactions = (state: RootState) =>\r\n  selectFactionArray(state).filter((value) => value.enabled && value.militant);\r\n\r\n/** Redux Selector for returning an array of enabled non-militant factions */\r\nexport const selectEnabledInsurgentFactions = (state: RootState) =>\r\n  selectFactionArray(state).filter((value) => value.enabled && !value.militant);\r\n\r\n/** Returns the faction pool, joining the original faction and vagabond objects into the entries */\r\nexport const selectFactionPool = createSelector(\r\n  (state: RootState) => state.flow.factionPool,\r\n  (state: RootState) => state.faction,\r\n  (state: RootState) => state.vagabond,\r\n  (factionPool, factions, vagabonds) =>\r\n    factionPool.map((entry) => ({\r\n      ...factions[entry.code],\r\n      code: entry.code,\r\n      vagabond: entry.vagabond\r\n        ? { ...vagabonds[entry.vagabond], code: entry.vagabond }\r\n        : undefined,\r\n    }))\r\n);\r\n\r\n/** Returns the flow information (including current step) from redux state */\r\nexport const selectFlowState = (state: RootState) => state.flow;\r\n\r\n/** Redux Selector for returning a specified Hireling from state */\r\nexport const selectHireling = (state: RootState, code: string) =>\r\n  state.hireling[code];\r\n\r\n/** Redux Selector for returning the hireling list as an array, moving the object key to the object field \"code\" */\r\nexport const selectHirelingArray = selectComponentArray(\r\n  (state) => state.hireling\r\n);\r\n\r\n/** Redux Selector for returning an array of all hirelings that replace an included faction */\r\nexport const selectFactionHirelingArray = (state: RootState) =>\r\n  selectHirelingArray(state).filter((hireling) =>\r\n    // Only include a hireling if at least one of it's faction codes matches an included faction\r\n    hireling.factions.some((factionCode) =>\r\n      selectFactionCodeArray(state).includes(factionCode)\r\n    )\r\n  );\r\n\r\n/** Redux Selector for returning an array of enabled hirelings that do not replace an included faction */\r\nexport const selectEnabledIndependentHirelings = (state: RootState) =>\r\n  selectHirelingArray(state).filter(\r\n    (hireling) =>\r\n      hireling.enabled &&\r\n      // Only include a hireling if none of it's faction codes matches an included faction\r\n      hireling.factions.every(\r\n        (factionCode) => !selectFactionCodeArray(state).includes(factionCode)\r\n      )\r\n  );\r\n\r\n/** Redux Selector for returning a specified Landmark from state */\r\nexport const selectLandmark = (state: RootState, code: string) =>\r\n  state.landmark[code];\r\n\r\n/** Redux Selector for returning the landmark list as an array, moving the object key to the object field \"code\" */\r\nexport const selectLandmarkArray = selectComponentArray(\r\n  (state) => state.landmark\r\n);\r\n\r\n/** Redux Selector for returning a specified Map from state */\r\nexport const selectMap = (state: RootState, code: string) => state.map[code];\r\n\r\n/** Redux Selector for returning the map list as an array, moving the object key to the object field \"code\" */\r\nexport const selectMapArray = selectComponentArray((state) => state.map);\r\n\r\n/** Returns the object for the map selected in setup */\r\nexport const selectSetupMap = (state: RootState) =>\r\n  state.setup.map != null\r\n    ? { ...state.map[state.setup.map], code: state.setup.map }\r\n    : null;\r\n\r\n/** Returns the object for the deck selected in setup */\r\nexport const selectSetupDeck = (state: RootState) =>\r\n  state.setup.deck != null\r\n    ? { ...state.deck[state.setup.deck], code: state.setup.deck }\r\n    : null;\r\n\r\n/** Returns the object for the first landmark selected in setup */\r\nexport const selectSetupLandmark1 = (state: RootState) =>\r\n  state.setup.landmark1 != null\r\n    ? {\r\n        ...state.landmark[state.setup.landmark1],\r\n        code: state.setup.landmark1,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the second landmark selected in setup */\r\nexport const selectSetupLandmark2 = (state: RootState) =>\r\n  state.setup.landmark2 != null\r\n    ? {\r\n        ...state.landmark[state.setup.landmark2],\r\n        code: state.setup.landmark2,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the first hireling selected in setup */\r\nexport const selectSetupHireling1 = (state: RootState) =>\r\n  state.setup.hireling1 != null\r\n    ? {\r\n        ...state.hireling[state.setup.hireling1.code],\r\n        ...state.setup.hireling1,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the second hireling selected in setup */\r\nexport const selectSetupHireling2 = (state: RootState) =>\r\n  state.setup.hireling2 != null\r\n    ? {\r\n        ...state.hireling[state.setup.hireling2.code],\r\n        ...state.setup.hireling2,\r\n      }\r\n    : null;\r\n\r\n/** Returns the object for the third hireling selected in setup */\r\nexport const selectSetupHireling3 = (state: RootState) =>\r\n  state.setup.hireling3 != null\r\n    ? {\r\n        ...state.hireling[state.setup.hireling3.code],\r\n        ...state.setup.hireling3,\r\n      }\r\n    : null;\r\n\r\n/** Returns the setup parameters from redux state */\r\nexport const selectSetupParameters = (state: RootState) => state.setup;\r\n\r\n/** Redux Selector for returning a specified Vagabond from state */\r\nexport const selectVagabond = (state: RootState, code: string) =>\r\n  state.vagabond[code];\r\n\r\n/** Redux Selector for returning the vagabond list as an array, moving the object key to the object field \"code\" */\r\nexport const selectVagabondArray = selectComponentArray(\r\n  (state) => state.vagabond\r\n);\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { AppThunk, RootState } from \"../components/store\";\r\nimport { GameComponent, SetupStep, WithCode } from \"../types\";\r\nimport { disableExpansion, enableExpansion } from \"./expansionSlice\";\r\nimport { toggleFaction } from \"./factionSlice\";\r\nimport {\r\n  addToFactionPool,\r\n  clearFactionPool,\r\n  incrementStep,\r\n  setCurrentPlayerIndex,\r\n  skipSteps,\r\n} from \"./flowSlice\";\r\nimport { toggleHireling } from \"./hirelingSlice\";\r\nimport { toggleLandmark } from \"./landmarkSlice\";\r\nimport {\r\n  selectDeckArray,\r\n  selectEnabled,\r\n  selectEnabledIndependentHirelings,\r\n  selectEnabledInsurgentFactions,\r\n  selectEnabledMilitantFactions,\r\n  selectExpansion,\r\n  selectFactionArray,\r\n  selectFactionCodeArray,\r\n  selectFactionHirelingArray,\r\n  selectFlowState,\r\n  selectHirelingArray,\r\n  selectLandmarkArray,\r\n  selectMapArray,\r\n  selectSetupParameters,\r\n  selectVagabondArray,\r\n} from \"./selectors\";\r\nimport {\r\n  clearExcludedFactions,\r\n  setDeck,\r\n  setErrorMessage,\r\n  setFirstPlayer,\r\n  setHireling,\r\n  setLandmark1,\r\n  setLandmark2,\r\n  setMap,\r\n  setPlayerCount,\r\n} from \"./setupSlice\";\r\nimport { takeRandom } from \"./utils\";\r\n\r\n/** Thunk for toggling an expansion, dispatching either the enableExpansion or disableExpansion action */\r\nexport const toggleExpansion =\r\n  (expansionCode: string): AppThunk =>\r\n  (dispatch, getState) => {\r\n    // Retreive the expansion (may return undefined if code does not exist)\r\n    const expansion = selectExpansion(getState(), expansionCode);\r\n    // Only update the expansion state if it exists and is not the base game\r\n    if (expansion != null && !expansion.base) {\r\n      // Dispatch action to invert current state. We need to do this so all slices can react to the expansion state change\r\n      if (expansion.enabled) {\r\n        dispatch(disableExpansion(expansionCode));\r\n      } else {\r\n        dispatch(enableExpansion(expansionCode));\r\n      }\r\n    }\r\n  };\r\n\r\n/**\r\n * Thunk action for mass updating the enable/disable state of multiple components, dispatching the minimum amount of actions to do so\r\n * @param selectComponentArray Selector for the list of components you wish to update\r\n * @param componentEnable Either a function returning the desired enable state for a given component, or a boolean which sets the enable state of all given components\r\n * @param toggleComponent Action creator for dispatching the toggle component action for the given components\r\n */\r\nexport const massComponentToggle =\r\n  <T extends GameComponent>(\r\n    selectComponentArray: (state: RootState) => WithCode<T>[],\r\n    componentEnable: boolean | ((component: WithCode<T>) => boolean),\r\n    toggleComponent: (\r\n      code: string,\r\n      enabled?: boolean\r\n    ) => PayloadAction<{ code: string; enabled?: boolean }>\r\n  ): AppThunk =>\r\n  (dispatch, getState) => {\r\n    selectComponentArray(getState()).forEach((component) => {\r\n      // Calculate what the enable state of the component should be\r\n      const shouldEnable =\r\n        typeof componentEnable === \"function\"\r\n          ? componentEnable(component)\r\n          : componentEnable;\r\n      // If the desired state does not match the actual state, fix it\r\n      if (component.enabled !== shouldEnable) {\r\n        dispatch(toggleComponent(component.code, shouldEnable));\r\n      }\r\n    });\r\n  };\r\n\r\n/** Advances to the next step in setup, performing all validation logic and state changes required for each step */\r\nexport const nextStep = (): AppThunk => (dispatch, getState) => {\r\n  // Retrieve our setup state\r\n  const setupParameters = selectSetupParameters(getState());\r\n  const flowState = selectFlowState(getState());\r\n  let doIncrementStep = true;\r\n  let validationError: string | null = null;\r\n\r\n  // Handle any special logic that fires at the end of a step\r\n  switch (flowState.currentStep) {\r\n    case SetupStep.chooseExpansions:\r\n      // After locking in the Choosen expansions, we need to calculate which steps can be skipped\r\n      // Do we need to choose a deck?\r\n      const decks = selectDeckArray(getState());\r\n      if (decks.length === 1) {\r\n        // Auto select the only deck\r\n        dispatch(setDeck(decks[0]));\r\n        dispatch(skipSteps(SetupStep.chooseDeck, true));\r\n      } else {\r\n        // Make sure we do the choose deck step\r\n        dispatch(skipSteps(SetupStep.chooseDeck, false));\r\n      }\r\n\r\n      // Correct our current playercount if it is too low or high (this can occur with undo/redo)\r\n      if (\r\n        setupParameters.playerCount < 2 &&\r\n        flowState.skippedSteps[SetupStep.setUpBots]\r\n      ) {\r\n        dispatch(setPlayerCount(2));\r\n      } else {\r\n        const maxPlayerCount = selectFactionCodeArray(getState()).length - 1;\r\n        if (setupParameters.playerCount > maxPlayerCount) {\r\n          dispatch(setPlayerCount(maxPlayerCount));\r\n        }\r\n      }\r\n\r\n      // Are there any landmarks that can be set up?\r\n      dispatch(\r\n        skipSteps(\r\n          [\r\n            SetupStep.chooseLandmarks,\r\n            SetupStep.setUpLandmark1,\r\n            SetupStep.setUpLandmark2,\r\n          ],\r\n          selectLandmarkArray(getState()).length === 0\r\n        )\r\n      );\r\n\r\n      // Are there any hirelings that can be set up?\r\n      if (selectHirelingArray(getState()).length === 0) {\r\n        // We must ensure all hireling setup is skipped\r\n        dispatch(\r\n          skipSteps(\r\n            [\r\n              SetupStep.chooseHirelings,\r\n              SetupStep.setUpHireling1,\r\n              SetupStep.setUpHireling2,\r\n              SetupStep.setUpHireling3,\r\n              SetupStep.postHirelingSetup,\r\n            ],\r\n            true\r\n          )\r\n        );\r\n        // Clear the exlcude faction pool of any potential stale data from previous setups\r\n        // We need to do this here since we're skipping the chooseHirelings step\r\n        if (setupParameters.excludedFactions.length > 0)\r\n          dispatch(clearExcludedFactions());\r\n      } else {\r\n        // By default we still skip the actual hireling setup, as per other optional components\r\n        dispatch(skipSteps(SetupStep.chooseHirelings, false));\r\n      }\r\n      break;\r\n\r\n    case SetupStep.seatPlayers:\r\n      let firstPlayer: number;\r\n\r\n      // Do we need to randomise the first player\r\n      if (setupParameters.fixedFirstPlayer) {\r\n        // First player is always \"1\" as the player number represents turn order\r\n        firstPlayer = 1;\r\n      } else {\r\n        // Randomly pick a first player between 1 and playerCount, as the player number represents table seating order\r\n        firstPlayer =\r\n          Math.floor(Math.random() * setupParameters.playerCount) + 1;\r\n      }\r\n      dispatch(setFirstPlayer(firstPlayer));\r\n\r\n      // Ensure that we include/exclude faction hirelings depending on if we can spare factions for hirelings at our player count\r\n      dispatch(\r\n        massComponentToggle(\r\n          selectFactionHirelingArray,\r\n          setupParameters.playerCount <\r\n            selectFactionCodeArray(getState()).length - 1,\r\n          toggleHireling\r\n        )\r\n      );\r\n      break;\r\n\r\n    case SetupStep.chooseMap:\r\n      // Get our list of maps which are avaliable for selection\r\n      let mapPool = selectEnabled(selectMapArray(getState()));\r\n\r\n      // Check that there is even a map to be selected...\r\n      if (mapPool.length > 0) {\r\n        // Choose a random map\r\n        const map = takeRandom(mapPool);\r\n        dispatch(setMap(map));\r\n\r\n        // Do the map landmark setup if we have one\r\n        dispatch(\r\n          skipSteps(\r\n            SetupStep.setUpMapLandmark,\r\n            !setupParameters.useMapLandmark || !map.landmark\r\n          )\r\n        );\r\n\r\n        // Ensure that any landmarks not supported at this player count or used by map setup are disabled\r\n        dispatch(\r\n          massComponentToggle(\r\n            selectLandmarkArray,\r\n            (landmark) =>\r\n              landmark.minPlayers <= setupParameters.playerCount &&\r\n              (!setupParameters.useMapLandmark ||\r\n                map.landmark !== landmark.code),\r\n            toggleLandmark\r\n          )\r\n        );\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n        validationError = \"error.noMap\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseDeck:\r\n      // Get our list of decks which are avaliable for selection\r\n      let deckPool = selectEnabled(selectDeckArray(getState()));\r\n\r\n      // Check that there is even a deck to be selected...\r\n      if (deckPool.length > 0) {\r\n        // Choose a random deck\r\n        dispatch(setDeck(takeRandom(deckPool)));\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n        validationError = \"error.noDeck\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseLandmarks:\r\n      // Get our list of landmarks which are avaliable for selection\r\n      let landmarkPool = selectEnabled(selectLandmarkArray(getState()));\r\n\r\n      // Check that there are enough enabled landmarks for how many we want to set up\r\n      if (landmarkPool.length >= setupParameters.landmarkCount) {\r\n        // Select the first landmark\r\n        if (setupParameters.landmarkCount >= 1) {\r\n          // Choose a random landmark\r\n          dispatch(setLandmark1(takeRandom(landmarkPool)));\r\n\r\n          // Select the second landmark\r\n          if (setupParameters.landmarkCount >= 2) {\r\n            // Choose a random landmark\r\n            dispatch(setLandmark2(takeRandom(landmarkPool)));\r\n            // Ensure we don't skip the setup steps\r\n            dispatch(\r\n              skipSteps(\r\n                [SetupStep.setUpLandmark1, SetupStep.setUpLandmark2],\r\n                false\r\n              )\r\n            );\r\n          } else {\r\n            // Handle skipping just the second landmark setup\r\n            dispatch(skipSteps(SetupStep.setUpLandmark1, false));\r\n            dispatch(skipSteps(SetupStep.setUpLandmark2, true));\r\n          }\r\n        } else {\r\n          // We're not setting up any landmarks, so skip both setup steps\r\n          dispatch(\r\n            skipSteps(\r\n              [SetupStep.setUpLandmark1, SetupStep.setUpLandmark2],\r\n              true\r\n            )\r\n          );\r\n        }\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n\r\n        // Set the correct error message\r\n        if (landmarkPool.length === 0) {\r\n          validationError = \"error.noLandmark\";\r\n        } else {\r\n          validationError = \"error.tooFewLandmark\";\r\n        }\r\n      }\r\n      break;\r\n\r\n    case SetupStep.chooseHirelings:\r\n      // Clear the exclude faction pool of any potential stale data from previous hireling setups\r\n      if (setupParameters.excludedFactions.length > 0)\r\n        dispatch(clearExcludedFactions());\r\n\r\n      // Did we skip the hireling setup?\r\n      if (!flowState.skippedSteps[SetupStep.setUpHireling1]) {\r\n        // Get our lists of independent & faction hirelings which are avaliable for selection\r\n        let hirelingPool = selectEnabledIndependentHirelings(getState());\r\n        let factionHirelings = selectEnabled(\r\n          selectFactionHirelingArray(getState())\r\n        );\r\n\r\n        // Calculate how many factions we can spare for hirelings (i.e. total factions minus setup faction count)\r\n        const factionCodes = selectFactionCodeArray(getState());\r\n        let spareFactionCount =\r\n          factionCodes.length - (setupParameters.playerCount + 1);\r\n\r\n        // If we can only spare 3 or less factions then limit the amount of faction hirelings\r\n        if (spareFactionCount <= 3) {\r\n          // Add a random sample of faction hirelings to our pool, ensuring that the random hireling draw will never exclude too many factions for setup\r\n          while (spareFactionCount > 0 && factionHirelings.length > 0) {\r\n            // Grab a random faction hireling\r\n            let hireling = takeRandom(factionHirelings);\r\n            // Calculate how many factions we will exclude by including it (based on what factions are actually in play)\r\n            let excludeCount =\r\n              hireling.factions.length > 1\r\n                ? // Make sure we only count the factions that are actually in play\r\n                  hireling.factions.filter((factionCode) =>\r\n                    factionCodes.includes(factionCode)\r\n                  ).length\r\n                : 1;\r\n            // Ensure that we don't exclude too many factions by addding this hireling (The Exile can cause this edge case)\r\n            if (spareFactionCount - excludeCount >= 0) {\r\n              hirelingPool.push(hireling);\r\n              spareFactionCount -= excludeCount;\r\n            }\r\n          }\r\n        } else {\r\n          // There are enough spare factions that we can throw all faction hirelings into the mix\r\n          hirelingPool = hirelingPool.concat(factionHirelings);\r\n        }\r\n\r\n        // Check that there are enough hirelings selected\r\n        if (hirelingPool.length >= 3) {\r\n          // Choose three random hirelings\r\n          for (let number = 1; number <= 3; number++) {\r\n            dispatch(\r\n              setHireling(\r\n                number,\r\n                takeRandom(hirelingPool),\r\n                setupParameters.playerCount + number > 5\r\n              )\r\n            );\r\n          }\r\n        } else {\r\n          // Invalid state, do not proceed\r\n          doIncrementStep = false;\r\n          validationError = \"error.tooFewHireling\";\r\n        }\r\n      }\r\n\r\n      // Disable the factions that are mutually exclusive with the selected hirelings\r\n      // Also disable insurgent factions if we're only playing with 2 people and no bots or hirelings\r\n      const excludedFactions = selectSetupParameters(\r\n        getState()\r\n      ).excludedFactions;\r\n      dispatch(\r\n        massComponentToggle(\r\n          selectFactionArray,\r\n          (faction) =>\r\n            !excludedFactions.includes(faction.code) &&\r\n            (setupParameters.playerCount > 2 ||\r\n              faction.militant ||\r\n              !flowState.skippedSteps[SetupStep.setUpHireling1] ||\r\n              !flowState.skippedSteps[SetupStep.setUpBots]),\r\n          toggleFaction\r\n        )\r\n      );\r\n      break;\r\n\r\n    case SetupStep.chooseFactions:\r\n      // Clear the faction pool of any potential stale data from previous setups\r\n      if (flowState.factionPool.length > 0) dispatch(clearFactionPool());\r\n\r\n      // Get our list of militant factions and vagabonds which are avaliable for selection\r\n      let workingFactionPool = selectEnabledMilitantFactions(getState());\r\n      let vagabondPool = selectEnabled(selectVagabondArray(getState()));\r\n\r\n      // Get our list of insurgent factions to be added to the working faction pool during setup\r\n      const insurgentFactions = selectEnabledInsurgentFactions(getState());\r\n      // Get our vagabond faction count to validate our vagabondPool against\r\n      const vagabondFactionCount = workingFactionPool\r\n        .concat(insurgentFactions)\r\n        .reduce(\r\n          (count, faction) => (faction.isVagabond ? count + 1 : count),\r\n          0\r\n        );\r\n\r\n      // Check that there are enough factions avaliable for setup\r\n      if (\r\n        workingFactionPool.length > 0 &&\r\n        vagabondPool.length >= vagabondFactionCount &&\r\n        workingFactionPool.length + insurgentFactions.length >=\r\n          setupParameters.playerCount + 1\r\n      ) {\r\n        // Start by adding a random militant faction\r\n        dispatch(\r\n          addToFactionPool(takeRandom(workingFactionPool), vagabondPool)\r\n        );\r\n        // Add the insurgent factions to the mix\r\n        workingFactionPool = workingFactionPool.concat(insurgentFactions);\r\n        // Add enough factions to make the total pool playerCount + 1\r\n        for (let i = 0; i < setupParameters.playerCount; i++) {\r\n          dispatch(\r\n            addToFactionPool(takeRandom(workingFactionPool), vagabondPool)\r\n          );\r\n        }\r\n\r\n        // Begin the setup at the bottom of player order\r\n        dispatch(setCurrentPlayerIndex(setupParameters.playerCount - 1));\r\n      } else {\r\n        // Invalid state, do not proceed\r\n        doIncrementStep = false;\r\n\r\n        // Set the correct error message\r\n        if (workingFactionPool.length === 0) {\r\n          validationError = \"error.noMilitantFaction\";\r\n        } else if (vagabondPool.length < vagabondFactionCount) {\r\n          validationError = \"error.tooFewVagabond\";\r\n        } else {\r\n          validationError = \"error.tooFewFaction\";\r\n        }\r\n      }\r\n      break;\r\n\r\n    case SetupStep.selectFaction:\r\n      // Ensure the user has actually selected a faction\r\n      if (flowState.currentFactionIndex == null) {\r\n        doIncrementStep = false;\r\n        validationError = \"error.noFaction\";\r\n      }\r\n      break;\r\n\r\n    case SetupStep.setupEnd:\r\n      // This is the final step, so don't try to increment\r\n      doIncrementStep = false;\r\n      break;\r\n  }\r\n\r\n  // Set the error message if it's changed\r\n  if (setupParameters.errorMessage !== validationError) {\r\n    dispatch(setErrorMessage(validationError));\r\n  }\r\n\r\n  // Increment the step if we're still flagged to do so\r\n  if (doIncrementStep) {\r\n    dispatch(incrementStep());\r\n  }\r\n};\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { selectSetupParameters } from \"../features\";\nimport type { RootState, AppDispatch } from \"./store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n/** Returns a function for returning the player number for a specifed point in turn order */\nexport const useNthLastPlayer = () => {\n  const { playerOrder } = useAppSelector(selectSetupParameters);\n  return (position: number) => {\n    if (playerOrder.length > 0) {\n      let index = -position;\n      do {\n        index += playerOrder.length;\n      } while (index < 0);\n      return playerOrder[index];\n    }\n    return 0;\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"icon_item__cobYb\",\"inactive\":\"icon_inactive__nY+d6\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./icon.module.css\";\r\n\r\nimport foxIcon from \"../../images/suits/fox.png\";\r\nimport mouseIcon from \"../../images/suits/mouse.png\";\r\nimport rabbitIcon from \"../../images/suits/rabbit.png\";\r\n\r\nimport bagImage from \"../../images/items/bag.png\";\r\nimport bootImage from \"../../images/items/boot.png\";\r\nimport coinImage from \"../../images/items/coin.png\";\r\nimport crossbowImage from \"../../images/items/crossbow.png\";\r\nimport hammerImage from \"../../images/items/hammer.png\";\r\nimport swordImage from \"../../images/items/sword.png\";\r\nimport teaImage from \"../../images/items/tea.png\";\r\nimport torchImage from \"../../images/items/torch.png\";\r\n\r\nconst iconDict: {\r\n  [icon: string]: {\r\n    key: string;\r\n    image: string;\r\n  };\r\n} = {\r\n  fox: {\r\n    key: \"label.fox\",\r\n    image: foxIcon,\r\n  },\r\n  mouse: {\r\n    key: \"label.mouse\",\r\n    image: mouseIcon,\r\n  },\r\n  rabbit: {\r\n    key: \"label.rabbit\",\r\n    image: rabbitIcon,\r\n  },\r\n  bag: {\r\n    key: \"component.bag\",\r\n    image: bagImage,\r\n  },\r\n  boot: {\r\n    key: \"component.boot\",\r\n    image: bootImage,\r\n  },\r\n  coin: {\r\n    key: \"component.coin\",\r\n    image: coinImage,\r\n  },\r\n  crossbow: {\r\n    key: \"component.crossbow\",\r\n    image: crossbowImage,\r\n  },\r\n  hammer: {\r\n    key: \"component.hammer\",\r\n    image: hammerImage,\r\n  },\r\n  sword: {\r\n    key: \"component.sword\",\r\n    image: swordImage,\r\n  },\r\n  tea: {\r\n    key: \"component.tea\",\r\n    image: teaImage,\r\n  },\r\n  torch: {\r\n    key: \"component.torch\",\r\n    image: torchImage,\r\n  },\r\n};\r\n\r\ninterface ItemProps {\r\n  icon: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const Icon: React.FC<ItemProps> = ({ icon, children }) => {\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const iconAlt = t(iconDict[icon]?.key);\r\n  return (\r\n    <>\r\n      <img\r\n        className={classNames(styles.item, { [styles.inactive]: !stepActive })}\r\n        src={iconDict[icon]?.image}\r\n        alt={iconAlt}\r\n        title={iconAlt}\r\n      />\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n","import { Icon } from \"./icon\";\r\n\r\nexport const iconComponents = {\r\n  Bag: <Icon icon=\"bag\" />,\r\n  Boot: <Icon icon=\"boot\" />,\r\n  Coin: <Icon icon=\"coin\" />,\r\n  Crossbow: <Icon icon=\"crossbow\" />,\r\n  Fox: <Icon icon=\"fox\" />,\r\n  Hammer: <Icon icon=\"hammer\" />,\r\n  Mouse: <Icon icon=\"mouse\" />,\r\n  Rabbit: <Icon icon=\"rabbit\" />,\r\n  Sword: <Icon icon=\"sword\" />,\r\n  Tea: <Icon icon=\"tea\" />,\r\n  Torch: <Icon icon=\"torch\" />,\r\n};\r\n","import { Icon } from \"./icon\";\nexport default Icon;\nexport * from \"./icon\";\nexport * from \"./iconComponents\";\n","// extracted by mini-css-extract-plugin\nexport default {\"step\":\"step_step__jmF6G\",\"inactive\":\"step_inactive__+Mdoy\",\"title\":\"step_title__d40nQ\",\"subtitle\":\"step_subtitle__3pYFe\"};","import { createContext } from \"react\";\r\n\r\ninterface StepContextValue {\r\n  stepActive: boolean;\r\n}\r\n\r\nconst defaultValue: StepContextValue = {\r\n  stepActive: false,\r\n};\r\n\r\nexport const StepContext = createContext(defaultValue);\r\nexport const StepProvider = StepContext.Provider;\r\nexport default StepContext;\r\n","import classNames from \"classnames\";\r\nimport { TOptions } from \"i18next\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { selectFlowState } from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { iconComponents } from \"../icon\";\r\nimport styles from \"./step.module.css\";\r\nimport { StepProvider } from \"./stepContext\";\r\n\r\ninterface StepProps {\r\n  step: SetupStep;\r\n  renderTitle?: boolean;\r\n  renderSubtitle?: boolean;\r\n  subtitleKey?: string;\r\n  textKey?: string;\r\n  textBelowChildren?: boolean;\r\n  translationOptions?: TOptions;\r\n  components?:\r\n    | readonly React.ReactNode[]\r\n    | { readonly [tagName: string]: React.ReactNode };\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const Step: React.FC<StepProps> = ({\r\n  step,\r\n  renderTitle,\r\n  renderSubtitle,\r\n  subtitleKey,\r\n  textKey,\r\n  textBelowChildren,\r\n  translationOptions,\r\n  components,\r\n  children,\r\n}) => {\r\n  const { currentStep, skippedSteps } = useAppSelector(selectFlowState);\r\n  const { t, i18n } = useTranslation();\r\n  const sectionElement = useRef<HTMLElement>(null);\r\n\r\n  // Figure out if we are the active step so we can tell children and trigger effects\r\n  const stepActive = currentStep === step;\r\n  // Skip rendering if the setup process isn't up to our step or we were skipped\r\n  const stepRendered = currentStep >= step && !skippedSteps[step];\r\n\r\n  // Trigger a scroll-to effect when we become active\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      sectionElement.current?.scrollIntoView({\r\n        behavior: window.matchMedia(\"(prefers-reduced-motion)\").matches\r\n          ? \"auto\"\r\n          : \"smooth\",\r\n      });\r\n  });\r\n\r\n  // Generate the (sub)title text in advance so we can use it to rename the window (if required)\r\n  let titleText: string | null = null;\r\n  let subtitleText: string | null = null;\r\n\r\n  // Only compute the titles if we will actually render\r\n  // We do this instead of returning null here as the useEffect hook must always be called\r\n  if (stepRendered) {\r\n    // Only generate if the prerequisites for rendering the title are met\r\n    const defaultTitleKey = \"setupStep.\" + SetupStep[step] + \".title\";\r\n    if (renderTitle ?? i18n.exists(defaultTitleKey))\r\n      titleText = t(defaultTitleKey, translationOptions);\r\n\r\n    // Only generate if the prerequisites for rendering the subtitle are met\r\n    const defaultSubtitleKey = \"setupStep.\" + SetupStep[step] + \".subtitle\";\r\n    if (renderSubtitle ?? subtitleKey ?? i18n.exists(defaultSubtitleKey))\r\n      subtitleText = t(subtitleKey ?? defaultSubtitleKey, translationOptions);\r\n  }\r\n\r\n  // Rename the window to match our step (if we are the active step)\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      // Preappend the step title or subtitle if our step has one\r\n      document.title =\r\n        (titleText || subtitleText ? (titleText || subtitleText) + \" - \" : \"\") +\r\n        t(\"label.pageTitle\");\r\n  }, [stepActive, titleText, subtitleText, t]);\r\n\r\n  return stepRendered ? (\r\n    <StepProvider value={{ stepActive }}>\r\n      <section\r\n        className={classNames(styles.step, {\r\n          [styles.inactive]: !stepActive,\r\n        })}\r\n        ref={sectionElement}\r\n      >\r\n        {titleText && <h1 className={styles.title}>{titleText}</h1>}\r\n        {subtitleText && <h2 className={styles.subtitle}>{subtitleText}.</h2>}\r\n        {textBelowChildren ? children : null}\r\n        <Trans\r\n          i18nKey={textKey ?? \"setupStep.\" + SetupStep[step] + \".body\"}\r\n          count={translationOptions?.count} // For Trans component count cannot be passed in with options\r\n          tOptions={translationOptions}\r\n          components={{ ...iconComponents, ...components }}\r\n        />\r\n        {!textBelowChildren ? children : null}\r\n      </section>\r\n    </StepProvider>\r\n  ) : null;\r\n};\r\n\r\nStep.defaultProps = {\r\n  textBelowChildren: false,\r\n};\r\n","import { Step } from \"./step\";\nexport default Step;\nexport * from \"./step\";\nexport * from \"./stepContext\";\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMilitant(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 57 57\",\n    style: {\n      enableBackground: \"new 0 0 57 57\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M57,0h-8.837L18.171,29.992l-4.076-4.076l-1.345-4.034c-0.22-0.663-0.857-1.065-1.55-0.98 c-0.693,0.085-1.214,0.63-1.268,1.327l-0.572,7.438l5.982,5.982L4.992,46H2.274C1.02,46,0,47.02,0,48.274v6.452 C0,55.98,1.02,57,2.274,57h6.452C9.98,57,11,55.98,11,54.726v-3.421l10-10l6.021,6.021l6.866-1.145 c0.685-0.113,1.182-0.677,1.21-1.37c0.028-0.693-0.422-1.295-1.096-1.464l-3.297-0.824l-4.043-4.043L57,8.489V0z M9,54.726 C9,54.877,8.877,55,8.726,55H2.274C2.123,55,2,54.877,2,54.726v-6.452C2,48.123,2.123,48,2.274,48h0.718h5.734 C8.877,48,9,48.123,9,48.274v5.031V54.726z M11,48.477v-0.203C11,47.02,9.98,46,8.726,46H7.82l8.938-8.938l1.417,1.417l1.411,1.411 L11,48.477z M30.942,44.645l-3.235,0.54l-5.293-5.293l0,0l-2.833-2.833l-8.155-8.155l0.292-3.796l0.63,1.89l4.41,4.41l0,0 l4.225,4.225l8.699,8.699L30.942,44.645z M25.247,37.066l-2.822-2.822l-2.839-2.839L48.991,2h4.243L23.829,31.406 c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293L55,3.062v4.592L25.247,37.066z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMilitant);\nexport default __webpack_public_path__ + \"static/media/militant.4708c67a499bc925b7614c6ae04fce14.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"checkbox_container__p8WwE\",\"checkbox\":\"checkbox_checkbox__iCqtL\",\"label\":\"checkbox_label__JoQ4b\",\"inactive\":\"checkbox_inactive__ceSyz\"};","import { Checkbox } from \"./checkbox\";\nexport default Checkbox;\nexport * from \"./checkbox\";\n","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./checkbox.module.css\";\r\n\r\ninterface CheckboxProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport const Checkbox: React.FC<CheckboxProps> = ({\r\n  id,\r\n  defaultValue,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return defaultValue || stepActive ? (\r\n    <div\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      <input\r\n        id={id}\r\n        type=\"checkbox\"\r\n        className={styles.checkbox}\r\n        defaultChecked={defaultValue ?? false}\r\n        disabled={!stepActive}\r\n        onChange={(e) => onChange(e.target.checked)}\r\n        aria-invalid={stepActive && errorMessage ? true : undefined}\r\n        aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n      />\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={\"label.\" + id} />\r\n      </label>\r\n    </div>\r\n  ) : null;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"componentToggle_carousel__5k7Pu\",\"inactive\":\"componentToggle_inactive__eKCim\",\"component\":\"componentToggle_component__m66Eq\",\"enabled\":\"componentToggle_enabled__ejvB7\",\"locked\":\"componentToggle_locked__xGt+U\",\"image\":\"componentToggle_image__0dsXK\",\"label\":\"componentToggle_label__uaA-k\"};","import { ComponentToggle } from \"./componentToggle\";\nexport default ComponentToggle;\nexport * from \"./componentToggle\";\n","import classNames from \"classnames\";\r\nimport { useContext, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { GameComponent, WithCode } from \"../../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport { AppThunk, RootState } from \"../store\";\r\nimport styles from \"./componentToggle.module.css\";\r\nimport defaultImage from \"../../images/componentDefault.png\";\r\nimport { selectSetupParameters, setErrorMessage } from \"../../features\";\r\nimport { PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface ComponentListProps<T extends WithCode<GameComponent>> {\r\n  selector: (state: RootState) => T[];\r\n  toggleComponent: (code: string) => PayloadAction<{ code: string }> | AppThunk;\r\n  getLabelKey: (component: T) => string;\r\n  getLockedKey?: (component: T) => string | null;\r\n  unsorted?: boolean;\r\n}\r\n\r\nexport const ComponentToggle = <T extends WithCode<GameComponent>>({\r\n  selector,\r\n  toggleComponent,\r\n  getLabelKey,\r\n  getLockedKey,\r\n  unsorted,\r\n}: ComponentListProps<T>) => {\r\n  const components = useAppSelector(selector);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Sort our component list, then memoize the result for performance\r\n  const sortedComponents = useMemo(() => {\r\n    // For sorting purposes, generate the final label text in advance\r\n    const returnValue = components.map((component) => ({\r\n      ...component,\r\n      label: t(getLabelKey(component)),\r\n    }));\r\n\r\n    // Sort it by default (unless asked explicitly not to)\r\n    if (!unsorted)\r\n      returnValue.sort((a, b) => a.label.localeCompare(b.label, i18n.language));\r\n\r\n    return returnValue;\r\n  }, [components, t, getLabelKey, unsorted, i18n.language]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.carousel, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      {sortedComponents.map((component) => {\r\n        if (component.enabled || stepActive) {\r\n          const componentLockedKey = getLockedKey\r\n            ? getLockedKey(component)\r\n            : null;\r\n          const componentLocked = componentLockedKey != null;\r\n          return (\r\n            <button\r\n              key={component.code}\r\n              className={classNames(styles.component, {\r\n                [styles.enabled]: stepActive && component.enabled,\r\n                [styles.locked]: stepActive && componentLocked,\r\n              })}\r\n              onClick={() =>\r\n                componentLocked\r\n                  ? dispatch(setErrorMessage(componentLockedKey))\r\n                  : dispatch(toggleComponent(component.code))\r\n              }\r\n              disabled={!stepActive}\r\n              title={\r\n                stepActive && componentLocked\r\n                  ? t(componentLockedKey)\r\n                  : undefined\r\n              }\r\n              tabIndex={stepActive && componentLocked ? -1 : undefined}\r\n              role=\"switch\"\r\n              aria-checked={component.enabled}\r\n              aria-disabled={stepActive ? componentLocked : undefined}\r\n              aria-label={stepActive ? component.label : undefined}\r\n              aria-invalid={stepActive && errorMessage ? true : undefined}\r\n              aria-errormessage={\r\n                stepActive && errorMessage ? \"appError\" : undefined\r\n              }\r\n            >\r\n              <img\r\n                className={styles.image}\r\n                src={\r\n                  component.image\r\n                    ? process.env.PUBLIC_URL + \"/images/\" + component.image\r\n                    : defaultImage\r\n                }\r\n                alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n                aria-hidden=\"true\"\r\n              />\r\n              <div className={styles.label}>\r\n                <span>{component.label}</span>\r\n              </div>\r\n            </button>\r\n          );\r\n        }\r\n        return null;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"factionSelect_carousel__qbu2u\",\"faction\":\"factionSelect_faction__IK8eE\",\"selected\":\"factionSelect_selected__LdzyN\",\"locked\":\"factionSelect_locked__YnETl\",\"image\":\"factionSelect_image__0-2dZ\",\"icon\":\"factionSelect_icon__9Jeka\",\"title\":\"factionSelect_title__b3-tN\",\"militant\":\"factionSelect_militant__w7wGf\",\"label\":\"factionSelect_label__FfUCZ\",\"factionInfo\":\"factionSelect_factionInfo__jYESO\",\"componentCounts\":\"factionSelect_componentCounts__vSX9U\",\"stats\":\"factionSelect_stats__8gdRJ\",\"summaryTitle\":\"factionSelect_summaryTitle__Plw1f\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"statBar_container__kZaN9\",\"inactive\":\"statBar_inactive__7tZFw\",\"label\":\"statBar_label__q6nHD\",\"barLow\":\"statBar_barLow__OJIz9\",\"barModerate\":\"statBar_barModerate__xZ+O+\",\"barHigh\":\"statBar_barHigh__I2ilp\"};","import styles from \"./statBar.module.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { selectFactionPool, selectFlowState } from \"../../features\";\r\nimport classNames from \"classnames\";\r\nimport { StepContext } from \"../step\";\r\nimport { useContext } from \"react\";\r\n\r\ninterface StatBarProps {\r\n  stat: \"complexity\" | \"wealth\" | \"aggression\" | \"crafting\";\r\n}\r\n\r\nexport const StatBar: React.FC<StatBarProps> = ({ stat }) => {\r\n  const { currentFactionIndex } = useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const statValue =\r\n    currentFactionIndex != null ? factionPool[currentFactionIndex][stat] : 0;\r\n  return (\r\n    <div\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      <span className={styles.label}>{t(\"label.\" + stat)}</span>\r\n      <span\r\n        className={classNames({\r\n          [styles.barLow]: statValue < 1,\r\n          [styles.barModerate]: statValue === 1,\r\n          [styles.barHigh]: statValue > 1,\r\n        })}\r\n      >\r\n        {t(\"label.factionRating.\" + statValue)}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n","import Icon from \"../icon\";\r\n\r\ninterface ItemListProps {\r\n  list: string[];\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const IconList: React.FC<ItemListProps> = ({ list, children }) => (\r\n  <>\r\n    {list.map((item, index) => (\r\n      <Icon key={index} icon={item}>\r\n        {index < list.length - 1 ? children : undefined}\r\n      </Icon>\r\n    ))}\r\n  </>\r\n);\r\n\r\nIconList.defaultProps = {\r\n  children: \", \",\r\n};\r\n","import { IconList } from \"./iconList\";\nexport default IconList;\nexport * from \"./iconList\";\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"componentCount_container__m9YQe\",\"image\":\"componentCount_image__B7oPL\",\"inactive\":\"componentCount_inactive__mGviA\"};","import styles from \"./componentCount.module.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { selectFactionPool, selectFlowState } from \"../../features\";\r\nimport classNames from \"classnames\";\r\nimport { StepContext } from \"../step\";\r\nimport { useContext } from \"react\";\r\nimport defaultImage from \"../../images/componentDefault.png\";\r\n\r\nconst imageSource: {\r\n  [component: string]: \"image\" | \"buildingImage\" | \"tokenImage\";\r\n} = {\r\n  warriors: \"image\",\r\n  buildings: \"buildingImage\",\r\n  tokens: \"tokenImage\",\r\n};\r\n\r\ninterface ComponentCountProps {\r\n  component: \"warriors\" | \"buildings\" | \"tokens\";\r\n}\r\n\r\nexport const ComponentCount: React.FC<ComponentCountProps> = ({\r\n  component,\r\n}) => {\r\n  const { currentFactionIndex } = useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const componentCount =\r\n    currentFactionIndex != null\r\n      ? factionPool[currentFactionIndex][component]\r\n      : 0;\r\n\r\n  if (componentCount > 0) {\r\n    // We know currentFactionIndex is not null because if it was componentCount defaults to 0\r\n    const componentImage =\r\n      factionPool[currentFactionIndex!][imageSource[component]];\r\n    return (\r\n      <div\r\n        className={classNames(styles.container, {\r\n          [styles.inactive]: !stepActive,\r\n        })}\r\n      >\r\n        <img\r\n          className={styles.image}\r\n          src={\r\n            componentImage\r\n              ? process.env.PUBLIC_URL + \"/images/\" + componentImage\r\n              : defaultImage\r\n          }\r\n          alt=\"\" // Image is just decoration, so hide from screen readers\r\n          aria-hidden=\"true\"\r\n        />{\" \"}\r\n        &#215;\r\n        {t(\"component.\" + component, {\r\n          count: componentCount,\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n","import classNames from \"classnames\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport {\r\n  selectFactionPool,\r\n  selectFlowState,\r\n  selectSetupParameters,\r\n  setCurrentFactionIndex,\r\n  setErrorMessage,\r\n} from \"../../features\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./factionSelect.module.css\";\r\nimport defaultImage from \"../../images/componentDefault.png\";\r\nimport { useContext } from \"react\";\r\nimport { StepContext } from \"../step\";\r\nimport { ReactComponent as MilitantIcon } from \"../../images/icons/militant.svg\";\r\nimport { StatBar } from \"./statBar\";\r\nimport { iconComponents } from \"../icon\";\r\nimport IconList from \"../iconList\";\r\nimport { ComponentCount } from \"./componentCount\";\r\n\r\nexport const FactionSelect: React.FC = () => {\r\n  const { currentFactionIndex, lastFactionLocked } =\r\n    useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const onKeyDownHandler: React.KeyboardEventHandler<HTMLButtonElement> = (\r\n    event\r\n  ) => {\r\n    const focusedIndex = currentFactionIndex ?? 0;\r\n    const maxIndex = factionPool.length - (lastFactionLocked ? 2 : 1);\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1;\r\n      if (newIndex > maxIndex) newIndex = 0;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1;\r\n      if (newIndex < 0) newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      dispatch(setCurrentFactionIndex(newIndex));\r\n      // @ts-expect-error focus function is incorrectly excluded from children typing\r\n      event.currentTarget.parentNode?.children[newIndex].focus();\r\n    }\r\n  };\r\n\r\n  const lastIndex = factionPool.length - 1;\r\n  const selectedFaction =\r\n    currentFactionIndex != null ? factionPool[currentFactionIndex] : null;\r\n  return (\r\n    <>\r\n      <div\r\n        className={styles.carousel}\r\n        role=\"radiogroup\"\r\n        aria-label={t(\"setupStep.selectFaction.subtitle\")}\r\n        aria-required=\"true\"\r\n        aria-invalid={stepActive && errorMessage ? true : undefined}\r\n        aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n        aria-disabled={!stepActive}\r\n      >\r\n        {factionPool.map((faction, index) => {\r\n          // Prepare the faction name in advance as we need to incorporate the vagabond character name (if there is one)\r\n          const factionName = faction.vagabond\r\n            ? t(\"vagabond.\" + faction.vagabond.code + \".name\") +\r\n              \" (\" +\r\n              t(\"faction.\" + faction.key + \".name\") +\r\n              \")\"\r\n            : t(\"faction.\" + faction.key + \".name\");\r\n          // Swap out the faction image for the vagabond image (if we have one)\r\n          const factionImage = faction.vagabond\r\n            ? faction.vagabond.image\r\n            : faction.image;\r\n          return (\r\n            <button\r\n              key={faction.code}\r\n              className={classNames(styles.faction, {\r\n                [styles.militant]: faction.militant,\r\n                [styles.selected]: index === currentFactionIndex,\r\n                [styles.locked]: lastFactionLocked && index === lastIndex,\r\n              })}\r\n              onClick={() => {\r\n                if (index !== currentFactionIndex) {\r\n                  if (!lastFactionLocked || index < lastIndex) {\r\n                    dispatch(setCurrentFactionIndex(index));\r\n                  } else {\r\n                    dispatch(setErrorMessage(\"error.lockedFaction\"));\r\n                  }\r\n                }\r\n              }}\r\n              disabled={!stepActive}\r\n              title={\r\n                stepActive && lastFactionLocked && index === lastIndex\r\n                  ? t(\"error.lockedFaction\")\r\n                  : undefined\r\n              }\r\n              role=\"radio\"\r\n              aria-checked={index === currentFactionIndex}\r\n              aria-disabled={\r\n                stepActive\r\n                  ? lastFactionLocked && index === lastIndex\r\n                  : undefined\r\n              }\r\n              aria-label={\r\n                stepActive\r\n                  ? factionName + faction.militant\r\n                    ? \" (\" + t(\"label.militant\") + \")\"\r\n                    : \"\"\r\n                  : undefined\r\n              }\r\n              // We have to override the tabbing logic to meet the standard of role \"radio\"\r\n              tabIndex={\r\n                stepActive\r\n                  ? index === (currentFactionIndex ?? 0)\r\n                    ? 0\r\n                    : -1\r\n                  : undefined\r\n              }\r\n              onKeyDown={onKeyDownHandler}\r\n            >\r\n              <img\r\n                className={styles.image}\r\n                src={\r\n                  factionImage\r\n                    ? process.env.PUBLIC_URL + \"/images/\" + factionImage\r\n                    : defaultImage\r\n                }\r\n                alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n                aria-hidden=\"true\"\r\n              />\r\n              <div className={styles.title}>\r\n                <span className={styles.label}>\r\n                  {faction.militant ? (\r\n                    <>\r\n                      <MilitantIcon\r\n                        className={styles.icon}\r\n                        title={t(\"label.militant\")}\r\n                      />{\" \"}\r\n                    </>\r\n                  ) : null}\r\n                  {factionName}\r\n                </span>\r\n              </div>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      {stepActive && selectedFaction ? (\r\n        <div className={styles.factionInfo}>\r\n          <div className={styles.stats}>\r\n            <StatBar stat=\"complexity\" />\r\n            <StatBar stat=\"wealth\" />\r\n            <StatBar stat=\"aggression\" />\r\n            <StatBar stat=\"crafting\" />\r\n          </div>\r\n          <div>\r\n            <div className={styles.componentCounts}>\r\n              <ComponentCount component=\"warriors\" />\r\n              <ComponentCount component=\"buildings\" />\r\n              <ComponentCount component=\"tokens\" />\r\n            </div>\r\n            {selectedFaction.vagabond && (\r\n              <>\r\n                <p>\r\n                  <strong>{t(\"label.startingItems\")}.</strong>{\" \"}\r\n                  <IconList list={selectedFaction.vagabond.startingItems} />.\r\n                </p>\r\n                <p>\r\n                  <strong>\r\n                    {t(\"label.specialAction\")}:{\" \"}\r\n                    {t(\"vagabond.\" + selectedFaction.vagabond.code + \".action\")}\r\n                    .\r\n                  </strong>{\" \"}\r\n                  <Trans\r\n                    i18nKey={\r\n                      \"vagabond.\" + selectedFaction.vagabond.code + \".effect\"\r\n                    }\r\n                    components={iconComponents}\r\n                  />\r\n                </p>\r\n              </>\r\n            )}\r\n            <h3 className={styles.summaryTitle}>\r\n              {t(\"faction.\" + selectedFaction.key + \".summaryTitle\")}\r\n            </h3>\r\n            <Trans i18nKey={\"faction.\" + selectedFaction.key + \".summary\"} />\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"numberSelector_container__hUJC+\",\"label\":\"numberSelector_label__gfV2z\",\"button\":\"numberSelector_button__xqW1x\",\"input\":\"numberSelector_input__AA-8i\",\"value\":\"numberSelector_value__NDRMv\"};","import { NumberSelector } from \"./numberSelector\";\nexport default NumberSelector;\nexport * from \"./numberSelector\";\n","import { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./numberSelector.module.css\";\r\n\r\ninterface NumberSelectorProps {\r\n  id: string;\r\n  value: number;\r\n  minVal: number;\r\n  maxVal: number;\r\n  onChange: (value: number) => void;\r\n}\r\n\r\nexport const NumberSelector: React.FC<NumberSelectorProps> = ({\r\n  id,\r\n  value,\r\n  minVal,\r\n  maxVal,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  // This used to be dynamic but we've effectivley constrained this via CSS\r\n  const size = 2;\r\n\r\n  const buttonHandler = (amount: number) => {\r\n    const newValue = value + amount;\r\n    if (newValue >= minVal && newValue <= maxVal) onChange(newValue);\r\n  };\r\n\r\n  const typingHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const rawValue = event.target.value;\r\n    let newValue = Number(rawValue);\r\n    // Only continue processing if the user entered a numeric value\r\n    if (!isNaN(newValue)) {\r\n      // Trim off any extra numbers at the start of the input to allow numbers to be freely typed in\r\n      // We do this in a loop so we keep cutting off leading digits until we get a valid value\r\n      for (let digits = size; digits > 0; digits--) {\r\n        newValue = Number(rawValue.substring(rawValue.length - digits));\r\n        // Stop the loop once the value is small enough\r\n        if (newValue <= maxVal) {\r\n          // Only make the change if the value isn't too small\r\n          if (newValue >= minVal) onChange(newValue);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={\"label.\" + id} />\r\n      </label>\r\n      {stepActive ? (\r\n        <>\r\n          <button className={styles.button} onClick={() => buttonHandler(-1)}>\r\n            -\r\n          </button>\r\n          <input\r\n            id={id}\r\n            inputMode=\"numeric\"\r\n            className={styles.input}\r\n            value={value}\r\n            size={size}\r\n            onChange={typingHandler}\r\n            aria-invalid={stepActive && errorMessage ? true : undefined}\r\n            aria-errormessage={\r\n              stepActive && errorMessage ? \"appError\" : undefined\r\n            }\r\n          />\r\n          <button className={styles.button} onClick={() => buttonHandler(+1)}>\r\n            +\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <span id={id} className={styles.value}>\r\n          {value}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"radiogroup_container__16Ji9\",\"option\":\"radiogroup_option__YGe3u\",\"radio\":\"radiogroup_radio__+1jdM\",\"label\":\"radiogroup_label__XK2wi\",\"inactive\":\"radiogroup_inactive__o-0P1\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./radiogroup.module.css\";\r\n\r\ninterface RadiogroupProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (value: boolean) => void;\r\n}\r\n\r\nexport const Radiogroup: React.FC<RadiogroupProps> = ({\r\n  id,\r\n  defaultValue,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return (\r\n    <fieldset\r\n      name={id}\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n      disabled={!stepActive}\r\n      aria-required=\"true\"\r\n      aria-invalid={stepActive && errorMessage ? true : undefined}\r\n      aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n    >\r\n      {!defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={id + \"False\"}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={!defaultValue}\r\n            onChange={() => onChange(false)}\r\n          />\r\n          <label htmlFor={id + \"False\"} className={styles.label}>\r\n            <Trans i18nKey={\"label.\" + id + \".false\"} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n      {defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={id + \"True\"}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={defaultValue}\r\n            onChange={() => onChange(true)}\r\n          />\r\n          <label htmlFor={id + \"True\"} className={styles.label}>\r\n            <Trans i18nKey={\"label.\" + id + \".true\"} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nRadiogroup.defaultProps = {\r\n  defaultValue: false,\r\n};\r\n","import { Radiogroup } from \"./radiogroup\";\nexport default Radiogroup;\nexport * from \"./radiogroup\";\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRestart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M77.25 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C175.6 444.9 183.8 448 192 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L77.25 256zM269.3 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C367.6 444.9 375.8 448 384 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L269.3 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRestart);\nexport default __webpack_public_path__ + \"static/media/restart.1f1bc0fcdd3af260a646146f9839655a.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"stepList_container__IfzTc\"};","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"button_button__PG3Cq\",\"disabled\":\"button_disabled__5xK1c\",\"icon\":\"button_icon__iOc2W\",\"labelLeft\":\"button_labelLeft__wAHmQ\",\"labelRight\":\"button_labelRight__2ampU\"};","import classNames from \"classnames\";\r\nimport React from \"react\";\r\nimport styles from \"./button.module.css\";\r\n\r\ninterface ButtonProps\r\n  extends React.DetailedHTMLProps<\r\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    HTMLButtonElement\r\n  > {\r\n  Icon?: React.ElementType;\r\n  iconLeft?: boolean;\r\n}\r\n\r\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  (\r\n    { className, disabled, onClick, Icon, iconLeft, children, ...props },\r\n    ref\r\n  ) => {\r\n    const renderIconLeft = Icon && iconLeft;\r\n    const renderIconRight = Icon && !iconLeft;\r\n    const buttonIcon = Icon && <Icon className={styles.icon} />;\r\n    return (\r\n      <button\r\n        {...props}\r\n        ref={ref}\r\n        className={classNames(styles.button, className, {\r\n          [styles.disabled]: disabled,\r\n        })}\r\n        onClick={disabled ? undefined : onClick}\r\n      >\r\n        {renderIconLeft ? buttonIcon : null}\r\n        {children && (\r\n          <span\r\n            className={classNames({\r\n              [styles.labelRight]: renderIconLeft,\r\n              [styles.labelLeft]: renderIconRight,\r\n            })}\r\n          >\r\n            {children}\r\n          </span>\r\n        )}\r\n        {renderIconRight ? buttonIcon : null}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\nButton.defaultProps = {\r\n  iconLeft: false,\r\n};\r\n","import { Button } from \"./button\";\nexport default Button;\nexport * from \"./button\";\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2868256c5d35189e90f781fe73fc5c34.svg\";\nexport { ForwardRef as ReactComponent };","import { StepList } from \"./stepList\";\r\nexport default StepList;\r\nexport * from \"./stepList\";\r\n","import { useTranslation } from \"react-i18next\";\r\nimport {\r\n  enableMapLandmark,\r\n  fixFirstPlayer,\r\n  selectDeckArray,\r\n  selectExpansionArray,\r\n  selectFactionCodeArray,\r\n  selectHirelingArray,\r\n  selectLandmarkArray,\r\n  selectMapArray,\r\n  selectSetupParameters,\r\n  setLandmarkCount,\r\n  setPlayerCount,\r\n  skipSteps,\r\n  toggleDeck,\r\n  toggleExpansion,\r\n  toggleHireling,\r\n  toggleLandmark,\r\n  toggleMap,\r\n  selectFactionArray,\r\n  toggleFaction,\r\n  selectVagabondArray,\r\n  toggleVagabond,\r\n  selectFlowState,\r\n  selectFactionPool,\r\n  selectSetupMap,\r\n  resetFlow,\r\n} from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport Checkbox from \"../checkbox\";\r\nimport ComponentToggle from \"../componentToggle\";\r\nimport { FactionSelect } from \"../factionSelect\";\r\nimport { useAppDispatch, useAppSelector, useNthLastPlayer } from \"../hooks\";\r\nimport NumberSelector from \"../numberSelector\";\r\nimport Radiogroup from \"../radiogroup\";\r\nimport Step from \"../step\";\r\nimport styles from \"./stepList.module.css\";\r\nimport { ReactComponent as RestartIcon } from \"../../images/icons/restart.svg\";\r\nimport Button from \"../button\";\r\nimport IconList from \"../iconList\";\r\nimport Icon from \"../icon\";\r\n\r\nexport const StepList: React.FC = () => {\r\n  const {\r\n    playerCount,\r\n    fixedFirstPlayer,\r\n    useMapLandmark,\r\n    deck,\r\n    landmarkCount,\r\n    landmark1,\r\n    landmark2,\r\n    hireling1,\r\n    hireling2,\r\n    hireling3,\r\n    excludedFactions,\r\n    playerOrder,\r\n  } = useAppSelector(selectSetupParameters);\r\n  const { currentPlayerIndex, currentFactionIndex, vagabondSetUp } =\r\n    useAppSelector(selectFlowState);\r\n  const { skippedSteps } = useAppSelector(selectFlowState);\r\n\r\n  const factions = useAppSelector(selectFactionArray);\r\n  const maps = useAppSelector(selectMapArray);\r\n  const map = useAppSelector(selectSetupMap);\r\n  const factionCodes = useAppSelector(selectFactionCodeArray);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const selectedVagabond =\r\n    currentFactionIndex != null\r\n      ? factionPool[currentFactionIndex].vagabond\r\n      : undefined;\r\n\r\n  const dispatch = useAppDispatch();\r\n  const nthLastPlayer = useNthLastPlayer();\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <main className={styles.container}>\r\n      <Step step={SetupStep.chooseExpansions}>\r\n        <ComponentToggle\r\n          selector={selectExpansionArray}\r\n          toggleComponent={toggleExpansion}\r\n          getLabelKey={(expansion) => \"expansion.\" + expansion.code}\r\n          getLockedKey={(expansion) =>\r\n            // Prevent the player from deselecting the Root base game\r\n            expansion.base ? \"error.baseExpansionRequired\" : null\r\n          }\r\n          unsorted={true}\r\n        />\r\n        <Checkbox\r\n          id=\"includeBotStep\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpBots]}\r\n          onChange={(checked) =>\r\n            dispatch(skipSteps(SetupStep.setUpBots, !checked))\r\n          }\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.seatPlayers}>\r\n        <NumberSelector\r\n          id=\"playerCount\"\r\n          value={playerCount}\r\n          minVal={skippedSteps[SetupStep.setUpBots] ? 2 : 1}\r\n          maxVal={factions.length - 1}\r\n          onChange={(value) => dispatch(setPlayerCount(value))}\r\n        />\r\n        <Radiogroup\r\n          id=\"fixedFirstPlayer\"\r\n          defaultValue={fixedFirstPlayer}\r\n          onChange={(value) => dispatch(fixFirstPlayer(value))}\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.chooseMap}>\r\n        <ComponentToggle\r\n          selector={selectMapArray}\r\n          toggleComponent={toggleMap}\r\n          getLabelKey={(map) => \"map.\" + map.code + \".name\"}\r\n        />\r\n        {maps.some((map) => map.landmark && map.enabled) ? (\r\n          <Checkbox\r\n            id=\"useMapLandmark\"\r\n            defaultValue={useMapLandmark}\r\n            onChange={(checked) => dispatch(enableMapLandmark(checked))}\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpMap}\r\n        subtitleKey={\"map.\" + map?.code + \".setupTitle\"}\r\n        textKey={\"map.\" + map?.code + \".setup\"}\r\n        translationOptions={{ map: map && t(\"map.\" + map.code + \".name\") }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpMapLandmark}\r\n        subtitleKey={\"landmark.\" + map?.landmark + \".setupTitle\"}\r\n        textKey={\"map.\" + map?.code + \".landmarkSetup\"}\r\n        translationOptions={{ context: map?.code }}\r\n      />\r\n      <Step step={SetupStep.chooseDeck}>\r\n        <ComponentToggle\r\n          selector={selectDeckArray}\r\n          toggleComponent={toggleDeck}\r\n          getLabelKey={(deck) => \"deck.\" + deck.code + \".name\"}\r\n        />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpDeck}\r\n        renderTitle={skippedSteps[SetupStep.chooseDeck]}\r\n        renderSubtitle={!skippedSteps[SetupStep.chooseDeck]}\r\n        subtitleKey={\"deck.\" + deck + \".setupTitle\"}\r\n        textKey={\"deck.\" + deck + \".setup\"}\r\n        translationOptions={{\r\n          context: playerCount < 3 ? \"twoPlayer\" : undefined,\r\n        }}\r\n      />\r\n      <Step step={SetupStep.setUpBots} />\r\n      <Step\r\n        step={SetupStep.chooseLandmarks}\r\n        translationOptions={{\r\n          context: useMapLandmark && map?.landmark ? \"mapLandmark\" : undefined,\r\n        }}\r\n      >\r\n        <NumberSelector\r\n          id=\"landmarkCount\"\r\n          value={landmarkCount}\r\n          minVal={0}\r\n          maxVal={2}\r\n          onChange={(value) => dispatch(setLandmarkCount(value))}\r\n        />\r\n        {landmarkCount > 0 ? (\r\n          <ComponentToggle\r\n            selector={selectLandmarkArray}\r\n            toggleComponent={toggleLandmark}\r\n            getLabelKey={(landmark) => \"landmark.\" + landmark.code + \".name\"}\r\n            getLockedKey={(landmark) =>\r\n              // Disable this landmark if it requires more players to include\r\n              landmark.minPlayers > playerCount\r\n                ? \"error.landmarkNotEnoughPlayers\"\r\n                : // Disable this landmark if it was already used in map setup\r\n                useMapLandmark && landmark.code === map?.landmark\r\n                ? \"error.mapLandmarkUsed\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpLandmark1}\r\n        subtitleKey={\"landmark.\" + landmark1 + \".setupTitle\"}\r\n        textKey={\"landmark.\" + landmark1 + \".setup\"}\r\n        translationOptions={{\r\n          context: map?.code,\r\n          count: nthLastPlayer(1),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpLandmark2}\r\n        subtitleKey={\"landmark.\" + landmark2 + \".setupTitle\"}\r\n        textKey={\"landmark.\" + landmark2 + \".setup\"}\r\n        translationOptions={{\r\n          context: map?.code,\r\n          count: nthLastPlayer(2),\r\n        }}\r\n      />\r\n      <Step step={SetupStep.chooseHirelings}>\r\n        <Checkbox\r\n          id=\"includeHirelings\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpHireling1]}\r\n          onChange={(checked) =>\r\n            dispatch(\r\n              skipSteps(\r\n                [\r\n                  SetupStep.setUpHireling1,\r\n                  SetupStep.setUpHireling2,\r\n                  SetupStep.setUpHireling3,\r\n                  SetupStep.postHirelingSetup,\r\n                ],\r\n                !checked\r\n              )\r\n            )\r\n          }\r\n        />\r\n        {!skippedSteps[SetupStep.setUpHireling1] ? (\r\n          <ComponentToggle\r\n            selector={selectHirelingArray}\r\n            toggleComponent={toggleHireling}\r\n            getLabelKey={(hireling) => \"hireling.\" + hireling.code + \".name\"}\r\n            getLockedKey={(hireling) =>\r\n              // Are we at the max player count (i.e. there are no factions to spare for an equivilent hireling)?\r\n              playerCount >= factionCodes.length - 1 &&\r\n              // Is this hireling one of the faction equivilents?\r\n              hireling.factions.some((faction) =>\r\n                factionCodes.includes(faction)\r\n              )\r\n                ? \"error.factionHirelingExcluded\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpHireling1}\r\n        subtitleKey={\"hireling.\" + hireling1?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling1?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling1?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(1),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling2}\r\n        subtitleKey={\"hireling.\" + hireling2?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling2?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling2?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(2),\r\n        }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling3}\r\n        subtitleKey={\"hireling.\" + hireling3?.code + \".setupTitle\"}\r\n        textKey={\"hireling.\" + hireling3?.code + \".setup\"}\r\n        translationOptions={{\r\n          context: hireling3?.demoted ? \"demoted\" : undefined,\r\n          count: nthLastPlayer(3),\r\n        }}\r\n      />\r\n      <Step step={SetupStep.postHirelingSetup} />\r\n      <Step step={SetupStep.drawCards} />\r\n      <Step step={SetupStep.chooseFactions}>\r\n        <ComponentToggle\r\n          selector={selectFactionArray}\r\n          toggleComponent={toggleFaction}\r\n          getLabelKey={(faction) => \"faction.\" + faction.key + \".name\"}\r\n          getLockedKey={(faction) =>\r\n            // Disable insurgent factions if we're only playing with 2 people and no bots or hirelings\r\n            playerCount < 3 &&\r\n            !faction.militant &&\r\n            skippedSteps[SetupStep.setUpHireling1] &&\r\n            skippedSteps[SetupStep.setUpBots]\r\n              ? \"error.tooFewPlayerInsurgent\"\r\n              : // Disable a faction if it was replaced by an equivilent hireling\r\n              excludedFactions.includes(faction.code)\r\n              ? \"error.hirelingSelected\"\r\n              : null\r\n          }\r\n        />\r\n        {factions.some((faction) => faction.isVagabond && faction.enabled) ? (\r\n          <>\r\n            {t(\"label.selectVagabonds\")}\r\n            <ComponentToggle\r\n              selector={selectVagabondArray}\r\n              toggleComponent={toggleVagabond}\r\n              getLabelKey={(vagabond) => \"vagabond.\" + vagabond.code + \".name\"}\r\n            />\r\n          </>\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.selectFaction}\r\n        translationOptions={{ count: playerOrder[currentPlayerIndex] }}\r\n      >\r\n        <FactionSelect />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpFaction}\r\n        subtitleKey={\r\n          currentFactionIndex != null\r\n            ? \"faction.\" + factionPool[currentFactionIndex].key + \".setupTitle\"\r\n            : undefined\r\n        }\r\n        textKey={\r\n          currentFactionIndex != null\r\n            ? \"faction.\" + factionPool[currentFactionIndex].key + \".setup\"\r\n            : undefined\r\n        }\r\n        translationOptions={{\r\n          context: vagabondSetUp ? \"vagabondSetUp\" : undefined,\r\n          vagabond:\r\n            selectedVagabond &&\r\n            t(\"vagabond.\" + selectedVagabond.code + \".name\"),\r\n        }}\r\n        components={\r\n          selectedVagabond && {\r\n            InitialStartingItems: (\r\n              <IconList list={selectedVagabond.startingItems.slice(0, -1)} />\r\n            ),\r\n            FinalStartingItem: (\r\n              <Icon\r\n                icon={\r\n                  selectedVagabond.startingItems[\r\n                    selectedVagabond.startingItems.length - 1\r\n                  ]\r\n                }\r\n              />\r\n            ),\r\n          }\r\n        }\r\n      />\r\n      <Step\r\n        step={SetupStep.placeScoreMarkers}\r\n        translationOptions={{\r\n          context: vagabondSetUp ? \"vagabondSetUp\" : undefined,\r\n        }}\r\n      />\r\n      <Step step={SetupStep.chooseHand} />\r\n      <Step\r\n        step={SetupStep.setupEnd}\r\n        translationOptions={{ count: playerOrder[0] }}\r\n      >\r\n        <Button\r\n          Icon={RestartIcon}\r\n          iconLeft={true}\r\n          onClick={() => dispatch(resetFlow())}\r\n        >\r\n          {t(\"label.restartSetup\")}\r\n        </Button>\r\n      </Step>\r\n    </main>\r\n  );\r\n};\r\n","import { configureStore, ThunkAction, Action } from \"@reduxjs/toolkit\";\nimport {\n  deckReducer,\n  expansionReducer,\n  factionReducer,\n  flowReducer,\n  hirelingReducer,\n  landmarkReducer,\n  mapReducer,\n  setupReducer,\n  vagabondReducer,\n} from \"../features/\";\n\nexport const store = configureStore({\n  reducer: {\n    deck: deckReducer,\n    expansion: expansionReducer,\n    faction: factionReducer,\n    flow: flowReducer,\n    hireling: hirelingReducer,\n    landmark: landmarkReducer,\n    map: mapReducer,\n    setup: setupReducer,\n    vagabond: vagabondReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"toast_anchor__sElDS\",\"hidden\":\"toast_hidden__kjNra\",\"container\":\"toast_container__Ov1KV\",\"message\":\"toast_message__qABUW\",\"close\":\"toast_close__ECTnm\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUndo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUndo);\nexport default __webpack_public_path__ + \"static/media/undo.5a573c6cc3c17506a909a3a801018a50.svg\";\nexport { ForwardRef as ReactComponent };","import { Toast } from \"./toast\";\nexport default Toast;\nexport * from \"./toast\";\n","import { useTranslation } from \"react-i18next\";\r\nimport styles from \"./toast.module.css\";\r\nimport { ReactComponent as CloseIcon } from \"../../images/icons/close.svg\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { selectSetupParameters, setErrorMessage } from \"../../features\";\r\nimport { useState } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nexport const Toast: React.FC = () => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  // Cache the error message to allow us to continue displaying it as we transition\r\n  const [cachedMessage, setCachedMessage] = useState(errorMessage);\r\n  const dispatch = useAppDispatch();\r\n  const { t } = useTranslation();\r\n\r\n  // Update the cached message if a new one came through\r\n  if (errorMessage != null && errorMessage !== cachedMessage)\r\n    setCachedMessage(errorMessage);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.anchor, { [styles.hidden]: !errorMessage })}\r\n      aria-hidden={!errorMessage}\r\n      aria-live=\"assertive\"\r\n    >\r\n      <div className={styles.container}>\r\n        <span id=\"appError\" className={styles.message}>\r\n          {cachedMessage && t(cachedMessage)}.\r\n        </span>\r\n        <button\r\n          className={styles.close}\r\n          title={t(\"label.closeMessage\")}\r\n          onClick={() => dispatch(setErrorMessage(null))}\r\n          disabled={!errorMessage}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"toolbar_container__Rt5ax\",\"toolbar\":\"toolbar_toolbar__zw8gT\",\"left\":\"toolbar_left__SAzWH\",\"right\":\"toolbar_right__W8Aod\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRedo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRedo);\nexport default __webpack_public_path__ + \"static/media/redo.11634d8fe78742557717ccbadd28ebfd.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNext);\nexport default __webpack_public_path__ + \"static/media/next.f651cefe41f9309065677703624ef585.svg\";\nexport { ForwardRef as ReactComponent };","import { Toolbar } from \"./toolbar\";\nexport default Toolbar;\nexport * from \"./toolbar\";\n","import { useTranslation } from \"react-i18next\";\r\nimport { nextStep, redoStep, selectFlowState, undoStep } from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./toolbar.module.css\";\r\nimport { ReactComponent as UndoIcon } from \"../../images/icons/undo.svg\";\r\nimport { ReactComponent as RedoIcon } from \"../../images/icons/redo.svg\";\r\nimport { ReactComponent as NextIcon } from \"../../images/icons/next.svg\";\r\nimport { useRef, useState } from \"react\";\r\nimport Button from \"../button\";\r\n\r\nexport const Toolbar: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useAppDispatch();\r\n  const { pastSteps, futureSteps, currentStep } =\r\n    useAppSelector(selectFlowState);\r\n  const [focusedIndex, setFocusedIndex] = useState(0);\r\n\r\n  const buttonRefs = [\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n  ];\r\n\r\n  const onKeyDownHandler = (\r\n    event: React.KeyboardEvent<HTMLButtonElement>,\r\n    focusedIndex: number\r\n  ) => {\r\n    const maxIndex = buttonRefs.length - 1;\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1 > maxIndex ? 0 : focusedIndex + 1;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1 < 0 ? maxIndex : focusedIndex - 1;\r\n    } else if (event.key === \"Home\") {\r\n      newIndex = 0;\r\n    } else if (event.key === \"End\") {\r\n      newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      setFocusedIndex(newIndex);\r\n      buttonRefs[newIndex].current?.focus();\r\n    }\r\n  };\r\n\r\n  const undoDisabled = pastSteps.length === 0;\r\n  const redoDisabled = futureSteps.length === 0;\r\n  const nextStepDisabled = currentStep >= SetupStep.setupEnd;\r\n\r\n  return (\r\n    <footer className={styles.container}>\r\n      <div className={styles.toolbar} role=\"toolbar\">\r\n        <Button\r\n          Icon={UndoIcon}\r\n          disabled={undoDisabled}\r\n          className={styles.left}\r\n          ref={buttonRefs[0]}\r\n          onClick={() => {\r\n            dispatch(undoStep());\r\n            setFocusedIndex(0);\r\n          }}\r\n          title={t(\"label.undo\")}\r\n          aria-disabled={undoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 0 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 0)}\r\n        />\r\n        <Button\r\n          Icon={RedoIcon}\r\n          disabled={redoDisabled}\r\n          className={styles.left}\r\n          ref={buttonRefs[1]}\r\n          onClick={() => {\r\n            dispatch(redoStep());\r\n            setFocusedIndex(1);\r\n          }}\r\n          title={t(\"label.redo\")}\r\n          aria-disabled={redoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 1 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 1)}\r\n        />\r\n        <Button\r\n          Icon={NextIcon}\r\n          disabled={nextStepDisabled}\r\n          className={styles.right}\r\n          ref={buttonRefs[2]}\r\n          onClick={() => {\r\n            dispatch(nextStep());\r\n            setFocusedIndex(2);\r\n          }}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 2 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 2)}\r\n        >\r\n          {t(\"label.nextStep\")}\r\n        </Button>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n","// This code is used to register a service worker.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function registerServiceWorker(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = process.env.PUBLIC_URL + \"/service-worker.js\";\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregisterServiceWorker() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport Backend from \"i18next-http-backend\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport Header from \"../header\";\r\nimport StepList from \"../stepList\";\r\nimport { store } from \"../store\";\r\nimport Toast from \"../toast\";\r\nimport Toolbar from \"../toolbar\";\r\nimport { registerServiceWorker } from \"./serviceWorkerRegistration\";\r\n\r\n// Don't try to re-initalize if this chunk got hot-reloaded in a dev environment\r\n(process.env.NODE_ENV !== \"development\" || !i18n.isInitialized) &&\r\n  i18n\r\n    .use(Backend)\r\n    .use(LanguageDetector)\r\n    .use(initReactI18next)\r\n    .init({\r\n      fallbackLng: \"en\",\r\n      debug: process.env.NODE_ENV === \"development\",\r\n      load: \"languageOnly\", // Just load the base language with no locale. Can be removed in the future to support explicit locales\r\n      ns: \"auset\",\r\n      interpolation: {\r\n        escapeValue: false, // not needed for react as it escapes by default\r\n      },\r\n      backend: {\r\n        loadPath: process.env.PUBLIC_URL + \"/locales/{{ns}}-{{lng}}.json\",\r\n      },\r\n    });\r\n\r\nexport const App: React.FC = () => (\r\n  <Provider store={store}>\r\n    <Header />\r\n    <StepList />\r\n    <Toolbar />\r\n    <Toast />\r\n  </Provider>\r\n);\r\n\r\nregisterServiceWorker({\r\n  onUpdate: (registration) => {\r\n    if (registration.waiting) {\r\n      // It's safe to skip waiting because at this point we've already served all the application\r\n      // code and localization, which are the two things that break the app when out of sync\r\n      registration.waiting.postMessage({ type: \"SKIP_WAITING\" });\r\n    }\r\n  },\r\n});\r\n","import { App } from \"./app\";\nexport default App;\nexport * from \"./app\";\nexport * from \"./serviceWorkerRegistration\";\n"],"names":["SetupStep","t","useTranslation","className","styles","src","rootLogo","alt","persistExpansionEnabled","expansionCode","enabled","localStorage","setItem","error","process","expansionEnabled","base","storedVal","getItem","getExpansionConfig","content","addExpansionComponents","state","componentKey","expansion","Object","entries","componentCode","component","setupInitialState","initialState","toggleComponent","prepare","code","payload","reducer","action","takeRandom","list","i","Math","floor","random","length","returnVal","splice","setExpansionEnabled","expansionSlice","createSlice","name","image","undefined","reducers","enableExpansion","disableExpansion","actions","expansionReducers","builder","addCase","deckSlice","toggleDeck","extraReducers","factionSlice","toggleFaction","setupSlice","playerCount","fixedFirstPlayer","playerOrder","errorMessage","map","useMapLandmark","deck","landmarkCount","landmark1","landmark2","hireling1","hireling2","hireling3","excludedFactions","setPlayerCount","fixFirstPlayer","setFirstPlayer","nextPlayer","push","setErrorMessage","enableMapLandmark","setMap","setDeck","setLandmarkCount","setLandmark1","landmark","setLandmark2","setHireling","number","hireling","demoted","factions","clearExcludedFactions","addDefaultCase","pastSteps","currentStep","chooseExpansions","factionPool","lastFactionLocked","vagabondSetUp","currentPlayerIndex","currentFactionIndex","skippedSteps","Array","setupEnd","fill","futureSteps","setUpBots","setUpHireling1","setUpHireling2","setUpHireling3","postHirelingSetup","getSlice","step","playerIndex","factionIndex","applySlice","slice","flowSlice","incrementStep","setUpFaction","vagabond","removedFaction","militant","selectFaction","skipStep","undoStep","previousStep","pop","unshift","redoStep","nextStep","shift","skipSteps","steps","skip","forEach","clearFactionPool","addToFactionPool","faction","vagabondPool","isVagabond","setCurrentPlayerIndex","setCurrentFactionIndex","resetFlow","hirelingSlice","toggleHireling","landmarkSlice","toggleLandmark","mapSlice","toggleMap","vagabondSlice","toggleVagabond","selectComponentArray","select","createSelector","stateSlice","array","object","selectEnabled","filter","value","selectDeckArray","selectExpansionArray","selectFactionArray","selectFactionCodeArray","keys","selectFactionPool","flow","vagabonds","entry","selectFlowState","selectHirelingArray","selectFactionHirelingArray","some","factionCode","includes","selectLandmarkArray","selectMapArray","selectSetupMap","setup","selectSetupParameters","selectVagabondArray","toggleExpansion","dispatch","getState","massComponentToggle","componentEnable","shouldEnable","setupParameters","flowState","doIncrementStep","validationError","decks","chooseDeck","maxPlayerCount","chooseLandmarks","setUpLandmark1","setUpLandmark2","chooseHirelings","seatPlayers","firstPlayer","chooseMap","mapPool","setUpMapLandmark","minPlayers","deckPool","landmarkPool","hirelingPool","every","factionHirelings","factionCodes","spareFactionCount","excludeCount","concat","chooseFactions","workingFactionPool","insurgentFactions","selectEnabledInsurgentFactions","vagabondFactionCount","reduce","count","useAppDispatch","useDispatch","useAppSelector","useSelector","iconDict","fox","key","mouse","rabbit","bag","boot","coin","crossbow","hammer","sword","tea","torch","Icon","icon","children","stepActive","useContext","StepContext","iconAlt","classNames","title","iconComponents","Bag","Boot","Coin","Crossbow","Fox","Hammer","Mouse","Rabbit","Sword","Tea","Torch","defaultValue","createContext","StepProvider","Provider","Step","renderTitle","renderSubtitle","subtitleKey","textKey","textBelowChildren","translationOptions","components","i18n","sectionElement","useRef","stepRendered","useEffect","current","scrollIntoView","behavior","window","matchMedia","matches","titleText","subtitleText","defaultTitleKey","exists","defaultSubtitleKey","document","ref","Trans","i18nKey","tOptions","defaultProps","_path","id","onChange","type","defaultChecked","disabled","e","target","checked","htmlFor","selector","getLabelKey","getLockedKey","unsorted","sortedComponents","useMemo","returnValue","label","sort","a","b","localeCompare","language","componentLockedKey","componentLocked","onClick","tabIndex","role","defaultImage","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMilitant","_ref","svgRef","titleId","props","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","d","ForwardRef","StatBar","stat","statValue","IconList","item","index","imageSource","warriors","buildings","tokens","ComponentCount","componentCount","componentImage","FactionSelect","onKeyDownHandler","event","newIndex","focusedIndex","maxIndex","preventDefault","currentTarget","parentNode","focus","lastIndex","selectedFaction","factionName","factionImage","onKeyDown","startingItems","minVal","maxVal","buttonHandler","amount","newValue","inputMode","size","rawValue","Number","isNaN","digits","substring","Radiogroup","SvgRestart","Button","React","iconLeft","renderIconLeft","renderIconRight","buttonIcon","maps","selectedVagabond","nthLastPlayer","position","useNthLastPlayer","setUpMap","context","setUpDeck","drawCards","InitialStartingItems","FinalStartingItem","placeScoreMarkers","chooseHand","RestartIcon","store","configureStore","deckReducer","expansionReducer","factionReducer","flowReducer","hirelingReducer","landmarkReducer","mapReducer","setupReducer","vagabondReducer","SvgClose","useState","cachedMessage","setCachedMessage","SvgUndo","SvgRedo","SvgNext","setFocusedIndex","buttonRefs","undoDisabled","redoDisabled","nextStepDisabled","UndoIcon","RedoIcon","NextIcon","isLocalhost","Boolean","location","hostname","match","registerServiceWorker","config","navigator","URL","href","origin","addEventListener","swUrl","fetch","headers","then","response","contentType","get","status","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","unregisterServiceWorker","message","Backend","use","LanguageDetector","initReactI18next","init","fallbackLng","debug","load","ns","interpolation","escapeValue","backend","loadPath","App","waiting","postMessage"],"sourceRoot":""}