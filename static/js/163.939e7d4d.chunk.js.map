{"version":3,"file":"static/js/163.939e7d4d.chunk.js","mappings":"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","sources":["features/expansionSlice.ts","webpack://root-automated-setup/./src/components/header/header.module.css?9833","components/header/index.ts","components/header/header.tsx","features/reduxUtils.ts","types.ts","features/deckSlice.ts","features/factionSlice.ts","features/hirelingSlice.ts","features/landmarkSlice.ts","features/mapSlice.ts","features/vagabondSlice.ts","features/setupSlice.ts","features/flowSlice.ts","components/hooks.ts","webpack://root-automated-setup/./src/components/step/step.module.css?0b07","components/step/stepContext.ts","components/step/step.tsx","components/step/index.ts","images/militant.svg","webpack://root-automated-setup/./src/components/checkbox/checkbox.module.css?86aa","components/checkbox/index.ts","components/checkbox/checkbox.tsx","webpack://root-automated-setup/./src/components/componentToggle/componentToggle.module.css?92bd","components/componentToggle/index.ts","components/componentToggle/componentToggle.tsx","webpack://root-automated-setup/./src/components/factionSelect/factionSelect.module.css?cfdb","components/factionSelect/factionSelect.tsx","webpack://root-automated-setup/./src/components/numberSelector/numberSelector.module.css?b36a","components/numberSelector/index.ts","components/numberSelector/numberSelector.tsx","webpack://root-automated-setup/./src/components/radiogroup/radiogroup.module.css?7099","components/radiogroup/radiogroup.tsx","components/radiogroup/index.ts","images/close.svg","webpack://root-automated-setup/./src/components/stepList/stepList.module.css?e896","components/stepList/index.ts","components/stepList/stepList.tsx","components/store.ts","webpack://root-automated-setup/./src/components/toast/toast.module.css?25a7","images/undo.svg","components/toast/index.ts","components/toast/toast.tsx","webpack://root-automated-setup/./src/components/toolbar/toolbar.module.css?f173","images/redo.svg","images/restart.svg","images/next.svg","components/toolbar/index.ts","components/toolbar/toolbar.tsx","components/app/app.tsx","components/app/index.ts"],"sourcesContent":["import {\n  ActionReducerMapBuilder,\n  createSlice,\n  Draft,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\nimport content from \"../components/content.json\";\nimport { AppThunk, RootState } from \"../components/store\";\nimport {\n  expansionEnabled,\n  getExpansionConfig,\n  persistExpansionEnabled,\n  selectComponentArray,\n} from \"./reduxUtils\";\nimport { ComponentState, Expansion, ExpansionComponent } from \"../types\";\n\nlet initialState: ComponentState<Expansion> = {};\nfor (const [expansionCode, expansion] of Object.entries(content)) {\n  initialState[expansionCode] = {\n    base: expansion.base,\n    image: expansion.image === \"\" ? undefined : expansion.image,\n    enabled: expansionEnabled(expansionCode, expansion.base),\n  };\n}\n\nconst setExpansionEnabled = (\n  state: ComponentState<Expansion>,\n  expansionCode: string,\n  enabled: boolean\n) => {\n  // Retreive the expansion (may return undefined if code does not exist)\n  const expansion = state[expansionCode];\n  // Only update the expansion state if it exists and is not the base game\n  if (expansion != null && !expansion.base) {\n    expansion.enabled = enabled;\n    persistExpansionEnabled(expansionCode, expansion.enabled);\n  }\n};\n\n/** Redux Selector for returning a specified Expansion from state */\nexport const selectExpansion = (state: RootState, code: string) =>\n  state.expansion[code];\n\n/** Redux Selector for returning the expansion list as an array, moving the object key to the object field \"code\" */\nexport const selectExpansionArray = selectComponentArray(\n  (state) => state.expansion\n);\n\nexport const expansionSlice = createSlice({\n  name: \"expansion\",\n  initialState,\n  reducers: {\n    enableExpansion: (state, action: PayloadAction<string>) =>\n      setExpansionEnabled(state, action.payload, true),\n    disableExpansion: (state, action: PayloadAction<string>) =>\n      setExpansionEnabled(state, action.payload, false),\n  },\n});\n\nexport const { enableExpansion, disableExpansion } = expansionSlice.actions;\nexport default expansionSlice.reducer;\n\n/** Function for adding automatic enable/disable expansion reducers to a redux slice */\nexport const expansionReducers = <T extends ExpansionComponent>(\n  builder: ActionReducerMapBuilder<ComponentState<T>>,\n  addExpansionComponents: (\n    state: Draft<ComponentState<T>>,\n    expansionCode: string\n  ) => void\n) => {\n  builder\n    .addCase(enableExpansion, (state, action) =>\n      addExpansionComponents(state, action.payload)\n    )\n    .addCase(disableExpansion, (state, action) => {\n      // Skip processing for the base game, as that cannot be disabled\n      if (!getExpansionConfig(action.payload)?.base) {\n        // Remove all components matching the disabled expansion\n        for (const [componentCode, component] of Object.entries(state)) {\n          if (component.expansionCode === action.payload) {\n            delete state[componentCode];\n          }\n        }\n      }\n    });\n};\n\n/** Thunk for toggling an expansion, dispatching either the enableExpansion or disableExpansion action */\nexport const toggleExpansion =\n  (expansionCode: string): AppThunk =>\n  (dispatch, getState) => {\n    // Retreive the expansion (may return undefined if code does not exist)\n    const expansion = selectExpansion(getState(), expansionCode);\n    // Only update the expansion state if it exists and is not the base game\n    if (expansion != null && !expansion.base) {\n      // Dispatch action to invert current state. We need to do this so all slices can react to the expansion state change\n      if (expansion.enabled) {\n        dispatch(disableExpansion(expansionCode));\n      } else {\n        dispatch(enableExpansion(expansionCode));\n      }\n    }\n  };\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"header_container__HZLDB\",\"logo\":\"header_logo__zVSNC\",\"subtitle\":\"header_subtitle__D1X2k\"};","import { Header } from \"./header\";\nexport default Header;\nexport * from \"./header\";\n","import styles from \"./header.module.css\";\r\nimport rootLogo from \"../../images/logo.png\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nexport const Header: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <header className={styles.container}>\r\n      <img src={rootLogo} alt={t(\"label.logoAlt\")} className={styles.logo} />\r\n      <div className={styles.subtitle}>{t(\"label.logoText\")}</div>\r\n    </header>\r\n  );\r\n};\r\n","import { createSelector, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport content from \"../components/content.json\";\r\nimport { AppThunk, RootState } from \"../components/store\";\r\nimport { GameComponent, ComponentState, WithCode } from \"../types\";\r\n\r\nexport const isTrue = \"1\";\r\nexport const isFalse = \"0\";\r\n\r\n/**\r\n * Helper function for getting the details of a specified expansion from content.json\r\n * @param expansionCode The expansion code to look up as a key on content.json\r\n */\r\nexport const getExpansionConfig = (expansionCode: string) =>\r\n  // It sucks, but we have to circumvent type saftey here\r\n  // Blame typescript's very loose typings of Object.entries preventing us from typing more strongly\r\n  content[expansionCode as keyof typeof content];\r\n\r\n/**\r\n * Saves the enable/disable state of the specified expansion to localStorage\r\n * @param expansionCode\r\n * @param enabled\r\n */\r\nexport const persistExpansionEnabled = (\r\n  expansionCode: string,\r\n  enabled: boolean\r\n) => {\r\n  try {\r\n    localStorage.setItem(expansionCode, enabled ? isTrue : isFalse);\r\n  } catch (error: any) {\r\n    console.warn(\r\n      `Failed to persist enable state of ${enabled} for expansion ${expansionCode}`,\r\n      error\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Function to return the enabled state of a given expansion in localStorage, for the purpose of setting up the initial redux state\r\n * @param expansionCode The code of the expansion to check. Also the key of the value stored in localStorage\r\n * @param base If the given expansion is actually the base game, and thus is always enabled regardless of localStorage\r\n */\r\nexport const expansionEnabled = (\r\n  expansionCode: string,\r\n  base: boolean\r\n): boolean => {\r\n  // Base game is always enabled, so no need to save or load localStorage\r\n  if (base) return true;\r\n\r\n  // Load the current enable state from localStorage so we remember user settings\r\n  let storedVal = localStorage.getItem(expansionCode);\r\n  let enabled: boolean;\r\n\r\n  // Was there a value stored in localStorage?\r\n  if (storedVal != null) {\r\n    // Convert the string stored in localStorage to a boolean\r\n    enabled = storedVal === isTrue;\r\n  } else {\r\n    // Default to false, then save that state to localStorage for future\r\n    enabled = false;\r\n    persistExpansionEnabled(expansionCode, enabled);\r\n  }\r\n\r\n  return enabled;\r\n};\r\n\r\n/**\r\n * Redux Selector for returning a component list as an array, moving the component key to the component field \"code\"\r\n * @param select Select function for selecting the component list from the root state\r\n */\r\nexport const selectComponentArray = <T>(\r\n  select: (state: RootState) => ComponentState<T>\r\n) =>\r\n  createSelector(select, (stateSlice) => {\r\n    const array = [];\r\n    for (const [code, object] of Object.entries(stateSlice)) {\r\n      array.push({ ...object, code });\r\n    }\r\n    return array;\r\n  });\r\n\r\n/**\r\n * Generic function for populating the starting state of a Redux slice using the provided addExpansionComponents function\r\n * @param addExpansionComponents Function for extracting state from a given expansion\r\n */\r\nexport const setupInitialState = <T>(\r\n  addExpansionComponents: (\r\n    state: ComponentState<T>,\r\n    expansionCode: string,\r\n    expansion?: any\r\n  ) => void\r\n) => {\r\n  const initialState: ComponentState<T> = {};\r\n  for (const [expansionCode, expansion] of Object.entries(content)) {\r\n    if (expansionEnabled(expansionCode, expansion.base)) {\r\n      addExpansionComponents(initialState, expansionCode, expansion);\r\n    }\r\n  }\r\n  return initialState;\r\n};\r\n\r\n/**\r\n * Generic version of Toggle reducer for enabling or disabling a component in state\r\n * @param code The component code to be enabled or disabled\r\n * @param enabled An override value for component enable. Will default to toggling the component if not provided\r\n */\r\nexport const toggleComponent = {\r\n  prepare: (code: string, enabled?: boolean) => ({\r\n    payload: {\r\n      code: code,\r\n      enabled: enabled,\r\n    },\r\n  }),\r\n  reducer: <T extends GameComponent>(\r\n    state: ComponentState<T>,\r\n    action: PayloadAction<{ code: string; enabled?: boolean }>\r\n  ) => {\r\n    // Retreive the component\r\n    const component = state[action.payload.code];\r\n    // Only update the component state if it exists\r\n    if (component != null) {\r\n      // Toggle enabled value\r\n      component.enabled = action.payload.enabled ?? !component.enabled;\r\n    } else {\r\n      console.warn(\r\n        \"Invalid payload for toggleComponent action: Payload code not found in component state\",\r\n        action\r\n      );\r\n    }\r\n  },\r\n};\r\n\r\n/** Thunk action for mass updating the enable/disable state of multiple components, dispatching the minimum amount of actions to do so */\r\nexport const massComponentToggle =\r\n  <T extends GameComponent>(\r\n    selectComponentArray: (state: RootState) => WithCode<T>[],\r\n    componentEnable:\r\n      | boolean\r\n      | ((\r\n          component: WithCode<T>,\r\n          index: number,\r\n          array: WithCode<T>[]\r\n        ) => boolean),\r\n    toggleComponent: (\r\n      code: string,\r\n      enabled?: boolean\r\n    ) => PayloadAction<{ code: string; enabled?: boolean }>\r\n  ): AppThunk =>\r\n  (dispatch, getState) => {\r\n    selectComponentArray(getState()).forEach((component, index, array) => {\r\n      // Calculate what the enable state of the component should be\r\n      const shouldEnable =\r\n        typeof componentEnable === \"function\"\r\n          ? componentEnable(component, index, array)\r\n          : componentEnable;\r\n      // If the desired state does not match the actual state, fix it\r\n      if (component.enabled !== shouldEnable) {\r\n        dispatch(toggleComponent(component.code, shouldEnable));\r\n      }\r\n    });\r\n  };\r\n\r\n/**\r\n * Returns a random element from a given list, while also removing it\r\n * @param list The list of elements to be randomly selected\r\n */\r\nexport const takeRandom = <T>(list: T[]): T => {\r\n  // Get a random index in the given list (i.e. between 0 inclusive and list.length exclusive)\r\n  const i = Math.floor(Math.random() * list.length);\r\n  // Save value at given index so we can return it\r\n  const returnVal = list[i];\r\n  // Delete 1 element starting at chosen index\r\n  list.splice(i, 1);\r\n  return returnVal;\r\n};\r\n","/** A game component that can be enabled or disabled, and may have an associated image */\r\nexport interface GameComponent {\r\n  enabled: boolean;\r\n  image?: string;\r\n}\r\n\r\n/** An object representing a game component from an expansion. It holds the same information as a game component but also saves the expansion it is from */\r\nexport interface ExpansionComponent extends GameComponent {\r\n  expansionCode: string;\r\n}\r\n\r\n/** A generic object where each key is the code of an underlying object */\r\nexport interface ComponentState<T> {\r\n  [code: string]: T;\r\n}\r\n\r\n/** Adds the field \"code\" to an existing type */\r\nexport type WithCode<T> = T & {\r\n  code: string;\r\n};\r\n\r\n/** An object representing an Expansion or Base Box for the Root board game */\r\nexport interface Expansion extends GameComponent {\r\n  base: boolean;\r\n}\r\n\r\n/** An object representing a Faction from the Root board game */\r\nexport interface Faction extends ExpansionComponent {\r\n  key: string;\r\n  militant: boolean;\r\n  isVagabond: boolean;\r\n  warriors: number;\r\n  buildings: number;\r\n  tokens: number;\r\n}\r\n\r\n/** An object representing a physical Hireling card from the Root board game, which could be Promoted or Demoted */\r\nexport interface Hireling extends ExpansionComponent {\r\n  factions: string[];\r\n  warriors: number;\r\n  components: number;\r\n  componentName?: string;\r\n}\r\n\r\n/** An object representing a Landmark piece from the Root board game */\r\nexport interface Landmark extends ExpansionComponent {\r\n  minPlayers: number;\r\n}\r\n\r\n/** An object representing a Map from the Root board game */\r\nexport interface MapComponent extends ExpansionComponent {\r\n  printedSuits: boolean;\r\n  landmark?: string;\r\n}\r\n\r\n/** An object representing a Vagabond character from the Root board game */\r\nexport interface Vagabond extends ExpansionComponent {\r\n  startingItems: string[];\r\n}\r\n\r\n/** An object representing an promoted or demoted Hireling */\r\nexport interface HirelingEntry {\r\n  code: string;\r\n  demoted: boolean;\r\n}\r\n\r\n/** An object containing all variables used during the setup process */\r\nexport interface SetupState {\r\n  playerCount: number;\r\n  fixedFirstPlayer: boolean;\r\n  playerOrder: number[];\r\n  errorMessage: string | null;\r\n  // Map\r\n  map: string | null;\r\n  useMapLandmark: boolean;\r\n  // Deck\r\n  deck: string | null;\r\n  // Landmarks\r\n  landmarkCount: 0 | 1 | 2;\r\n  landmark1: string | null;\r\n  landmark2: string | null;\r\n  // Hirelings\r\n  hireling1: HirelingEntry | null;\r\n  hireling2: HirelingEntry | null;\r\n  hireling3: HirelingEntry | null;\r\n  // Factions\r\n  excludedFactions: string[];\r\n}\r\n\r\n/** An enum of the individual steps in the setup process. The setup process will step through this list during execution */\r\nexport enum SetupStep {\r\n  chooseExpansions,\r\n  chooseMap,\r\n  setUpMap,\r\n  setUpMapLandmark,\r\n  chooseDeck,\r\n  setUpDeck,\r\n  setUpBots,\r\n  seatPlayers,\r\n  chooseLandmarks,\r\n  setUpLandmark1,\r\n  setUpLandmark2,\r\n  chooseHirelings,\r\n  setUpHireling1,\r\n  setUpHireling2,\r\n  setUpHireling3,\r\n  postHirelingSetup,\r\n  drawCards,\r\n  chooseFactions,\r\n  selectFaction,\r\n  setUpFaction,\r\n  placeScoreMarkers,\r\n  chooseHand,\r\n  setupEnd,\r\n}\r\n\r\n/** An object representing a faction in the faction pool, along with it's assigned vagabond character (if it has one) */\r\nexport interface FactionEntry {\r\n  code: string;\r\n  militant: boolean;\r\n  vagabond?: string;\r\n}\r\n\r\n/** An object representing a slice of history for the flow state */\r\nexport interface FlowSlice {\r\n  step: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  playerIndex: number;\r\n  factionIndex: number | null;\r\n}\r\n\r\n/** An object representing the current flow state, including the current step, past and future steps, and what steps should be skipped */\r\nexport interface FlowState {\r\n  pastSteps: FlowSlice[];\r\n  currentStep: SetupStep;\r\n  factionPool: FactionEntry[];\r\n  lastFactionLocked: boolean;\r\n  currentPlayerIndex: number;\r\n  currentFactionIndex: number | null;\r\n  skippedSteps: boolean[];\r\n  futureSteps: FlowSlice[];\r\n}\r\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getExpansionConfig,\n  selectComponentArray,\n  setupInitialState,\n  toggleComponent,\n} from \"./reduxUtils\";\nimport { RootState } from \"../components/store\";\nimport { ComponentState, ExpansionComponent } from \"../types\";\nimport { expansionReducers } from \"./expansionSlice\";\n\nconst addExpansionDecks = (\n  state: ComponentState<ExpansionComponent>,\n  expansionCode: string,\n  expansion = getExpansionConfig(expansionCode)\n) => {\n  if (expansion != null && \"decks\" in expansion) {\n    for (const [deckCode, deck] of Object.entries(expansion.decks)) {\n      // Don't add to state if it already exists\n      if (state[deckCode] == null) {\n        state[deckCode] = {\n          image: deck.image === \"\" ? undefined : deck.image,\n          expansionCode: expansionCode,\n          enabled: true,\n        };\n      } else {\n        console.warn(\n          `While enabling expansion \"${expansionCode}\", deck with duplicate code \"${deckCode}\" not added to state:`,\n          deck\n        );\n      }\n    }\n  }\n};\n\n/** Redux Selector for returning a specified Deck from state */\nexport const selectDeck = (state: RootState, code: string) => state.deck[code];\n\n/** Redux Selector for returning the deck list as an array, moving the object key to the object field \"code\" */\nexport const selectDeckArray = selectComponentArray((state) => state.deck);\n\n/** Redux Selector for returning an array of enabled decks */\nexport const selectEnabledDecks = createSelector(selectDeckArray, (array) =>\n  array.filter((value) => value.enabled)\n);\n\nexport const deckSlice = createSlice({\n  name: \"deck\",\n  initialState: setupInitialState(addExpansionDecks),\n  reducers: {\n    toggleDeck: toggleComponent,\n  },\n  extraReducers: (builder) => expansionReducers(builder, addExpansionDecks),\n});\n\nexport const { toggleDeck } = deckSlice.actions;\nexport default deckSlice.reducer;\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\r\nimport {\r\n  getExpansionConfig,\r\n  selectComponentArray,\r\n  setupInitialState,\r\n  toggleComponent,\r\n} from \"./reduxUtils\";\r\nimport { RootState } from \"../components/store\";\r\nimport { ComponentState, Faction } from \"../types\";\r\nimport { expansionReducers } from \"./expansionSlice\";\r\n\r\nconst addExpansionFactions = (\r\n  state: ComponentState<Faction>,\r\n  expansionCode: string,\r\n  expansion = getExpansionConfig(expansionCode)\r\n) => {\r\n  if (expansion != null && \"factions\" in expansion)\r\n    for (const [factionCode, faction] of Object.entries(expansion.factions)) {\r\n      // Don't add to state if it already exists\r\n      if (state[factionCode] == null) {\r\n        state[factionCode] = {\r\n          ...faction,\r\n          image: faction.image === \"\" ? undefined : faction.image,\r\n          expansionCode: expansionCode,\r\n          enabled: true,\r\n        };\r\n      } else {\r\n        console.warn(\r\n          `While enabling expansion \"${expansionCode}\", faction with duplicate code \"${factionCode}\" not added to state:`,\r\n          faction\r\n        );\r\n      }\r\n    }\r\n};\r\n\r\n/** Redux Selector for returning a specified Faction from state */\r\nexport const selectFaction = (state: RootState, code: string) =>\r\n  state.faction[code];\r\n\r\n/** Redux Selector for returning the faction list as an array, moving the object key to the object field \"code\" */\r\nexport const selectFactionArray = selectComponentArray(\r\n  (state) => state.faction\r\n);\r\n\r\n/** Redux Selector for returning an array of included faction codes */\r\nexport const selectFactionCodeArray = (state: RootState) =>\r\n  Object.keys(state.faction);\r\n\r\n/** Redux Selector for returning an array of enabled militant factions */\r\nexport const selectEnabledMilitantFactions = createSelector(\r\n  selectFactionArray,\r\n  (array) => array.filter((value) => value.enabled && value.militant)\r\n);\r\n\r\n/** Redux Selector for returning an array of enabled non-militant factions */\r\nexport const selectEnabledInsurgentFactions = createSelector(\r\n  selectFactionArray,\r\n  (array) => array.filter((value) => value.enabled && !value.militant)\r\n);\r\n\r\n/** Redux Selector for returning an array of enabled vagabond factions */\r\nexport const selectEnabledVagabondFactions = createSelector(\r\n  selectFactionArray,\r\n  (array) => array.filter((value) => value.enabled && value.isVagabond)\r\n);\r\n\r\nexport const factionSlice = createSlice({\r\n  name: \"faction\",\r\n  initialState: setupInitialState(addExpansionFactions),\r\n  reducers: {\r\n    toggleFaction: toggleComponent,\r\n  },\r\n  extraReducers: (builder) => expansionReducers(builder, addExpansionFactions),\r\n});\r\n\r\nexport const { toggleFaction } = factionSlice.actions;\r\nexport default factionSlice.reducer;\r\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getExpansionConfig,\n  selectComponentArray,\n  setupInitialState,\n  toggleComponent,\n} from \"./reduxUtils\";\nimport { RootState } from \"../components/store\";\nimport { ComponentState, Hireling } from \"../types\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { selectFactionCodeArray } from \"./factionSlice\";\n\nconst addExpansionHirelings = (\n  state: ComponentState<Hireling>,\n  expansionCode: string,\n  expansion = getExpansionConfig(expansionCode)\n) => {\n  if (expansion != null && \"hirelings\" in expansion)\n    for (const [hirelingCode, hireling] of Object.entries(\n      expansion.hirelings\n    )) {\n      // Don't add to state if it already exists\n      if (state[hirelingCode] == null) {\n        state[hirelingCode] = {\n          ...hireling,\n          image: hireling.image === \"\" ? undefined : hireling.image,\n          componentName:\n            hireling.componentName === \"\" ? undefined : hireling.componentName,\n          expansionCode: expansionCode,\n          enabled: true,\n        };\n      } else {\n        console.warn(\n          `While enabling expansion \"${expansionCode}\", hireling with duplicate code \"${hirelingCode}\" not added to state:`,\n          hireling\n        );\n      }\n    }\n};\n\n/** Redux Selector for returning a specified Hireling from state */\nexport const selectHireling = (state: RootState, code: string) =>\n  state.hireling[code];\n\n/** Redux Selector for returning the hireling list as an array, moving the object key to the object field \"code\" */\nexport const selectHirelingArray = selectComponentArray(\n  (state) => state.hireling\n);\n\n/** Redux Selector for returning an array of all hirelings that replace an included faction */\nexport const selectFactionHirelingArray = createSelector(\n  selectHirelingArray,\n  selectFactionCodeArray,\n  (hirelings, factionCodes) =>\n    hirelings.filter((hireling) =>\n      // Only include a hireling if at least one of it's faction codes matches an enabled faction\n      hireling.factions.some((factionCode) =>\n        factionCodes.includes(factionCode)\n      )\n    )\n);\n\n/** Redux Selector for returning an array of enabled hirelings that replace an included faction */\nexport const selectEnabledFactionHirelings = createSelector(\n  selectFactionHirelingArray,\n  (array) => array.filter((value) => value.enabled)\n);\n\n/** Redux Selector for returning an array of enabled hirelings that do not replace an included faction */\nexport const selectEnabledIndependentHirelings = createSelector(\n  selectHirelingArray,\n  selectFactionCodeArray,\n  (hirelings, factionCodes) =>\n    hirelings.filter(\n      (hireling) =>\n        hireling.enabled &&\n        // Only include a hireling if none of it's faction codes matches an enabled faction\n        hireling.factions.every(\n          (factionCode) => !factionCodes.includes(factionCode)\n        )\n    )\n);\n\nexport const hirelingSlice = createSlice({\n  name: \"hireling\",\n  initialState: setupInitialState(addExpansionHirelings),\n  reducers: {\n    toggleHireling: toggleComponent,\n  },\n  extraReducers: (builder) => expansionReducers(builder, addExpansionHirelings),\n});\n\nexport const { toggleHireling } = hirelingSlice.actions;\nexport default hirelingSlice.reducer;\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getExpansionConfig,\n  selectComponentArray,\n  setupInitialState,\n  toggleComponent,\n} from \"./reduxUtils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { RootState } from \"../components/store\";\nimport { ComponentState, Landmark } from \"../types\";\n\nconst addExpansionLandmarks = (\n  state: ComponentState<Landmark>,\n  expansionCode: string,\n  expansion = getExpansionConfig(expansionCode)\n) => {\n  if (expansion != null && \"landmarks\" in expansion)\n    for (const [landmarkCode, landmark] of Object.entries(\n      expansion.landmarks\n    )) {\n      // Don't add to state if it already exists\n      if (state[landmarkCode] == null) {\n        state[landmarkCode] = {\n          ...landmark,\n          image: landmark.image === \"\" ? undefined : landmark.image,\n          expansionCode: expansionCode,\n          enabled: true,\n        };\n      } else {\n        console.warn(\n          `While enabling expansion \"${expansionCode}\", landmark with duplicate code \"${landmarkCode}\" not added to state:`,\n          landmark\n        );\n      }\n    }\n};\n\n/** Redux Selector for returning a specified Landmark from state */\nexport const selectLandmark = (state: RootState, code: string) =>\n  state.landmark[code];\n\n/** Redux Selector for returning the landmark list as an array, moving the object key to the object field \"code\" */\nexport const selectLandmarkArray = selectComponentArray(\n  (state) => state.landmark\n);\n\n/** Redux Selector for returning an array of enabled landmarks */\nexport const selectEnabledLandmarks = createSelector(\n  selectLandmarkArray,\n  (array) => array.filter((value) => value.enabled)\n);\n\nexport const landmarkSlice = createSlice({\n  name: \"landmark\",\n  initialState: setupInitialState(addExpansionLandmarks),\n  reducers: {\n    toggleLandmark: toggleComponent,\n  },\n  extraReducers: (builder) => expansionReducers(builder, addExpansionLandmarks),\n});\n\nexport const { toggleLandmark } = landmarkSlice.actions;\nexport default landmarkSlice.reducer;\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getExpansionConfig,\n  selectComponentArray,\n  setupInitialState,\n  toggleComponent,\n} from \"./reduxUtils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { RootState } from \"../components/store\";\nimport { ComponentState, MapComponent } from \"../types\";\n\nconst addExpansionMaps = (\n  state: ComponentState<MapComponent>,\n  expansionCode: string,\n  expansion = getExpansionConfig(expansionCode)\n) => {\n  if (expansion != null && \"maps\" in expansion)\n    for (const [mapCode, map] of Object.entries(expansion.maps)) {\n      // Don't add to state if it already exists\n      if (state[mapCode] == null) {\n        state[mapCode] = {\n          ...map,\n          landmark: map.landmark === \"\" ? undefined : map.landmark,\n          image: map.image === \"\" ? undefined : map.image,\n          expansionCode: expansionCode,\n          enabled: true,\n        };\n      } else {\n        console.warn(\n          `While enabling expansion \"${expansionCode}\", map with duplicate code \"${mapCode}\" not added to state:`,\n          map\n        );\n      }\n    }\n};\n\n/** Redux Selector for returning a specified Map from state */\nexport const selectMap = (state: RootState, code: string) => state.map[code];\n\n/** Redux Selector for returning the map list as an array, moving the object key to the object field \"code\" */\nexport const selectMapArray = selectComponentArray((state) => state.map);\n\n/** Redux Selector for returning an array of enabled maps */\nexport const selectEnabledMaps = createSelector(selectMapArray, (array) =>\n  array.filter((value) => value.enabled)\n);\n\n/** Redux Selector for returning an array of enabled maps which have a landmark */\nexport const selectEnabledLandmarkMaps = createSelector(\n  selectEnabledMaps,\n  (array) => array.filter((value) => value.landmark != null)\n);\n\nexport const mapSlice = createSlice({\n  name: \"map\",\n  initialState: setupInitialState(addExpansionMaps),\n  reducers: {\n    toggleMap: toggleComponent,\n  },\n  extraReducers: (builder) => expansionReducers(builder, addExpansionMaps),\n});\n\nexport const { toggleMap } = mapSlice.actions;\nexport default mapSlice.reducer;\n","import { createSelector, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getExpansionConfig,\n  selectComponentArray,\n  setupInitialState,\n  toggleComponent,\n} from \"./reduxUtils\";\nimport { expansionReducers } from \"./expansionSlice\";\nimport { RootState } from \"../components/store\";\nimport { ComponentState, Vagabond } from \"../types\";\n\nconst addExpansionVagabonds = (\n  state: ComponentState<Vagabond>,\n  expansionCode: string,\n  expansion = getExpansionConfig(expansionCode)\n) => {\n  if (expansion != null && \"vagabonds\" in expansion)\n    for (const [vagabondCode, vagabond] of Object.entries(\n      expansion.vagabonds\n    )) {\n      // Don't add to state if it already exists\n      if (state[vagabondCode] == null) {\n        state[vagabondCode] = {\n          ...vagabond,\n          image: vagabond.image === \"\" ? undefined : vagabond.image,\n          expansionCode: expansionCode,\n          enabled: true,\n        };\n      } else {\n        console.warn(\n          `While enabling expansion \"${expansionCode}\", vagabond with duplicate code \"${vagabondCode}\" not added to state:`,\n          vagabond\n        );\n      }\n    }\n};\n\n/** Redux Selector for returning a specified Vagabond from state */\nexport const selectVagabond = (state: RootState, code: string) =>\n  state.vagabond[code];\n\n/** Redux Selector for returning the vagabond list as an array, moving the object key to the object field \"code\" */\nexport const selectVagabondArray = selectComponentArray(\n  (state) => state.vagabond\n);\n\n/** Redux Selector for returning an array of enabled vagabonds */\nexport const selectEnabledVagabonds = createSelector(\n  selectVagabondArray,\n  (array) => array.filter((value) => value.enabled)\n);\n\nexport const vagabondSlice = createSlice({\n  name: \"vagabond\",\n  initialState: setupInitialState(addExpansionVagabonds),\n  reducers: {\n    toggleVagabond: toggleComponent,\n  },\n  extraReducers: (builder) => expansionReducers(builder, addExpansionVagabonds),\n});\n\nexport const { toggleVagabond } = vagabondSlice.actions;\nexport default vagabondSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { AppThunk, RootState } from \"../components/store\";\nimport { selectDeckArray, selectEnabledDecks } from \"./deckSlice\";\nimport {\n  selectFactionCodeArray,\n  selectEnabledInsurgentFactions,\n  selectEnabledMilitantFactions,\n  selectEnabledVagabondFactions,\n  toggleFaction,\n  selectFactionArray,\n} from \"./factionSlice\";\nimport {\n  selectEnabledFactionHirelings,\n  selectHirelingArray,\n  selectEnabledIndependentHirelings,\n  toggleHireling,\n  selectFactionHirelingArray,\n} from \"./hirelingSlice\";\nimport {\n  selectEnabledLandmarks,\n  selectLandmarkArray,\n  toggleLandmark,\n} from \"./landmarkSlice\";\nimport { selectEnabledMaps } from \"./mapSlice\";\nimport { massComponentToggle, takeRandom } from \"./reduxUtils\";\nimport {\n  ExpansionComponent,\n  Hireling,\n  HirelingEntry,\n  Landmark,\n  MapComponent,\n  SetupState,\n  SetupStep,\n  WithCode,\n} from \"../types\";\nimport {\n  addToFactionPool,\n  clearFactionPool,\n  incrementStep,\n  selectFlowState,\n  setCurrentPlayerIndex,\n  skipSteps,\n} from \"./flowSlice\";\nimport { selectEnabledVagabonds } from \"./vagabondSlice\";\n\nconst initialState: SetupState = {\n  playerCount: 4,\n  fixedFirstPlayer: false,\n  playerOrder: [],\n  errorMessage: null,\n  // Map\n  map: null,\n  useMapLandmark: true,\n  // Deck\n  deck: null,\n  // Landmarks\n  landmarkCount: 0,\n  landmark1: null,\n  landmark2: null,\n  // Hirelings\n  hireling1: null,\n  hireling2: null,\n  hireling3: null,\n  // Factions\n  excludedFactions: [],\n};\n\n/** Returns the setup parameters from redux state */\nexport const selectSetupParameters = (state: RootState) => state.setup;\n\n/** Returns the object for the map selected in setup */\nexport const selectSetupMap = (state: RootState) =>\n  state.setup.map != null\n    ? { ...state.map[state.setup.map], code: state.setup.map }\n    : null;\n\n/** Returns the object for the deck selected in setup */\nexport const selectSetupDeck = (state: RootState) =>\n  state.setup.deck != null\n    ? { ...state.deck[state.setup.deck], code: state.setup.deck }\n    : null;\n\n/** Returns the object for the first landmark selected in setup */\nexport const selectSetupLandmark1 = (state: RootState) =>\n  state.setup.landmark1 != null\n    ? {\n        ...state.landmark[state.setup.landmark1],\n        code: state.setup.landmark1,\n      }\n    : null;\n\n/** Returns the object for the second landmark selected in setup */\nexport const selectSetupLandmark2 = (state: RootState) =>\n  state.setup.landmark2 != null\n    ? {\n        ...state.landmark[state.setup.landmark2],\n        code: state.setup.landmark2,\n      }\n    : null;\n\n/** Returns the object for the first hireling selected in setup */\nexport const selectSetupHireling1 = (state: RootState) =>\n  state.setup.hireling1 != null\n    ? {\n        ...state.hireling[state.setup.hireling1.code],\n        ...state.setup.hireling1,\n      }\n    : null;\n\n/** Returns the object for the second hireling selected in setup */\nexport const selectSetupHireling2 = (state: RootState) =>\n  state.setup.hireling2 != null\n    ? {\n        ...state.hireling[state.setup.hireling2.code],\n        ...state.setup.hireling2,\n      }\n    : null;\n\n/** Returns the object for the third hireling selected in setup */\nexport const selectSetupHireling3 = (state: RootState) =>\n  state.setup.hireling3 != null\n    ? {\n        ...state.hireling[state.setup.hireling3.code],\n        ...state.setup.hireling3,\n      }\n    : null;\n\nexport const setupSlice = createSlice({\n  name: \"setup\",\n  initialState: initialState,\n  reducers: {\n    setPlayerCount: (state, action: PayloadAction<number>) => {\n      // Make sure the player count is valid (i.e. above 0)\n      if (action.payload >= 1) {\n        state.playerCount = action.payload;\n        state.errorMessage = null;\n      } else {\n        console.warn(\n          \"Invalid payload for setPlayerCount action: Payload must be a number above 0\",\n          action\n        );\n      }\n    },\n    fixFirstPlayer: (state, action: PayloadAction<boolean>) => {\n      state.fixedFirstPlayer = action.payload;\n      state.errorMessage = null;\n    },\n    setFirstPlayer: (state, action: PayloadAction<number>) => {\n      // Make sure the player count is valid (i.e. between 1 and playerCount)\n      if (action.payload >= 1 && action.payload <= state.playerCount) {\n        state.playerOrder = [];\n        // Generate the player order array\n        for (let i = 0; i < state.playerCount; i++) {\n          // Add each player to the array, starting with the first player\n          let nextPlayer = action.payload + i;\n          if (nextPlayer > state.playerCount) nextPlayer -= state.playerCount;\n          state.playerOrder.push(nextPlayer);\n        }\n      } else {\n        console.warn(\n          `Invalid payload for setFirstPlayer action: Payload must be a number between 1 and playerCount (${state.playerCount})`,\n          action\n        );\n      }\n    },\n    setErrorMessage: (state, action: PayloadAction<string | null>) => {\n      state.errorMessage = action.payload;\n    },\n    enableMapLandmark: (state, action: PayloadAction<boolean>) => {\n      state.useMapLandmark = action.payload;\n      state.errorMessage = null;\n    },\n    setMap: {\n      prepare: (map: WithCode<MapComponent>) => ({ payload: map.code }),\n      reducer: (state, action: PayloadAction<string>) => {\n        state.map = action.payload;\n      },\n    },\n    setDeck: {\n      prepare: (deck: WithCode<ExpansionComponent>) => ({ payload: deck.code }),\n      reducer: (state, action: PayloadAction<string>) => {\n        state.deck = action.payload;\n      },\n    },\n    setLandmarkCount: (state, action: PayloadAction<number>) => {\n      // We use === instead of >= or <= to ensure typescript can infer the correct payload type\n      if (\n        action.payload === 0 ||\n        action.payload === 1 ||\n        action.payload === 2\n      ) {\n        state.landmarkCount = action.payload;\n        state.errorMessage = null;\n      } else {\n        console.warn(\n          \"Invalid payload for setLandmarkCount action: Payload must be a number between 0 and 2\",\n          action\n        );\n      }\n    },\n    setLandmark1: {\n      prepare: (landmark: WithCode<Landmark>) => ({ payload: landmark.code }),\n      reducer: (state, action: PayloadAction<string>) => {\n        if (state.landmarkCount >= 1) {\n          state.landmark1 = action.payload;\n        } else {\n          console.warn(\n            \"Invalid setLandmark1 action: Cannot set landmark 1 when landmark count less than 1\",\n            action\n          );\n        }\n      },\n    },\n    setLandmark2: {\n      prepare: (landmark: WithCode<Landmark>) => ({ payload: landmark.code }),\n      reducer: (state, action: PayloadAction<string>) => {\n        if (state.landmarkCount >= 2) {\n          state.landmark2 = action.payload;\n        } else {\n          console.warn(\n            \"Invalid setLandmark2 action: Cannot set landmark 2 when landmark count less than 2\",\n            action\n          );\n        }\n      },\n    },\n    setHireling: {\n      prepare: (\n        number: number,\n        hireling: WithCode<Hireling>,\n        demoted: boolean\n      ) => ({\n        payload: {\n          number,\n          hireling: hireling.code,\n          factions: hireling.factions,\n          demoted,\n        },\n      }),\n      reducer: (\n        state,\n        action: PayloadAction<{\n          number: number;\n          hireling: string;\n          factions: string[];\n          demoted: boolean;\n        }>\n      ) => {\n        if (action.payload.number >= 1 && action.payload.number <= 3) {\n          const hireling: HirelingEntry = {\n            code: action.payload.hireling,\n            demoted: action.payload.demoted,\n          };\n\n          if (action.payload.number === 1) state.hireling1 = hireling;\n          if (action.payload.number === 2) state.hireling2 = hireling;\n          if (action.payload.number === 3) state.hireling3 = hireling;\n\n          state.excludedFactions.push(...action.payload.factions);\n        } else {\n          console.warn(\n            'Invalid payload for setHireling action: Payload field \"number\" must be a number between 1 and 3',\n            action\n          );\n        }\n      },\n    },\n    clearExcludedFactions: (state) => {\n      state.excludedFactions = [];\n    },\n  },\n  extraReducers: (builder) => {\n    // This allows us to always reset the displayed error if the user makes a seperate input\n    builder.addDefaultCase((state) => {\n      state.errorMessage = null;\n    });\n  },\n});\n\nexport const {\n  setPlayerCount,\n  fixFirstPlayer,\n  setFirstPlayer,\n  setErrorMessage,\n  enableMapLandmark,\n  setMap,\n  setDeck,\n  setLandmarkCount,\n  setLandmark1,\n  setLandmark2,\n  setHireling,\n  clearExcludedFactions,\n} = setupSlice.actions;\nexport default setupSlice.reducer;\n\n/** Advances to the next step in setup, performing all validation logic and state changes required for each step */\nexport const nextStep = (): AppThunk => (dispatch, getState) => {\n  // Retrieve our setup state\n  const setupParameters = selectSetupParameters(getState());\n  const flowState = selectFlowState(getState());\n  let doIncrementStep = true;\n  let validationError: string | null = null;\n\n  // Handle any special logic that fires at the end of a step\n  switch (flowState.currentStep) {\n    case SetupStep.chooseExpansions:\n      // After locking in the Choosen expansions, we need to calculate which steps can be skipped\n      // Do we need to choose a deck?\n      const decks = selectDeckArray(getState());\n      if (decks.length === 1) {\n        // Auto select the only deck\n        dispatch(setDeck(decks[0]));\n        dispatch(skipSteps(SetupStep.chooseDeck, true));\n      } else {\n        // Make sure we do the choose deck step\n        dispatch(skipSteps(SetupStep.chooseDeck, false));\n      }\n\n      // Correct our current playercount if it is too low or high (this can occur with undo/redo)\n      if (\n        setupParameters.playerCount < 2 &&\n        flowState.skippedSteps[SetupStep.setUpBots]\n      ) {\n        dispatch(setPlayerCount(2));\n      } else {\n        const maxPlayerCount = selectFactionCodeArray(getState()).length - 1;\n        if (setupParameters.playerCount > maxPlayerCount) {\n          dispatch(setPlayerCount(maxPlayerCount));\n        }\n      }\n\n      // Are there any landmarks that can be set up?\n      dispatch(\n        skipSteps(\n          [\n            SetupStep.chooseLandmarks,\n            SetupStep.setUpLandmark1,\n            SetupStep.setUpLandmark2,\n          ],\n          selectLandmarkArray(getState()).length === 0\n        )\n      );\n\n      // Are there any hirelings that can be set up?\n      if (selectHirelingArray(getState()).length === 0) {\n        // We must ensure all hireling setup is skipped\n        dispatch(\n          skipSteps(\n            [\n              SetupStep.chooseHirelings,\n              SetupStep.setUpHireling1,\n              SetupStep.setUpHireling2,\n              SetupStep.setUpHireling3,\n              SetupStep.postHirelingSetup,\n            ],\n            true\n          )\n        );\n        // Clear the exlcude faction pool of any potential stale data from previous setups\n        // We need to do this here since we're skipping the chooseHirelings step\n        if (setupParameters.excludedFactions.length > 0)\n          dispatch(clearExcludedFactions());\n      } else {\n        // By default we still skip the actual hireling setup, as per other optional components\n        dispatch(skipSteps(SetupStep.chooseHirelings, false));\n      }\n      break;\n\n    case SetupStep.chooseMap:\n      // Get our list of maps which are avaliable for selection (copying the result so we don't alter the memoized list)\n      let mapPool = [...selectEnabledMaps(getState())];\n\n      // Check that there is even a map to be selected...\n      if (mapPool.length > 0) {\n        // Choose a random map\n        const map = takeRandom(mapPool);\n        dispatch(setMap(map));\n\n        // Do the map landmark setup if we have one\n        dispatch(\n          skipSteps(\n            SetupStep.setUpMapLandmark,\n            !setupParameters.useMapLandmark || !map.landmark\n          )\n        );\n      } else {\n        // Invalid state, do not proceed\n        doIncrementStep = false;\n        validationError = \"error.noMap\";\n      }\n      break;\n\n    case SetupStep.chooseDeck:\n      // Get our list of decks which are avaliable for selection (copying the result so we don't alter the memoized list)\n      let deckPool = [...selectEnabledDecks(getState())];\n\n      // Check that there is even a deck to be selected...\n      if (deckPool.length > 0) {\n        // Choose a random deck\n        dispatch(setDeck(takeRandom(deckPool)));\n      } else {\n        // Invalid state, do not proceed\n        doIncrementStep = false;\n        validationError = \"error.noDeck\";\n      }\n      break;\n\n    case SetupStep.seatPlayers:\n      let firstPlayer: number;\n\n      // Do we need to randomise the first player\n      if (setupParameters.fixedFirstPlayer) {\n        // First player is always \"1\" as the player number represents turn order\n        firstPlayer = 1;\n      } else {\n        // Randomly pick a first player between 1 and playerCount, as the player number represents table seating order\n        firstPlayer =\n          Math.floor(Math.random() * setupParameters.playerCount) + 1;\n      }\n      dispatch(setFirstPlayer(firstPlayer));\n\n      // Ensure that any landmarks not supported at this player count or used by map setup are disabled\n      const map = selectSetupMap(getState());\n      dispatch(\n        massComponentToggle(\n          selectLandmarkArray,\n          (landmark) =>\n            landmark.minPlayers <= setupParameters.playerCount &&\n            (!setupParameters.useMapLandmark ||\n              map?.landmark !== landmark.code),\n          toggleLandmark\n        )\n      );\n\n      // Ensure that we include/exclude faction hirelings depending on if we can spare factions for hirelings at our player count\n      dispatch(\n        massComponentToggle(\n          selectFactionHirelingArray,\n          setupParameters.playerCount <\n            selectFactionCodeArray(getState()).length - 1,\n          toggleHireling\n        )\n      );\n\n      // Disable insurgent factions if we're only playing with 2 people and no bots or hirelings\n      dispatch(\n        massComponentToggle(\n          selectFactionArray,\n          (faction) =>\n            setupParameters.playerCount > 2 ||\n            faction.militant ||\n            !flowState.skippedSteps[SetupStep.setUpHireling1] ||\n            !flowState.skippedSteps[SetupStep.setUpBots],\n          toggleFaction\n        )\n      );\n      break;\n\n    case SetupStep.chooseLandmarks:\n      // Get our list of landmarks which are avaliable for selection (copying the result so we don't alter the memoized list)\n      let landmarkPool = [...selectEnabledLandmarks(getState())];\n\n      // Check that there are enough enabled landmarks for how many we want to set up\n      if (landmarkPool.length >= setupParameters.landmarkCount) {\n        // Select the first landmark\n        if (setupParameters.landmarkCount >= 1) {\n          // Choose a random landmark\n          dispatch(setLandmark1(takeRandom(landmarkPool)));\n\n          // Select the second landmark\n          if (setupParameters.landmarkCount >= 2) {\n            // Choose a random landmark\n            dispatch(setLandmark2(takeRandom(landmarkPool)));\n            // Ensure we don't skip the setup steps\n            dispatch(\n              skipSteps(\n                [SetupStep.setUpLandmark1, SetupStep.setUpLandmark2],\n                false\n              )\n            );\n          } else {\n            // Handle skipping just the second landmark setup\n            dispatch(skipSteps(SetupStep.setUpLandmark1, false));\n            dispatch(skipSteps(SetupStep.setUpLandmark2, true));\n          }\n        } else {\n          // We're not setting up any landmarks, so skip both setup steps\n          dispatch(\n            skipSteps(\n              [SetupStep.setUpLandmark1, SetupStep.setUpLandmark2],\n              true\n            )\n          );\n        }\n      } else {\n        // Invalid state, do not proceed\n        doIncrementStep = false;\n\n        // Set the correct error message\n        if (landmarkPool.length === 0) {\n          validationError = \"error.noLandmark\";\n        } else {\n          validationError = \"error.tooFewLandmark\";\n        }\n      }\n      break;\n\n    case SetupStep.chooseHirelings:\n      let excludedFactionsUpdated = false;\n\n      // Clear the exclude faction pool of any potential stale data from previous hireling setups\n      if (setupParameters.excludedFactions.length > 0) {\n        dispatch(clearExcludedFactions());\n        // Flag the update to the excluded factions so we can re-enable any disabled ones if we skip hireling setup\n        excludedFactionsUpdated = true;\n      }\n\n      // Did we skip the hireling setup?\n      if (!flowState.skippedSteps[SetupStep.setUpHireling1]) {\n        // Get our lists of independent & faction hirelings which are avaliable for selection (copying the results so we don't alter the memoized lists)\n        let hirelingPool = [...selectEnabledIndependentHirelings(getState())];\n        let factionHirelings = [...selectEnabledFactionHirelings(getState())];\n\n        // Calculate how many factions we can spare for hirelings (i.e. total factions minus setup faction count)\n        const factionCodes = selectFactionCodeArray(getState());\n        let spareFactionCount =\n          factionCodes.length - (setupParameters.playerCount + 1);\n\n        // If we can only spare 3 or less factions then limit the amount of faction hirelings\n        if (spareFactionCount <= 3) {\n          // Add a random sample of faction hirelings to our pool, ensuring that the random hireling draw will never exclude too many factions for setup\n          while (spareFactionCount > 0 && factionHirelings.length > 0) {\n            // Grab a random faction hireling\n            let hireling = takeRandom(factionHirelings);\n            // Calculate how many factions we will exclude by including it (based on what factions are actually in play)\n            let excludeCount =\n              hireling.factions.length > 1\n                ? // Make sure we only count the factions that are actually in play\n                  hireling.factions.filter((factionCode) =>\n                    factionCodes.includes(factionCode)\n                  ).length\n                : 1;\n            // Ensure that we don't exclude too many factions by addding this hireling (The Exile can cause this edge case)\n            if (spareFactionCount - excludeCount >= 0) {\n              hirelingPool.push(hireling);\n              spareFactionCount -= excludeCount;\n            }\n          }\n        } else {\n          // There are enough spare factions that we can throw all faction hirelings into the mix\n          hirelingPool = hirelingPool.concat(factionHirelings);\n        }\n\n        // Check that there are enough hirelings selected\n        if (hirelingPool.length >= 3) {\n          // Flag the update to the excluded factions so we can disable them later\n          excludedFactionsUpdated = true;\n\n          // Choose three random hirelings\n          for (let number = 1; number <= 3; number++) {\n            dispatch(\n              setHireling(\n                number,\n                takeRandom(hirelingPool),\n                setupParameters.playerCount + number > 5\n              )\n            );\n          }\n        } else {\n          // Invalid state, do not proceed\n          doIncrementStep = false;\n          validationError = \"error.tooFewHireling\";\n        }\n      }\n\n      if (excludedFactionsUpdated) {\n        // Disable the factions that are mutually exclusive with the selected hirelings\n        const excludedFactions = selectSetupParameters(\n          getState()\n        ).excludedFactions;\n        dispatch(\n          massComponentToggle(\n            selectFactionArray,\n            (faction) => !excludedFactions.includes(faction.code),\n            toggleFaction\n          )\n        );\n      }\n      break;\n\n    case SetupStep.chooseFactions:\n      // Clear the faction pool of any potential stale data from previous setups\n      if (flowState.factionPool.length > 0) dispatch(clearFactionPool());\n\n      // Get our list of militant factions and vagabonds which are avaliable for selection (copying the results so we don't alter the memoized lists)\n      let workingFactionPool = [...selectEnabledMilitantFactions(getState())];\n      let vagabondPool = [...selectEnabledVagabonds(getState())];\n\n      // Get our list of insurgent factions to be added to the working faction pool during setup\n      const insurgentFactions = selectEnabledInsurgentFactions(getState());\n      // Get our vagabond faction count to validate our vagabondPool against\n      const vagabondFactionCount = selectEnabledVagabondFactions(\n        getState()\n      ).length;\n\n      // Check that there are enough factions avaliable for setup\n      if (\n        workingFactionPool.length > 0 &&\n        vagabondPool.length >= vagabondFactionCount &&\n        workingFactionPool.length + insurgentFactions.length >=\n          setupParameters.playerCount + 1\n      ) {\n        // Start by adding a random militant faction\n        dispatch(\n          addToFactionPool(takeRandom(workingFactionPool), vagabondPool)\n        );\n        // Add the insurgent factions to the mix\n        workingFactionPool = workingFactionPool.concat(insurgentFactions);\n        // Add enough factions to make the total pool playerCount + 1\n        for (let i = 0; i < setupParameters.playerCount; i++) {\n          dispatch(\n            addToFactionPool(takeRandom(workingFactionPool), vagabondPool)\n          );\n        }\n\n        // Begin the setup at the bottom of player order\n        dispatch(setCurrentPlayerIndex(setupParameters.playerCount - 1));\n      } else {\n        // Invalid state, do not proceed\n        doIncrementStep = false;\n\n        // Set the correct error message\n        if (workingFactionPool.length === 0) {\n          validationError = \"error.noMilitantFaction\";\n        } else if (vagabondPool.length < vagabondFactionCount) {\n          validationError = \"error.tooFewVagabond\";\n        } else {\n          validationError = \"error.tooFewFaction\";\n        }\n      }\n      break;\n\n    case SetupStep.selectFaction:\n      // Ensure the user has actually selected a faction\n      if (flowState.currentFactionIndex == null) {\n        doIncrementStep = false;\n        validationError = \"error.noFaction\";\n      }\n      break;\n\n    case SetupStep.setupEnd:\n      // This is the final step, so don't try to increment\n      doIncrementStep = false;\n      break;\n  }\n\n  // Set the error message if it's changed\n  if (setupParameters.errorMessage !== validationError) {\n    dispatch(setErrorMessage(validationError));\n  }\n\n  // Increment the step if we're still flagged to do so\n  if (doIncrementStep) {\n    dispatch(incrementStep());\n  }\n};\n","import { createSelector, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../components/store\";\r\nimport {\r\n  SetupStep,\r\n  FlowState,\r\n  FlowSlice,\r\n  WithCode,\r\n  Faction,\r\n  Vagabond,\r\n  FactionEntry,\r\n} from \"../types\";\r\nimport { takeRandom } from \"./reduxUtils\";\r\nimport { setErrorMessage } from \"./setupSlice\";\r\n\r\nconst initialState: FlowState = {\r\n  pastSteps: [],\r\n  currentStep: SetupStep.chooseExpansions,\r\n  factionPool: [],\r\n  lastFactionLocked: false,\r\n  currentPlayerIndex: 0,\r\n  currentFactionIndex: null,\r\n  // Create an array with as many elements as there are setup steps\r\n  skippedSteps: Array(SetupStep.setupEnd + 1).fill(false),\r\n  futureSteps: [],\r\n};\r\n// Default to skipping bot & hireling setup steps\r\ninitialState.skippedSteps[SetupStep.setUpBots] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling1] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling2] = true;\r\ninitialState.skippedSteps[SetupStep.setUpHireling3] = true;\r\ninitialState.skippedSteps[SetupStep.postHirelingSetup] = true;\r\n\r\nconst getSlice = (state: FlowState): FlowSlice => ({\r\n  step: state.currentStep,\r\n  // This prevents changes we make to the faction pool in the draft state being reflected in already generated slices\r\n  factionPool: [...state.factionPool],\r\n  lastFactionLocked: state.lastFactionLocked,\r\n  playerIndex: state.currentPlayerIndex,\r\n  factionIndex: state.currentFactionIndex,\r\n});\r\n\r\nconst applySlice = (state: FlowState, slice: FlowSlice) => {\r\n  state.currentStep = slice.step;\r\n  state.factionPool = slice.factionPool;\r\n  state.lastFactionLocked = slice.lastFactionLocked;\r\n  state.currentPlayerIndex = slice.playerIndex;\r\n  state.currentFactionIndex = slice.factionIndex;\r\n};\r\n\r\n/** Returns the flow information (including current step) from redux state */\r\nexport const selectFlowState = (state: RootState) => state.flow;\r\n\r\n/** Returns the faction pool, joining the original faction and vagabond objects into the entries */\r\nexport const selectFactionPool = createSelector(\r\n  (state: RootState) => state.flow.factionPool,\r\n  (state: RootState) => state.faction,\r\n  (state: RootState) => state.vagabond,\r\n  (factionPool, factions, vagabonds) =>\r\n    factionPool.map((entry) => ({\r\n      ...factions[entry.code],\r\n      code: entry.code,\r\n      vagabond: entry.vagabond\r\n        ? { ...vagabonds[entry.vagabond], code: entry.vagabond }\r\n        : undefined,\r\n    }))\r\n);\r\n\r\nexport const flowSlice = createSlice({\r\n  name: \"flow\",\r\n  initialState: initialState,\r\n  reducers: {\r\n    incrementStep: (state, action: PayloadAction) => {\r\n      if (state.currentStep < SetupStep.setupEnd) {\r\n        // Add our current state to the undo queue and clear the redo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        state.futureSteps = [];\r\n\r\n        // Handle special case for faction setup\r\n        if (\r\n          state.currentStep === SetupStep.setUpFaction &&\r\n          state.currentPlayerIndex > 0\r\n        ) {\r\n          // If we still have players left over, move on to the next player\r\n          state.currentPlayerIndex--;\r\n          // Remove the faction we just set up from the pool\r\n          const [removedFaction] = state.factionPool.splice(\r\n            state.currentFactionIndex ?? 0,\r\n            1\r\n          );\r\n          state.currentFactionIndex = null;\r\n          // Clear the last faction lock if the removed faction was militant\r\n          if (state.lastFactionLocked && removedFaction.militant)\r\n            state.lastFactionLocked = false;\r\n          // Return to the faction selection step\r\n          state.currentStep = SetupStep.selectFaction;\r\n        } else {\r\n          // Go to the next non-skipped step\r\n          let skipStep = false;\r\n          do {\r\n            state.currentStep++;\r\n            skipStep = state.skippedSteps[state.currentStep];\r\n          } while (skipStep && state.currentStep < SetupStep.setupEnd);\r\n        }\r\n      } else {\r\n        console.warn(\r\n          `Invalid incrementStep action: Current step must be smaller than ${SetupStep.setupEnd}`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    undoStep: (state, action: PayloadAction) => {\r\n      // Get the previous step from the undo queue\r\n      const previousStep = state.pastSteps.pop();\r\n      if (previousStep != null) {\r\n        // Add our current state to the redo queue\r\n        state.futureSteps.unshift(getSlice(state));\r\n        // Override current state with state from previous step\r\n        applySlice(state, previousStep);\r\n      } else {\r\n        console.warn(\r\n          `Invalid undoStep action: pastSteps array returned empty value (${previousStep})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    redoStep: (state, action: PayloadAction) => {\r\n      // Get the next step from the redo queue\r\n      const nextStep = state.futureSteps.shift();\r\n      if (nextStep != null) {\r\n        // Add our current state to the undo queue\r\n        state.pastSteps.push(getSlice(state));\r\n        // Override current state with state from next step\r\n        applySlice(state, nextStep);\r\n      } else {\r\n        console.warn(\r\n          `Invalid redoStep action: futureSteps array returned empty value (${nextStep})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    skipSteps: {\r\n      prepare: (steps: SetupStep | SetupStep[], skip: boolean) => ({\r\n        payload: {\r\n          steps: typeof steps === \"number\" ? [steps] : steps,\r\n          skip: skip,\r\n        },\r\n      }),\r\n      reducer: (\r\n        state,\r\n        action: PayloadAction<{ steps: SetupStep[]; skip: boolean }>\r\n      ) => {\r\n        action.payload.steps.forEach((step) => {\r\n          state.skippedSteps[step] = action.payload.skip;\r\n        });\r\n        state.futureSteps = [];\r\n      },\r\n    },\r\n    clearFactionPool: (state) => {\r\n      state.factionPool = [];\r\n      state.lastFactionLocked = false;\r\n      state.currentFactionIndex = null;\r\n      state.futureSteps = [];\r\n    },\r\n    addToFactionPool: {\r\n      prepare: (\r\n        faction: WithCode<Faction>,\r\n        vagabondPool: WithCode<Vagabond>[]\r\n      ) => ({\r\n        payload: {\r\n          code: faction.code,\r\n          militant: faction.militant,\r\n          vagabond: faction.isVagabond\r\n            ? takeRandom(vagabondPool).code\r\n            : undefined,\r\n        },\r\n      }),\r\n      reducer: (state, action: PayloadAction<FactionEntry>) => {\r\n        // Add to our pool, and set it to locked if insurgent\r\n        state.factionPool.push(action.payload);\r\n        state.lastFactionLocked = !action.payload.militant;\r\n        state.futureSteps = [];\r\n      },\r\n    },\r\n    setCurrentPlayerIndex: (state, action: PayloadAction<number>) => {\r\n      if (action.payload >= 0) {\r\n        state.currentPlayerIndex = action.payload;\r\n        state.futureSteps = [];\r\n      } else {\r\n        console.warn(\r\n          \"Invalid payload for setCurrentPlayerIndex action: Payload must be a number larger than or equal to 0\",\r\n          action\r\n        );\r\n      }\r\n    },\r\n    setCurrentFactionIndex: (state, action: PayloadAction<number>) => {\r\n      if (action.payload >= 0 && action.payload < state.factionPool.length) {\r\n        state.currentFactionIndex = action.payload;\r\n        state.futureSteps = [];\r\n      } else {\r\n        console.warn(\r\n          `Invalid payload for setCurrentFactionIndex action: Payload must be a number larger than or equal to 0 but smaller than the faction pool length (${state.factionPool.length})`,\r\n          action\r\n        );\r\n      }\r\n    },\r\n    resetFlow: (state) => {\r\n      state.pastSteps = [];\r\n      state.currentStep = SetupStep.chooseExpansions;\r\n      state.futureSteps = [];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    // This allows us to always reset the redo queue if the setup state changes\r\n    builder\r\n      // Don't wipe redo queue when the only thing that happened was displaying an error\r\n      .addCase(setErrorMessage, () => {})\r\n      .addDefaultCase((state) => {\r\n        state.futureSteps = [];\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  incrementStep,\r\n  undoStep,\r\n  redoStep,\r\n  skipSteps,\r\n  clearFactionPool,\r\n  addToFactionPool,\r\n  setCurrentPlayerIndex,\r\n  setCurrentFactionIndex,\r\n  resetFlow,\r\n} = flowSlice.actions;\r\nexport default flowSlice.reducer;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { selectSetupParameters } from \"../features\";\nimport type { RootState, AppDispatch } from \"./store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n/** Returns a function for returning the player number for a specifed point in turn order */\nexport const useNthLastPlayer = () => {\n  const { playerOrder } = useAppSelector(selectSetupParameters);\n  return (position: number) => {\n    if (playerOrder.length > 0) {\n      let index = -position;\n      do {\n        index += playerOrder.length;\n      } while (index < 0);\n      return playerOrder[index];\n    }\n    return 0;\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"step\":\"step_step__jmF6G\",\"inactive\":\"step_inactive__+Mdoy\",\"title\":\"step_title__d40nQ\",\"subtitle\":\"step_subtitle__3pYFe\"};","import { createContext } from \"react\";\r\n\r\ninterface StepContextValue {\r\n  stepActive: boolean;\r\n}\r\n\r\nconst defaultValue: StepContextValue = {\r\n  stepActive: false,\r\n};\r\n\r\nexport const StepContext = createContext(defaultValue);\r\nexport const StepProvider = StepContext.Provider;\r\nexport default StepContext;\r\n","import classNames from \"classnames\";\r\nimport { TOptions } from \"i18next\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { selectFlowState } from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport styles from \"./step.module.css\";\r\nimport { StepProvider } from \"./stepContext\";\r\n\r\ninterface StepProps {\r\n  step: SetupStep;\r\n  renderTitle?: boolean;\r\n  renderSubtitle?: boolean;\r\n  subtitleOptions?: TOptions;\r\n  textKey?: string;\r\n  textCount?: number;\r\n  textOptions?: Omit<TOptions, \"count\">; // For Trans component count cannot be passed in with options\r\n  textBelowChildren?: boolean;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport const Step: React.FC<StepProps> = ({\r\n  step,\r\n  renderTitle,\r\n  renderSubtitle,\r\n  subtitleOptions,\r\n  textKey,\r\n  textCount,\r\n  textOptions,\r\n  textBelowChildren,\r\n  children,\r\n}) => {\r\n  const { currentStep, skippedSteps } = useAppSelector(selectFlowState);\r\n  const { t, i18n } = useTranslation();\r\n  const sectionElement = useRef<HTMLElement>(null);\r\n\r\n  // Figure out if we are the active step so we can tell children and trigger effects\r\n  const stepActive = currentStep === step;\r\n\r\n  // Trigger a scroll-to effect when we become active\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      sectionElement.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  });\r\n\r\n  // Generate the Title Text in advance so we can use it to rename the window (if required)\r\n  const titleText =\r\n    // Only generate if the prerequisites for rendering the title are met\r\n    renderTitle ?? i18n.exists(`setupStep.${SetupStep[step]}.title`)\r\n      ? t(`setupStep.${SetupStep[step]}.title`)\r\n      : null;\r\n\r\n  // Generate the subtitle Text in advance so we can use it to rename the window (if required)\r\n  const subtitleText =\r\n    // Only generate if the prerequisites for rendering the subtitle are met\r\n    renderSubtitle ??\r\n    subtitleOptions ?? // We need to render if options are passed in as i18n.exists misses dynamic keys\r\n    i18n.exists(`setupStep.${SetupStep[step]}.subtitle`)\r\n      ? t(`setupStep.${SetupStep[step]}.subtitle`, subtitleOptions)\r\n      : null;\r\n\r\n  // Rename the window to match our step (if we are the active step)\r\n  useEffect(() => {\r\n    if (stepActive)\r\n      // Preappend the step title or subtitle if our step has one\r\n      document.title = `${\r\n        titleText ?? subtitleText ? `${titleText ?? subtitleText} - ` : \"\"\r\n      }${t(\"label.pageTitle\")}`;\r\n  }, [stepActive, titleText, subtitleText, t]);\r\n\r\n  // Skip rendering if the setup process isn't up to our step or we were skipped\r\n  if (currentStep >= step && !skippedSteps[step]) {\r\n    // Seperate the JSX for step text as it's rendering position changes based on textBelowChildren\r\n    const stepText = (\r\n      <Trans\r\n        i18nKey={textKey ?? `setupStep.${SetupStep[step]}.body`}\r\n        count={textCount}\r\n        tOptions={textOptions}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <section\r\n        className={classNames(styles.step, { [styles.inactive]: !stepActive })}\r\n        ref={sectionElement}\r\n      >\r\n        {titleText != null ? (\r\n          <h1 className={styles.title}>{titleText}</h1>\r\n        ) : null}\r\n        {subtitleText != null ? (\r\n          <h2 className={styles.subtitle}>{subtitleText}.</h2>\r\n        ) : null}\r\n        {!textBelowChildren ? stepText : null}\r\n        {children && (\r\n          <StepProvider value={{ stepActive }}>{children}</StepProvider>\r\n        )}\r\n        {textBelowChildren ? stepText : null}\r\n      </section>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nStep.defaultProps = {\r\n  textBelowChildren: false,\r\n};\r\n","import { Step } from \"./step\";\nexport default Step;\nexport * from \"./step\";\nexport * from \"./stepContext\";\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMilitant(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 57 57\",\n    style: {\n      enableBackground: \"new 0 0 57 57\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M57,0h-8.837L18.171,29.992l-4.076-4.076l-1.345-4.034c-0.22-0.663-0.857-1.065-1.55-0.98 c-0.693,0.085-1.214,0.63-1.268,1.327l-0.572,7.438l5.982,5.982L4.992,46H2.274C1.02,46,0,47.02,0,48.274v6.452 C0,55.98,1.02,57,2.274,57h6.452C9.98,57,11,55.98,11,54.726v-3.421l10-10l6.021,6.021l6.866-1.145 c0.685-0.113,1.182-0.677,1.21-1.37c0.028-0.693-0.422-1.295-1.096-1.464l-3.297-0.824l-4.043-4.043L57,8.489V0z M9,54.726 C9,54.877,8.877,55,8.726,55H2.274C2.123,55,2,54.877,2,54.726v-6.452C2,48.123,2.123,48,2.274,48h0.718h5.734 C8.877,48,9,48.123,9,48.274v5.031V54.726z M11,48.477v-0.203C11,47.02,9.98,46,8.726,46H7.82l8.938-8.938l1.417,1.417l1.411,1.411 L11,48.477z M30.942,44.645l-3.235,0.54l-5.293-5.293l0,0l-2.833-2.833l-8.155-8.155l0.292-3.796l0.63,1.89l4.41,4.41l0,0 l4.225,4.225l8.699,8.699L30.942,44.645z M25.247,37.066l-2.822-2.822l-2.839-2.839L48.991,2h4.243L23.829,31.406 c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293L55,3.062v4.592L25.247,37.066z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMilitant);\nexport default __webpack_public_path__ + \"static/media/militant.4708c67a499bc925b7614c6ae04fce14.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"checkbox_container__p8WwE\",\"checkbox\":\"checkbox_checkbox__iCqtL\",\"label\":\"checkbox_label__JoQ4b\",\"inactive\":\"checkbox_inactive__ceSyz\"};","import { Checkbox } from \"./checkbox\";\nexport default Checkbox;\nexport * from \"./checkbox\";\n","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./checkbox.module.css\";\r\n\r\ninterface CheckboxProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (checked: boolean) => void;\r\n}\r\n\r\nexport const Checkbox: React.FC<CheckboxProps> = ({\r\n  id,\r\n  defaultValue,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return defaultValue || stepActive ? (\r\n    <div\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      <input\r\n        id={id}\r\n        type=\"checkbox\"\r\n        className={styles.checkbox}\r\n        defaultChecked={defaultValue ?? false}\r\n        disabled={!stepActive}\r\n        onChange={(e) => onChange(e.target.checked)}\r\n        aria-invalid={stepActive && errorMessage ? true : undefined}\r\n        aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n      />\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={`label.${id}`} />\r\n      </label>\r\n    </div>\r\n  ) : null;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"componentToggle_carousel__5k7Pu\",\"inactive\":\"componentToggle_inactive__eKCim\",\"component\":\"componentToggle_component__m66Eq\",\"enabled\":\"componentToggle_enabled__ejvB7\",\"locked\":\"componentToggle_locked__xGt+U\",\"image\":\"componentToggle_image__0dsXK\",\"label\":\"componentToggle_label__uaA-k\"};","import { ComponentToggle } from \"./componentToggle\";\nexport default ComponentToggle;\nexport * from \"./componentToggle\";\n","import classNames from \"classnames\";\r\nimport { useContext, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { GameComponent, WithCode } from \"../../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport { AppThunk, RootState } from \"../store\";\r\nimport styles from \"./componentToggle.module.css\";\r\nimport defaultImage from \"../../images/componentDefault.png\";\r\nimport { selectSetupParameters, setErrorMessage } from \"../../features\";\r\nimport { PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface ComponentListProps<T extends WithCode<GameComponent>> {\r\n  selector: (state: RootState) => T[];\r\n  toggleComponent: (code: string) => PayloadAction<{ code: string }> | AppThunk;\r\n  getLabelKey: (component: T) => string;\r\n  getLockedKey?: (component: T) => string | null;\r\n  unsorted?: boolean;\r\n}\r\n\r\nexport const ComponentToggle = <T extends WithCode<GameComponent>>({\r\n  selector,\r\n  toggleComponent,\r\n  getLabelKey,\r\n  getLockedKey,\r\n  unsorted,\r\n}: ComponentListProps<T>) => {\r\n  const components = useAppSelector(selector);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Sort our component list, then memoize the result for performance\r\n  const sortedComponents = useMemo(() => {\r\n    // For sorting purposes, generate the final label text in advance\r\n    const returnValue = components.map((component) => ({\r\n      ...component,\r\n      label: t(getLabelKey(component)),\r\n    }));\r\n\r\n    // Sort it by default (unless asked explicitly not to)\r\n    if (!unsorted)\r\n      returnValue.sort((a, b) => a.label.localeCompare(b.label, i18n.language));\r\n\r\n    return returnValue;\r\n  }, [components, t, getLabelKey, unsorted, i18n.language]);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.carousel, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n    >\r\n      {sortedComponents.map((component) => {\r\n        if (component.enabled || stepActive) {\r\n          const componentLockedKey = getLockedKey\r\n            ? getLockedKey(component)\r\n            : null;\r\n          const componentLocked = componentLockedKey != null;\r\n          return (\r\n            <button\r\n              key={component.code}\r\n              className={classNames(styles.component, {\r\n                [styles.enabled]: stepActive && component.enabled,\r\n                [styles.locked]: stepActive && componentLocked,\r\n              })}\r\n              onClick={() =>\r\n                componentLocked\r\n                  ? dispatch(setErrorMessage(componentLockedKey))\r\n                  : dispatch(toggleComponent(component.code))\r\n              }\r\n              disabled={!stepActive}\r\n              title={\r\n                stepActive && componentLocked\r\n                  ? t(componentLockedKey)\r\n                  : undefined\r\n              }\r\n              tabIndex={stepActive && componentLocked ? -1 : undefined}\r\n              role=\"switch\"\r\n              aria-checked={component.enabled}\r\n              aria-disabled={stepActive ? componentLocked : undefined}\r\n              aria-label={stepActive ? component.label : undefined}\r\n              aria-invalid={stepActive && errorMessage ? true : undefined}\r\n              aria-errormessage={\r\n                stepActive && errorMessage ? \"appError\" : undefined\r\n              }\r\n            >\r\n              <img\r\n                className={styles.image}\r\n                src={\r\n                  component.image\r\n                    ? `${process.env.PUBLIC_URL}/images/${component.image}`\r\n                    : defaultImage\r\n                }\r\n                alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n                aria-hidden=\"true\"\r\n              />\r\n              <div className={styles.label}>\r\n                <span>{component.label}</span>\r\n              </div>\r\n            </button>\r\n          );\r\n        }\r\n        return null;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"carousel\":\"factionSelect_carousel__qbu2u\",\"faction\":\"factionSelect_faction__IK8eE\",\"selected\":\"factionSelect_selected__LdzyN\",\"locked\":\"factionSelect_locked__YnETl\",\"image\":\"factionSelect_image__0-2dZ\",\"icon\":\"factionSelect_icon__9Jeka\",\"title\":\"factionSelect_title__b3-tN\",\"militant\":\"factionSelect_militant__w7wGf\",\"label\":\"factionSelect_label__FfUCZ\"};","import classNames from \"classnames\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  selectFactionPool,\r\n  selectFlowState,\r\n  selectSetupParameters,\r\n  setCurrentFactionIndex,\r\n  setErrorMessage,\r\n} from \"../../features\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./factionSelect.module.css\";\r\nimport defaultImage from \"../../images/componentDefault.png\";\r\nimport { useContext } from \"react\";\r\nimport { StepContext } from \"../step\";\r\nimport { ReactComponent as MilitantIcon } from \"../../images/militant.svg\";\r\n\r\nexport const FactionSelect: React.FC = () => {\r\n  const { currentFactionIndex, lastFactionLocked } =\r\n    useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const dispatch = useAppDispatch();\r\n  const { stepActive } = useContext(StepContext);\r\n  const { t } = useTranslation();\r\n\r\n  const onKeyDownHandler: React.KeyboardEventHandler<HTMLButtonElement> = (\r\n    event\r\n  ) => {\r\n    const focusedIndex = currentFactionIndex ?? 0;\r\n    const maxIndex = factionPool.length - (lastFactionLocked ? 2 : 1);\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1;\r\n      if (newIndex > maxIndex) newIndex = 0;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1;\r\n      if (newIndex < 0) newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      dispatch(setCurrentFactionIndex(newIndex));\r\n      // @ts-expect-error focus function is incorrectly excluded from children typing\r\n      event.currentTarget.parentNode?.children[newIndex].focus();\r\n    }\r\n  };\r\n\r\n  const lastIndex = factionPool.length - 1;\r\n  return (\r\n    <div\r\n      className={styles.carousel}\r\n      role=\"radiogroup\"\r\n      aria-label={t(\"setupStep.selectFaction.subtitle\")}\r\n      aria-required=\"true\"\r\n      aria-invalid={stepActive && errorMessage ? true : undefined}\r\n      aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n      aria-disabled={!stepActive}\r\n    >\r\n      {factionPool.map((faction, index) => {\r\n        // Prepare the faction name in advance as we need to incorporate the vagabond character name (if there is one)\r\n        const factionName = faction.vagabond\r\n          ? `${t(`vagabond.${faction.vagabond.code}.name`)} (${t(\r\n              `faction.${faction.key}.name`\r\n            )})`\r\n          : t(`faction.${faction.key}.name`);\r\n        // Swap out the faction image for the vagabond image (if we have one)\r\n        const factionImage = faction.vagabond\r\n          ? faction.vagabond.image\r\n          : faction.image;\r\n        return (\r\n          <button\r\n            key={faction.code}\r\n            className={classNames(styles.faction, {\r\n              [styles.militant]: faction.militant,\r\n              [styles.selected]: index === currentFactionIndex,\r\n              [styles.locked]: lastFactionLocked && index === lastIndex,\r\n            })}\r\n            onClick={() => {\r\n              if (index !== currentFactionIndex) {\r\n                if (!lastFactionLocked || index < lastIndex) {\r\n                  dispatch(setCurrentFactionIndex(index));\r\n                } else {\r\n                  dispatch(setErrorMessage(\"error.lockedFaction\"));\r\n                }\r\n              }\r\n            }}\r\n            disabled={!stepActive}\r\n            title={\r\n              stepActive && lastFactionLocked && index === lastIndex\r\n                ? t(\"error.lockedFaction\")\r\n                : undefined\r\n            }\r\n            role=\"radio\"\r\n            aria-checked={index === currentFactionIndex}\r\n            aria-disabled={\r\n              stepActive ? lastFactionLocked && index === lastIndex : undefined\r\n            }\r\n            aria-label={\r\n              stepActive\r\n                ? `${factionName}${\r\n                    faction.militant ? ` ${t(\"label.militant\")}` : \"\"\r\n                  }`\r\n                : undefined\r\n            }\r\n            // We have to override the tabbing logic to meet the standard of role \"radio\"\r\n            tabIndex={\r\n              stepActive\r\n                ? index === (currentFactionIndex ?? 0)\r\n                  ? 0\r\n                  : -1\r\n                : undefined\r\n            }\r\n            onKeyDown={onKeyDownHandler}\r\n          >\r\n            <img\r\n              className={styles.image}\r\n              src={\r\n                factionImage\r\n                  ? `${process.env.PUBLIC_URL}/images/${factionImage}`\r\n                  : defaultImage\r\n              }\r\n              alt=\"\" // We're including the alt text in the button itself so don't bother reading out the image\r\n              aria-hidden=\"true\"\r\n            />\r\n            <div className={styles.title}>\r\n              <span className={styles.label}>\r\n                {faction.militant ? (\r\n                  <>\r\n                    <MilitantIcon\r\n                      className={styles.icon}\r\n                      title={t(\"label.militant\")}\r\n                    />{\" \"}\r\n                  </>\r\n                ) : null}\r\n                {factionName}\r\n              </span>\r\n            </div>\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"numberSelector_container__hUJC+\",\"label\":\"numberSelector_label__gfV2z\",\"button\":\"numberSelector_button__xqW1x\",\"input\":\"numberSelector_input__AA-8i\",\"value\":\"numberSelector_value__NDRMv\"};","import { NumberSelector } from \"./numberSelector\";\nexport default NumberSelector;\nexport * from \"./numberSelector\";\n","import { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./numberSelector.module.css\";\r\n\r\ninterface NumberSelectorProps {\r\n  id: string;\r\n  value: number;\r\n  minVal: number;\r\n  maxVal: number;\r\n  onChange: (value: number) => void;\r\n}\r\n\r\nexport const NumberSelector: React.FC<NumberSelectorProps> = ({\r\n  id,\r\n  value,\r\n  minVal,\r\n  maxVal,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  // This used to be dynamic but we've effectivley constrained this via CSS\r\n  const size = 2;\r\n\r\n  const buttonHandler = (amount: number) => {\r\n    const newValue = value + amount;\r\n    if (newValue >= minVal && newValue <= maxVal) onChange(newValue);\r\n  };\r\n\r\n  const typingHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const rawValue = event.target.value;\r\n    let newValue = Number(rawValue);\r\n    // Only continue processing if the user entered a numeric value\r\n    if (!isNaN(newValue)) {\r\n      // Trim off any extra numbers at the start of the input to allow numbers to be freely typed in\r\n      // We do this in a loop so we keep cutting off leading digits until we get a valid value\r\n      for (let digits = size; digits > 0; digits--) {\r\n        newValue = Number(rawValue.substring(rawValue.length - digits));\r\n        // Stop the loop once the value is small enough\r\n        if (newValue <= maxVal) {\r\n          // Only make the change if the value isn't too small\r\n          if (newValue >= minVal) onChange(newValue);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <label htmlFor={id} className={styles.label}>\r\n        <Trans i18nKey={`label.${id}`} />\r\n      </label>\r\n      {stepActive ? (\r\n        <>\r\n          <button className={styles.button} onClick={() => buttonHandler(-1)}>\r\n            -\r\n          </button>\r\n          <input\r\n            id={id}\r\n            inputMode=\"numeric\"\r\n            className={styles.input}\r\n            value={value}\r\n            size={size}\r\n            onChange={typingHandler}\r\n            aria-invalid={stepActive && errorMessage ? true : undefined}\r\n            aria-errormessage={\r\n              stepActive && errorMessage ? \"appError\" : undefined\r\n            }\r\n          />\r\n          <button className={styles.button} onClick={() => buttonHandler(+1)}>\r\n            +\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <span id={id} className={styles.value}>\r\n          {value}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"radiogroup_container__16Ji9\",\"option\":\"radiogroup_option__YGe3u\",\"radio\":\"radiogroup_radio__+1jdM\",\"label\":\"radiogroup_label__XK2wi\",\"inactive\":\"radiogroup_inactive__o-0P1\"};","import classNames from \"classnames\";\r\nimport { useContext } from \"react\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { selectSetupParameters } from \"../../features\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { StepContext } from \"../step\";\r\nimport styles from \"./radiogroup.module.css\";\r\n\r\ninterface RadiogroupProps {\r\n  id: string;\r\n  defaultValue?: boolean;\r\n  onChange: (value: boolean) => void;\r\n}\r\n\r\nexport const Radiogroup: React.FC<RadiogroupProps> = ({\r\n  id,\r\n  defaultValue,\r\n  onChange,\r\n}) => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  const { stepActive } = useContext(StepContext);\r\n  return (\r\n    <fieldset\r\n      name={id}\r\n      className={classNames(styles.container, {\r\n        [styles.inactive]: !stepActive,\r\n      })}\r\n      disabled={!stepActive}\r\n      aria-required=\"true\"\r\n      aria-invalid={stepActive && errorMessage ? true : undefined}\r\n      aria-errormessage={stepActive && errorMessage ? \"appError\" : undefined}\r\n    >\r\n      {!defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={`${id}False`}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={!defaultValue}\r\n            onChange={() => onChange(false)}\r\n          />\r\n          <label htmlFor={`${id}False`} className={styles.label}>\r\n            <Trans i18nKey={`label.${id}.false`} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n      {defaultValue || stepActive ? (\r\n        <div className={styles.option}>\r\n          <input\r\n            name={id}\r\n            id={`${id}True`}\r\n            type=\"radio\"\r\n            className={styles.radio}\r\n            checked={defaultValue}\r\n            onChange={() => onChange(true)}\r\n          />\r\n          <label htmlFor={`${id}True`} className={styles.label}>\r\n            <Trans i18nKey={`label.${id}.true`} />\r\n          </label>\r\n        </div>\r\n      ) : null}\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nRadiogroup.defaultProps = {\r\n  defaultValue: false,\r\n};\r\n","import { Radiogroup } from \"./radiogroup\";\nexport default Radiogroup;\nexport * from \"./radiogroup\";\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2868256c5d35189e90f781fe73fc5c34.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"stepList_container__IfzTc\"};","import { StepList } from \"./stepList\";\r\nexport default StepList;\r\nexport * from \"./stepList\";\r\n","import { useTranslation } from \"react-i18next\";\r\nimport {\r\n  enableMapLandmark,\r\n  fixFirstPlayer,\r\n  selectDeckArray,\r\n  selectExpansionArray,\r\n  selectFactionCodeArray,\r\n  selectHirelingArray,\r\n  selectLandmarkArray,\r\n  selectEnabledLandmarkMaps,\r\n  selectMapArray,\r\n  selectSetupParameters,\r\n  setLandmarkCount,\r\n  setPlayerCount,\r\n  skipSteps,\r\n  toggleDeck,\r\n  toggleExpansion,\r\n  toggleHireling,\r\n  toggleLandmark,\r\n  toggleMap,\r\n  selectFactionArray,\r\n  toggleFaction,\r\n  selectEnabledVagabondFactions,\r\n  selectVagabondArray,\r\n  toggleVagabond,\r\n  selectFlowState,\r\n  selectFactionPool,\r\n  selectSetupMap,\r\n} from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport Checkbox from \"../checkbox\";\r\nimport ComponentToggle from \"../componentToggle\";\r\nimport { FactionSelect } from \"../factionSelect\";\r\nimport { useAppDispatch, useAppSelector, useNthLastPlayer } from \"../hooks\";\r\nimport NumberSelector from \"../numberSelector\";\r\nimport Radiogroup from \"../radiogroup\";\r\nimport Step from \"../step\";\r\nimport styles from \"./stepList.module.css\";\r\n\r\nexport const StepList: React.FC = () => {\r\n  const {\r\n    playerCount,\r\n    fixedFirstPlayer,\r\n    useMapLandmark,\r\n    deck,\r\n    landmarkCount,\r\n    landmark1,\r\n    landmark2,\r\n    hireling1,\r\n    hireling2,\r\n    hireling3,\r\n    excludedFactions,\r\n    playerOrder,\r\n  } = useAppSelector(selectSetupParameters);\r\n  const map = useAppSelector(selectSetupMap);\r\n  const { currentPlayerIndex, currentFactionIndex } =\r\n    useAppSelector(selectFlowState);\r\n  const factionPool = useAppSelector(selectFactionPool);\r\n  const { skippedSteps } = useAppSelector(selectFlowState);\r\n  const landmarkMaps = useAppSelector(selectEnabledLandmarkMaps);\r\n  const factionCodes = useAppSelector(selectFactionCodeArray);\r\n  const vagabondFactions = useAppSelector(selectEnabledVagabondFactions);\r\n  const dispatch = useAppDispatch();\r\n  const nthLastPlayer = useNthLastPlayer();\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <main className={styles.container}>\r\n      <Step step={SetupStep.chooseExpansions}>\r\n        <ComponentToggle\r\n          selector={selectExpansionArray}\r\n          toggleComponent={toggleExpansion}\r\n          getLabelKey={(expansion) => `expansion.${expansion.code}`}\r\n          getLockedKey={(expansion) =>\r\n            // Prevent the player from deselecting the Root base game\r\n            expansion.base ? \"error.baseExpansionRequired\" : null\r\n          }\r\n          unsorted={true}\r\n        />\r\n        <Checkbox\r\n          id=\"includeBotStep\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpBots]}\r\n          onChange={(checked) =>\r\n            dispatch(skipSteps(SetupStep.setUpBots, !checked))\r\n          }\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.chooseMap}>\r\n        <ComponentToggle\r\n          selector={selectMapArray}\r\n          toggleComponent={toggleMap}\r\n          getLabelKey={(map) => `map.${map.code}.name`}\r\n        />\r\n        {landmarkMaps.length > 0 ? (\r\n          <Checkbox\r\n            id=\"useMapLandmark\"\r\n            defaultValue={useMapLandmark}\r\n            onChange={(checked) => dispatch(enableMapLandmark(checked))}\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpMap}\r\n        subtitleOptions={{ map: map && t(`map.${map?.code}.name`) }}\r\n        textKey={`map.${map?.code}.setup`}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpMapLandmark}\r\n        subtitleOptions={{\r\n          landmark: map?.landmark && t(`landmark.${map?.landmark}.name`),\r\n        }}\r\n        textKey={`map.${map?.code}.landmarkSetup`}\r\n      />\r\n      <Step step={SetupStep.chooseDeck}>\r\n        <ComponentToggle\r\n          selector={selectDeckArray}\r\n          toggleComponent={toggleDeck}\r\n          getLabelKey={(deck) => `deck.${deck.code}`}\r\n        />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpDeck}\r\n        renderTitle={skippedSteps[SetupStep.chooseDeck]}\r\n        renderSubtitle={!skippedSteps[SetupStep.chooseDeck]}\r\n        subtitleOptions={{ deck: deck && t(`deck.${deck}`) }}\r\n        textOptions={{ deck: deck && t(`deck.${deck}`) }}\r\n      />\r\n      <Step step={SetupStep.setUpBots} />\r\n      <Step step={SetupStep.seatPlayers}>\r\n        <NumberSelector\r\n          id=\"playerCount\"\r\n          value={playerCount}\r\n          minVal={skippedSteps[SetupStep.setUpBots] ? 2 : 1}\r\n          maxVal={factionCodes.length - 1}\r\n          onChange={(value) => dispatch(setPlayerCount(value))}\r\n        />\r\n        <Radiogroup\r\n          id=\"fixedFirstPlayer\"\r\n          defaultValue={fixedFirstPlayer}\r\n          onChange={(value) => dispatch(fixFirstPlayer(value))}\r\n        />\r\n      </Step>\r\n      <Step step={SetupStep.chooseLandmarks}>\r\n        <NumberSelector\r\n          id=\"landmarkCount\"\r\n          value={landmarkCount}\r\n          minVal={0}\r\n          maxVal={2}\r\n          onChange={(value) => dispatch(setLandmarkCount(value))}\r\n        />\r\n        {landmarkCount > 0 ? (\r\n          <ComponentToggle\r\n            selector={selectLandmarkArray}\r\n            toggleComponent={toggleLandmark}\r\n            getLabelKey={(landmark) => `landmark.${landmark.code}.name`}\r\n            getLockedKey={(landmark) =>\r\n              // Disable this landmark if it requires more players to include\r\n              landmark.minPlayers > playerCount\r\n                ? \"error.landmarkNotEnoughPlayers\"\r\n                : // Disable this landmark if it was already used in map setup\r\n                useMapLandmark && landmark.code === map?.landmark\r\n                ? \"error.mapLandmarkUsed\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpLandmark1}\r\n        subtitleOptions={{\r\n          landmark: landmark1 && t(`landmark.${landmark1}.name`),\r\n        }}\r\n        textKey={`landmark.${landmark1}.setup`}\r\n        textCount={nthLastPlayer(1)} // Last player in turn order\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpLandmark2}\r\n        subtitleOptions={{\r\n          landmark: landmark2 && t(`landmark.${landmark2}.name`),\r\n        }}\r\n        textKey={`landmark.${landmark2}.setup`}\r\n        textCount={nthLastPlayer(2)} // Second last player in turn order\r\n      />\r\n      <Step step={SetupStep.chooseHirelings}>\r\n        <Checkbox\r\n          id=\"includeHirelings\"\r\n          defaultValue={!skippedSteps[SetupStep.setUpHireling1]}\r\n          onChange={(checked) =>\r\n            dispatch(\r\n              skipSteps(\r\n                [\r\n                  SetupStep.setUpHireling1,\r\n                  SetupStep.setUpHireling2,\r\n                  SetupStep.setUpHireling3,\r\n                  SetupStep.postHirelingSetup,\r\n                ],\r\n                !checked\r\n              )\r\n            )\r\n          }\r\n        />\r\n        {!skippedSteps[SetupStep.setUpHireling1] ? (\r\n          <ComponentToggle\r\n            selector={selectHirelingArray}\r\n            toggleComponent={toggleHireling}\r\n            getLabelKey={(hireling) => `hireling.${hireling.code}.name`}\r\n            getLockedKey={(hireling) =>\r\n              // Are we at the max player count (i.e. there are no factions to spare for an equivilent hireling)?\r\n              playerCount >= factionCodes.length - 1 &&\r\n              // Is this hireling one of the faction equivilents?\r\n              hireling.factions.some((faction) =>\r\n                factionCodes.includes(faction)\r\n              )\r\n                ? \"error.factionHirelingExcluded\"\r\n                : null\r\n            }\r\n          />\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpHireling1}\r\n        subtitleOptions={{\r\n          hireling:\r\n            hireling1 &&\r\n            t(`hireling.${hireling1.code}.name`, {\r\n              context: hireling1.demoted ? \"demoted\" : undefined,\r\n            }),\r\n        }}\r\n        textKey={`hireling.${hireling1?.code}.setup`}\r\n        textCount={nthLastPlayer(1)} // Last player in turn order\r\n        textOptions={{ context: hireling1?.demoted ? \"demoted\" : undefined }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling2}\r\n        subtitleOptions={{\r\n          hireling:\r\n            hireling2 &&\r\n            t(`hireling.${hireling2.code}.name`, {\r\n              context: hireling2.demoted ? \"demoted\" : undefined,\r\n            }),\r\n        }}\r\n        textKey={`hireling.${hireling2?.code}.setup`}\r\n        textCount={nthLastPlayer(2)} // Second last player in turn order\r\n        textOptions={{ context: hireling2?.demoted ? \"demoted\" : undefined }}\r\n      />\r\n      <Step\r\n        step={SetupStep.setUpHireling3}\r\n        subtitleOptions={{\r\n          hireling:\r\n            hireling3 &&\r\n            t(`hireling.${hireling3.code}.name`, {\r\n              context: hireling3.demoted ? \"demoted\" : undefined,\r\n            }),\r\n        }}\r\n        textKey={`hireling.${hireling3?.code}.setup`}\r\n        textCount={nthLastPlayer(3)} // Third last player in turn order\r\n        textOptions={{ context: hireling3?.demoted ? \"demoted\" : undefined }}\r\n      />\r\n      <Step step={SetupStep.postHirelingSetup} />\r\n      <Step step={SetupStep.drawCards} />\r\n      <Step step={SetupStep.chooseFactions}>\r\n        <ComponentToggle\r\n          selector={selectFactionArray}\r\n          toggleComponent={toggleFaction}\r\n          getLabelKey={(faction) => `faction.${faction.key}.name`}\r\n          getLockedKey={(faction) =>\r\n            // Disable insurgent factions if we're only playing with 2 people and no bots or hirelings\r\n            playerCount < 3 &&\r\n            !faction.militant &&\r\n            skippedSteps[SetupStep.setUpHireling1] &&\r\n            skippedSteps[SetupStep.setUpBots]\r\n              ? \"error.tooFewPlayerInsurgent\"\r\n              : // Disable a faction if it was replaced by an equivilent hireling\r\n              excludedFactions.includes(faction.code)\r\n              ? \"error.hirelingSelected\"\r\n              : null\r\n          }\r\n        />\r\n        {vagabondFactions.length > 0 ? (\r\n          <>\r\n            {t(\"label.selectVagabonds\")}\r\n            <ComponentToggle\r\n              selector={selectVagabondArray}\r\n              toggleComponent={toggleVagabond}\r\n              getLabelKey={(vagabond) => `vagabond.${vagabond.code}.name`}\r\n            />\r\n          </>\r\n        ) : null}\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.selectFaction}\r\n        textCount={playerOrder[currentPlayerIndex]}\r\n      >\r\n        <FactionSelect />\r\n      </Step>\r\n      <Step\r\n        step={SetupStep.setUpFaction}\r\n        subtitleOptions={{\r\n          faction:\r\n            currentFactionIndex != null\r\n              ? t(`faction.${factionPool[currentFactionIndex].key}.name`)\r\n              : undefined,\r\n        }}\r\n        textKey={\r\n          currentFactionIndex != null\r\n            ? `faction.${factionPool[currentFactionIndex].key}.setup`\r\n            : undefined\r\n        }\r\n        textOptions={{\r\n          vagabond:\r\n            currentFactionIndex != null &&\r\n            factionPool[currentFactionIndex].vagabond\r\n              ? t(\r\n                  `vagabond.${factionPool[currentFactionIndex].vagabond?.code}.name`\r\n                )\r\n              : undefined,\r\n        }}\r\n      />\r\n      <Step step={SetupStep.placeScoreMarkers} />\r\n      <Step step={SetupStep.chooseHand} />\r\n      <Step step={SetupStep.setupEnd} textCount={playerOrder[0]} />\r\n    </main>\r\n  );\r\n};\r\n","import { configureStore, ThunkAction, Action } from \"@reduxjs/toolkit\";\nimport {\n  deckReducer,\n  expansionReducer,\n  factionReducer,\n  flowReducer,\n  hirelingReducer,\n  landmarkReducer,\n  mapReducer,\n  setupReducer,\n  vagabondReducer,\n} from \"../features/\";\n\nexport const store = configureStore({\n  reducer: {\n    deck: deckReducer,\n    expansion: expansionReducer,\n    faction: factionReducer,\n    flow: flowReducer,\n    hireling: hirelingReducer,\n    landmark: landmarkReducer,\n    map: mapReducer,\n    setup: setupReducer,\n    vagabond: vagabondReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"toast_anchor__sElDS\",\"hidden\":\"toast_hidden__kjNra\",\"container\":\"toast_container__Ov1KV\",\"message\":\"toast_message__qABUW\",\"close\":\"toast_close__ECTnm\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUndo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUndo);\nexport default __webpack_public_path__ + \"static/media/undo.5a573c6cc3c17506a909a3a801018a50.svg\";\nexport { ForwardRef as ReactComponent };","import { Toast } from \"./toast\";\nexport default Toast;\nexport * from \"./toast\";\n","import { useTranslation } from \"react-i18next\";\r\nimport styles from \"./toast.module.css\";\r\nimport { ReactComponent as CloseIcon } from \"../../images/close.svg\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { selectSetupParameters, setErrorMessage } from \"../../features\";\r\nimport { useState } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nexport const Toast: React.FC = () => {\r\n  const { errorMessage } = useAppSelector(selectSetupParameters);\r\n  // Cache the error message to allow us to continue displaying it as we transition\r\n  const [cachedMessage, setCachedMessage] = useState(errorMessage);\r\n  const dispatch = useAppDispatch();\r\n  const { t } = useTranslation();\r\n\r\n  // Update the cached message if a new one came through\r\n  if (errorMessage != null && errorMessage !== cachedMessage)\r\n    setCachedMessage(errorMessage);\r\n\r\n  return (\r\n    <div\r\n      className={classNames(styles.anchor, { [styles.hidden]: !errorMessage })}\r\n      aria-hidden={!errorMessage}\r\n      aria-live=\"assertive\"\r\n    >\r\n      <div className={styles.container}>\r\n        <span id=\"appError\" className={styles.message}>\r\n          {cachedMessage && t(cachedMessage)}.\r\n        </span>\r\n        <button\r\n          className={styles.close}\r\n          title={t(\"label.closeMessage\")}\r\n          onClick={() => dispatch(setErrorMessage(null))}\r\n          disabled={!errorMessage}\r\n        >\r\n          <CloseIcon />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"toolbar_container__Rt5ax\",\"toolbar\":\"toolbar_toolbar__zw8gT\",\"button\":\"toolbar_button__nKmH8\",\"disabled\":\"toolbar_disabled__ZpbtM\",\"left\":\"toolbar_left__SAzWH\",\"right\":\"toolbar_right__W8Aod\",\"icon\":\"toolbar_icon__wQJCk\",\"label\":\"toolbar_label__q4iU3\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRedo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRedo);\nexport default __webpack_public_path__ + \"static/media/redo.11634d8fe78742557717ccbadd28ebfd.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRestart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M77.25 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C175.6 444.9 183.8 448 192 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L77.25 256zM269.3 256l137.4-137.4c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0l-160 160c-12.5 12.5-12.5 32.75 0 45.25l160 160C367.6 444.9 375.8 448 384 448s16.38-3.125 22.62-9.375c12.5-12.5 12.5-32.75 0-45.25L269.3 256z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRestart);\nexport default __webpack_public_path__ + \"static/media/restart.1f1bc0fcdd3af260a646146f9839655a.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNext);\nexport default __webpack_public_path__ + \"static/media/next.f651cefe41f9309065677703624ef585.svg\";\nexport { ForwardRef as ReactComponent };","import { Toolbar } from \"./toolbar\";\nexport default Toolbar;\nexport * from \"./toolbar\";\n","import classNames from \"classnames\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  nextStep,\r\n  redoStep,\r\n  resetFlow,\r\n  selectFlowState,\r\n  undoStep,\r\n} from \"../../features\";\r\nimport { SetupStep } from \"../../types\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport styles from \"./toolbar.module.css\";\r\nimport { ReactComponent as UndoIcon } from \"../../images/undo.svg\";\r\nimport { ReactComponent as RedoIcon } from \"../../images/redo.svg\";\r\nimport { ReactComponent as RestartIcon } from \"../../images/restart.svg\";\r\nimport { ReactComponent as NextIcon } from \"../../images/next.svg\";\r\nimport { useRef, useState } from \"react\";\r\n\r\nexport const Toolbar: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useAppDispatch();\r\n  const { pastSteps, futureSteps, currentStep } =\r\n    useAppSelector(selectFlowState);\r\n  const [focusedIndex, setFocusedIndex] = useState(0);\r\n\r\n  const buttonRefs = [\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n    useRef<HTMLButtonElement>(null),\r\n  ];\r\n\r\n  const onKeyDownHandler = (\r\n    event: React.KeyboardEvent<HTMLButtonElement>,\r\n    focusedIndex: number\r\n  ) => {\r\n    const maxIndex = buttonRefs.length - 1;\r\n    let newIndex: number | undefined;\r\n\r\n    if (event.key === \"ArrowRight\" || event.key === \"ArrowDown\") {\r\n      newIndex = focusedIndex + 1 > maxIndex ? 0 : focusedIndex + 1;\r\n    } else if (event.key === \"ArrowLeft\" || event.key === \"ArrowUp\") {\r\n      newIndex = focusedIndex - 1 < 0 ? maxIndex : focusedIndex - 1;\r\n    } else if (event.key === \"Home\") {\r\n      newIndex = 0;\r\n    } else if (event.key === \"End\") {\r\n      newIndex = maxIndex;\r\n    }\r\n\r\n    if (newIndex != null) {\r\n      event.preventDefault();\r\n      setFocusedIndex(newIndex);\r\n      buttonRefs[newIndex].current?.focus();\r\n    }\r\n  };\r\n\r\n  const undoDisabled = pastSteps.length === 0;\r\n  const redoDisabled = futureSteps.length === 0;\r\n  const renderRestartButton = currentStep >= SetupStep.setupEnd;\r\n\r\n  return (\r\n    <footer className={styles.container}>\r\n      <div className={styles.toolbar} role=\"toolbar\">\r\n        <button\r\n          className={classNames(styles.button, styles.left, {\r\n            [styles.disabled]: undoDisabled,\r\n          })}\r\n          ref={buttonRefs[0]}\r\n          onClick={\r\n            undoDisabled\r\n              ? undefined\r\n              : () => {\r\n                  dispatch(undoStep());\r\n                  setFocusedIndex(0);\r\n                }\r\n          }\r\n          title={t(\"label.undo\")}\r\n          aria-disabled={undoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 0 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 0)}\r\n        >\r\n          <UndoIcon className={styles.icon} />\r\n        </button>\r\n        <button\r\n          className={classNames(styles.button, styles.left, {\r\n            [styles.disabled]: redoDisabled,\r\n          })}\r\n          ref={buttonRefs[1]}\r\n          onClick={\r\n            redoDisabled\r\n              ? undefined\r\n              : () => {\r\n                  dispatch(redoStep());\r\n                  setFocusedIndex(1);\r\n                }\r\n          }\r\n          title={t(\"label.redo\")}\r\n          aria-disabled={redoDisabled}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 1 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 1)}\r\n        >\r\n          <RedoIcon className={styles.icon} />\r\n        </button>\r\n        <button\r\n          className={`${styles.button} ${styles.right}`}\r\n          ref={buttonRefs[2]}\r\n          onClick={() => {\r\n            if (renderRestartButton) dispatch(resetFlow());\r\n            else dispatch(nextStep());\r\n            setFocusedIndex(2);\r\n          }}\r\n          // We have to override the tabbing logic to meet the standard of role \"toolbar\"\r\n          tabIndex={focusedIndex === 2 ? 0 : -1}\r\n          onKeyDown={(e) => onKeyDownHandler(e, 2)}\r\n        >\r\n          {renderRestartButton ? <RestartIcon className={styles.icon} /> : null}\r\n          <span className={styles.label}>\r\n            {t(renderRestartButton ? \"label.restartSetup\" : \"label.nextStep\")}\r\n          </span>\r\n          {!renderRestartButton ? <NextIcon className={styles.icon} /> : null}\r\n        </button>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n","import { Provider } from \"react-redux\";\r\nimport Header from \"../header\";\r\nimport StepList from \"../stepList\";\r\nimport { store } from \"../store\";\r\nimport Toast from \"../toast\";\r\nimport Toolbar from \"../toolbar\";\r\n\r\nexport const App: React.FC = () => (\r\n  <Provider store={store}>\r\n    <Header />\r\n    <StepList />\r\n    <Toolbar />\r\n    <Toast />\r\n  </Provider>\r\n);\r\n","import { App } from \"./app\";\nexport default App;\nexport * from \"./app\";\n"],"names":["t","useTranslation","className","styles","src","rootLogo","alt","getExpansionConfig","expansionCode","content","persistExpansionEnabled","enabled","localStorage","setItem","error","console","warn","expansionEnabled","base","storedVal","getItem","selectComponentArray","select","createSelector","stateSlice","array","Object","entries","code","object","push","setupInitialState","addExpansionComponents","initialState","expansion","toggleComponent","prepare","payload","reducer","state","action","component","massComponentToggle","componentEnable","dispatch","getState","forEach","index","shouldEnable","takeRandom","list","i","Math","floor","random","length","returnVal","splice","image","undefined","SetupStep","setExpansionEnabled","selectExpansionArray","expansionSlice","createSlice","name","reducers","enableExpansion","disableExpansion","actions","expansionReducers","builder","addCase","componentCode","toggleExpansion","addExpansionDecks","decks","deckCode","deck","selectDeckArray","selectEnabledDecks","filter","value","deckSlice","toggleDeck","extraReducers","addExpansionFactions","factions","factionCode","faction","selectFactionArray","selectFactionCodeArray","keys","selectEnabledMilitantFactions","militant","selectEnabledInsurgentFactions","selectEnabledVagabondFactions","isVagabond","factionSlice","toggleFaction","addExpansionHirelings","hirelings","hirelingCode","hireling","componentName","selectHirelingArray","selectFactionHirelingArray","factionCodes","some","includes","selectEnabledFactionHirelings","selectEnabledIndependentHirelings","every","hirelingSlice","toggleHireling","addExpansionLandmarks","landmarks","landmarkCode","landmark","selectLandmarkArray","selectEnabledLandmarks","landmarkSlice","toggleLandmark","addExpansionMaps","maps","mapCode","map","selectMapArray","selectEnabledMaps","selectEnabledLandmarkMaps","mapSlice","toggleMap","addExpansionVagabonds","vagabonds","vagabondCode","vagabond","selectVagabondArray","selectEnabledVagabonds","vagabondSlice","toggleVagabond","selectSetupParameters","setup","selectSetupMap","setupSlice","playerCount","fixedFirstPlayer","playerOrder","errorMessage","useMapLandmark","landmarkCount","landmark1","landmark2","hireling1","hireling2","hireling3","excludedFactions","setPlayerCount","fixFirstPlayer","setFirstPlayer","nextPlayer","setErrorMessage","enableMapLandmark","setMap","setDeck","setLandmarkCount","setLandmark1","setLandmark2","setHireling","number","demoted","clearExcludedFactions","addDefaultCase","pastSteps","currentStep","chooseExpansions","factionPool","lastFactionLocked","currentPlayerIndex","currentFactionIndex","skippedSteps","Array","setupEnd","fill","futureSteps","setUpBots","setUpHireling1","setUpHireling2","setUpHireling3","postHirelingSetup","getSlice","step","playerIndex","factionIndex","applySlice","slice","selectFlowState","flow","selectFactionPool","entry","flowSlice","incrementStep","setUpFaction","removedFaction","selectFaction","skipStep","undoStep","previousStep","pop","unshift","redoStep","nextStep","shift","skipSteps","steps","skip","clearFactionPool","addToFactionPool","vagabondPool","setCurrentPlayerIndex","setCurrentFactionIndex","resetFlow","useAppDispatch","useDispatch","useAppSelector","useSelector","defaultValue","stepActive","StepContext","createContext","StepProvider","Provider","Step","renderTitle","renderSubtitle","subtitleOptions","textKey","textCount","textOptions","textBelowChildren","children","i18n","sectionElement","useRef","useEffect","current","scrollIntoView","behavior","titleText","exists","subtitleText","document","title","stepText","Trans","i18nKey","count","tOptions","classNames","ref","defaultProps","_path","id","onChange","useContext","type","defaultChecked","disabled","e","target","checked","htmlFor","selector","getLabelKey","getLockedKey","unsorted","components","sortedComponents","useMemo","returnValue","label","sort","a","b","localeCompare","language","componentLockedKey","componentLocked","onClick","tabIndex","role","process","defaultImage","_excluded","_extends","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMilitant","_ref","svgRef","titleId","props","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","d","ForwardRef","FactionSelect","onKeyDownHandler","event","newIndex","focusedIndex","maxIndex","preventDefault","currentTarget","parentNode","focus","lastIndex","factionName","factionImage","onKeyDown","minVal","maxVal","buttonHandler","amount","newValue","inputMode","size","rawValue","Number","isNaN","digits","substring","Radiogroup","landmarkMaps","vagabondFactions","nthLastPlayer","position","useNthLastPlayer","chooseMap","setUpMap","setUpMapLandmark","chooseDeck","setUpDeck","seatPlayers","chooseLandmarks","minPlayers","setUpLandmark1","setUpLandmark2","chooseHirelings","context","drawCards","chooseFactions","placeScoreMarkers","chooseHand","store","configureStore","deckReducer","expansionReducer","factionReducer","flowReducer","hirelingReducer","landmarkReducer","mapReducer","setupReducer","vagabondReducer","SvgClose","useState","cachedMessage","setCachedMessage","SvgUndo","SvgRedo","SvgRestart","SvgNext","setFocusedIndex","buttonRefs","undoDisabled","redoDisabled","renderRestartButton","setupParameters","flowState","doIncrementStep","validationError","maxPlayerCount","mapPool","deckPool","firstPlayer","landmarkPool","excludedFactionsUpdated","hirelingPool","factionHirelings","spareFactionCount","excludeCount","concat","workingFactionPool","insurgentFactions","vagabondFactionCount","App"],"sourceRoot":""}